/* Wikiwand - Minified Early JS */


$.escapeRE=function(e){return e.replace(/([\\{}()|.?*+\-\^$\[\]])/g,"\\$1")};var mediaWiki={msg:function(){},language:{months:{keys:{names:["january","february","march","april","may_long","june","july","august","september","october","november","december"],genitive:["january-gen","february-gen","march-gen","april-gen","may-gen","june-gen","july-gen","august-gen","september-gen","october-gen","november-gen","december-gen"],abbrev:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]},names:["January","February","March","April","May","June","July","August","September","October","November","December"],genitive:["January","February","March","April","May","June","July","August","September","October","November","December"],abbrev:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},config:{get:function(e){switch(e){case"wgSeparatorTransformTable":var t=articleData.langCodeUrl;return"fr"==t||"es"==t||"de"==t||"ru"==t||"pl"==t||"pt"==t||"nl"==t||"it"==t||"ar"==t||"hu"==t||"fi"==t?[",\t."," \t,"]:["",""];case"wgDigitTransformTable":return["",""];case"wgDefaultDateFormat":return"dmy";case"wgContentLanguage":return articleData.langCodeUrl;case"tableSorterCollation":return null;default:return""}}}};function Analytics(){var e=window.location.search.indexOf("debug_analytics=1")>-1;Analytics.prototype.gaInitialize=function(e){var t,o,i,n,a,r,s={client:"UA-49207730-1",abTesting:"UA-49207730-5",retention:"UA-49207730-12",boardsAbTest:"UA-49207730-14"};"boards"==e&&(s.client="UA-49207730-13",s.abTesting="UA-49207730-14"),t=window,o=document,i="script",n="ga",t.GoogleAnalyticsObject=n,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,a=o.createElement(i),r=o.getElementsByTagName(i)[0],a.async=1,a.src="//www.google-analytics.com/analytics.js",r.parentNode.insertBefore(a,r);var l=null,c=document.cookie.match(/userID=([^;]+)/);c&&(l=c[1]),l||CURRENT_USER_ID&&(l=CURRENT_USER_ID),console.log("* Analytics: user ID is",l);var u={cookieDomain:"none"},d={cookieDomain:"none",name:"ABtesting"};"boards"==e&&l&&(u.userId=l,d.userId=l),ga("create",s.client,u),ga("create",s.abTesting,d),ga("create",s.boardsAbTest,{cookieDomain:"none",name:"boardsDataProfile"}),ga("require","displayfeatures");var p=serverData&&serverData.agent.extensionInstalled;!0===p&&(ga("set","campaignMedium","wikiwand-extension"),ga("set","campaignSource","")),"undefined"!=typeof serverData&&serverData.agent&&serverData.agent.iOSWebView||"undefined"!=typeof precache_from_extension&&1==precache_from_extension||"undefined"!=typeof serverData&&serverData.config&&"popup"==serverData.config.source||(ga("send","pageview"),"wikiwand"==e&&l&&(ga("create",s.retention,{cookieDomain:"none",userId:l,name:"retention"}),!0===p&&(ga("set","campaignMedium","wikiwand-extension"),ga("set","campaignSource","")),ga("retention.send","pageview")))},Analytics.prototype.gaEvent=function(e,t,o,i){"undefined"!=typeof ga?ga("send","event",e,t,o,i):window.setTimeout(function(){analytics.gaEvent(e,t,o,i)},500)},Analytics.prototype.gaEventIf=function(e,t,o,i,n){e?(console.log("* Analytics: reporting event: "+t+"/"+o+"/"+(i||"")),Analytics.prototype.gaEvent(t,o,i,n)):console.log("* Analytics: psuedo reporting event: "+t+"/"+o+"/"+(i||""))},Analytics.prototype.gaSetDimension=function(e,t){"undefined"!=typeof ga?ga("set","dimension"+e,t):window.setTimeout(function(){analytics.gaSetDimension(e,t)},500)},Analytics.prototype.gaPageView=function(e){serverData&&serverData.agent&&serverData.agent.iOSWebView||("undefined"!=typeof ga?ga("send","pageview",e):window.setTimeout(function(){analytics.gaPageView(e)},500))},Analytics.prototype.gaVirtualPageView=function(t,o){o=o||"ABtesting",serverData&&serverData.agent&&serverData.agent.iOSWebView||("undefined"!=typeof ga?(e&&console.warn("→→→→→→→→→→ GOOGLE ANALYTICS: "+t),ga(o+".send","pageview",t)):window.setTimeout(function(){analytics.gaVirtualPageView(t)},500))},Analytics.prototype.gaVirtualPageViewIf=function(e,t,o){e?(console.log("* Analytics: reporting virtual pageview: "+t),Analytics.prototype.gaVirtualPageView(t,o)):console.log("* Analytics: psuedo reporting virtual pageview: "+t)}}!function(e,t){"use strict";var o="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,i=function(){for(var e,o,i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,a=i.length,r={};n<a;n++)if((e=i[n])&&e[1]in t){for(n=0,o=e.length;n<o;n++)r[i[0][n]]=e[n];return r}return!1}(),n={request:function(e){var n=i.requestFullscreen;e=e||t.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?e[n]():e[n](o&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){t[i.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(){},onerror:function(){},raw:i};i?(Object.defineProperties(n,{isFullscreen:{get:function(){return!!t[i.fullscreenElement]}},element:{enumerable:!0,get:function(){return t[i.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!t[i.fullscreenEnabled]}}}),t.addEventListener(i.fullscreenchange,function(e){n.onchange.call(n,e)}),t.addEventListener(i.fullscreenerror,function(e){n.onerror.call(n,e)}),e.screenfull=n):e.screenfull=!1}(window,document),function(e,t){var o,i=[];function n(e){var t,o=i.length;for(t=0;t<o;t++)if(i[t].id.toLowerCase()===e.toLowerCase())return i[t];return!1}function a(t){var o=e(t),i=o.data("sortValue");return null!==i&&void 0!==i?String(i):t?"img"===t.tagName.toLowerCase()?o.attr("alt")||"":e.map(e.makeArray(t.childNodes),function(t){return 1===t.nodeType?a(t):e.text(t)}).join(""):o.text()}function r(t,o,n){for(var r,s=i.length,l=1,c=0,u=0,d=o.length>4?5:o.length;l<s;)if(""!==(r=o[c]&&o[c].cells[n]?e.trim(a(o[c].cells[n])):""))if(i[l].is(r,t)){if(c++,++u>=d)return i[l]}else l++,c=0,u=0;else++c>o.length&&(c=0,l++);return i[0]}function s(t){var o,i,n,r,s=t.tBodies[0]&&t.tBodies[0].rows.length||0,l=t.tBodies[0].rows[0]&&t.tBodies[0].rows[0].cells.length||0,c=e(t).data("tablesorter").config,u=c.parsers,d={row:[],normalized:[]};for(o=0;o<s;++o)if(r=[],(n=e(t.tBodies[0].rows[o])).hasClass(c.cssChildRow))d.row[d.row.length-1]=d.row[d.row.length-1].add(n);else{for(d.row.push(n),i=0;i<l;++i)r.push(u[i].format(a(n[0].cells[i]),t,n[0].cells[i]));r.push(d.normalized.length),d.normalized.push(r),r=null}return d}function l(t,o){var i,n,a,r,s=o.row,l=o.normalized,c=l.length,u=l[0].length-1,d=document.createDocumentFragment();for(i=0;i<c;i++)for(a=s[n=l[i][u]].length,r=0;r<a;r++)d.appendChild(s[n][r]);t.tBodies[0].appendChild(d),e(t).trigger("sortEnd.tablesorter")}function c(t,o,i){e.each(i,function(i,n){e.each(n,function(n,a){var r=t[i],s=e(r);u(a,o)?e.each(o,function(e,t){if(t[0]===n)return s.data({order:t[1],count:t[1]+1}),!1}):s.data({order:0,count:0})})})}function u(e,t){var o,i=t.length;for(o=0;o<i;o++)if(t[o][0]===e)return!0;return!1}function d(t){var o=[];return e.each(t,function(t,i){void 0!==i&&-1===e.inArray(i,o)&&o.push(i)}),o}function p(e,t,o,i,n,a){t.removeClass(i[0]).removeClass(i[1]).attr("title",n[1]);for(var r=0;r<o.length;r++)t.eq(a[o[r][0]]).addClass(i[o[r][1]]).attr("title",n[o[r][1]])}function h(e,t){return e<t?-1:e>t?1:0}function f(e,t){return t<e?-1:t>e?1:0}function g(e,t,o){var i,n=[],a=t.length;for(i=0;i<a;i++)n[i]=t[i][1]?f:h;return o.normalized.sort(function(e,o){var i,r,s;for(i=0;i<a;i++)if(r=t[i][0],0!==(s=n[i].call(this,e[r],o[r])))return s;return h.call(this,e[e.length-1],o[o.length-1])}),o}function m(t){var o=[];return e.each(t,function(t,i){e.each(i,function(e,t){var i="desc"===t?1:0;o.push([parseInt(e,10),i])})}),o}e.tablesorter={defaultOptions:{cssHeader:"headerSort",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortMultiSortKey:"shiftKey",unsortableClass:"unsortable",parsers:{},cancelSelection:!0,sortList:[],headerList:[],headerToColumns:[],columnToHeader:[]},dateRegex:[],monthNames:{},construct:function(i,a){return i.each(function(i,h){var f,v,w,y,b,k=e(h),x=!0;function S(){x=!1,function(){if(o.collationTable=t.config.get("tableSorterCollation"),o.collationRegex=null,o.collationTable){var e,i=[];for(e in o.collationTable)o.collationTable.hasOwnProperty(e)&&i.push(e);i.length&&(o.collationRegex=new RegExp("["+i.join("")+"]","ig"))}}();var i,a=k.find("> tbody > tr.sortbottom");a.length&&((i=k.children("tfoot")).length?i.eq(0).prepend(a):k.append(e("<tfoot>").append(a))),function(t){var o,i,n,a,r,s,l,c,u,d=t.find("> tbody > tr > [rowspan]").get();if(d.length)for(t.find("> tbody > tr").each(function(){var t,o=0,i=this.cells.length;for(t=0;t<i;t++)e(this.cells[t]).data("tablesorter",{realCellIndex:o,realRowIndex:this.rowIndex}),o+=this.cells[t].colSpan}),p();d.length;)for(e.data(d[0],"tablesorter").needResort&&p(),a=d.shift(),r=e.data(a,"tablesorter"),i=a.rowSpan,n=a.colSpan,o=r.realCellIndex,a.rowSpan=1,u=e(a).parent().nextAll(),s=0;s<i-1;s++)l=e(u[s].cells).filter(h),(c=e(a).clone()).data("tablesorter",{realCellIndex:o,realRowIndex:r.realRowIndex+s,needResort:!0}),l.length?(l.each(f),l.first().before(c)):u.eq(s).append(c);function p(){var t,o,i;d=d.sort(function(n,a){return t=e.data(n,"tablesorter"),o=e.data(a,"tablesorter"),(i=t.realCellIndex-o.realCellIndex)||(i=t.realRowIndex-o.realRowIndex),i}),e.each(d,function(){e.data(this,"tablesorter").needResort=!1})}function h(){return e.data(this,"tablesorter").realCellIndex>=o}function f(){e.data(this,"tablesorter").realCellIndex+=n,this.rowSpan>1&&(e.data(this,"tablesorter").needResort=!0)}}(k),w.parsers=function(e,t){var o,i,a,s,l=e.tBodies[0].rows,c=[];if(l[0])for(i=l[0].cells.length,a=0;a<i;a++)s=!1,void 0!==(o=t.eq(a).data("sortType"))&&(s=n(o)),!1===s&&(s=r(e,l,a)),c.push(s);return c}(h,f)}h.tBodies&&(h.tHead||(function(t){var o,i,n,a=t.find("> tbody > tr");if(t.get(0).tHead||(o=e("<thead>"),a.each(function(){if(e(this).children("td").length)return!1;o.append(this)}),t.find(" > tbody:first").before(o)),!t.get(0).tFoot){for(i=e("<tfoot>"),n=a.length-1;n>=0&&!e(a[n]).children("td").length;n--)i.prepend(e(a[n]));t.append(i)}}(k),h.tHead))&&(k.addClass("jquery-tablesorter"),w=e.extend({},e.tablesorter.defaultOptions,a),e.data(h,"tablesorter",{config:w}),y=[w.cssDesc,w.cssAsc],b=[t.msg("sort-descending"),t.msg("sort-ascending")],f=function(t,o){var i,n,a,r,s,l,c,u,p=e(t).data("tablesorter").config,h=0,f=0,g=e([]),m=e("thead:eq(0) > tr",t);return m.length<=1?g=m.children("th"):(u=[],m.each(function(t,o){e.each(o.cells,function(e,o){var i,n;for(r=Number(o.rowSpan),s=Number(o.colSpan);u[t]&&void 0!==u[t][e];)++e;for(n=e;n<e+s;++n)for(i=t;i<t+r;++i)u[i]||(u[i]=[]),u[i][n]=o})}),e.each(u,function(t,o){(l=e(d(o)).filter("th").length)>=h&&(h=l,c=t)}),g=e(d(u[c])).filter("th")),g.each(function(t){for(a=e(this),i=[],n=0;n<this.colSpan;n++)p.columnToHeader[f+n]=t,i.push(f+n);p.headerToColumns[t]=i,f+=this.colSpan,a.data({headerIndex:t,order:0,count:0}),a.hasClass(p.unsortableClass)&&a.data("sortDisabled",!0),a.data("sortDisabled")||a.addClass(p.cssHeader).prop("tabIndex",0).attr({role:"columnheader button",title:o[1]}),p.headerList[t]=this}),g}(h,b),function(){var i,n,a,r,s="0123456789,.".split(""),l=t.config.get("wgSeparatorTransformTable"),c=t.config.get("wgDigitTransformTable");if(null===l||""===l[0]&&""===c[2])o.transformTable=!1;else for(o.transformTable={},i=l[0].split("\t").concat(c[0].split("\t")),n=l[1].split("\t").concat(c[1].split("\t")),a=0;a<i.length;a++)o.transformTable[n[a]]=i[a],s.push(e.escapeRE(n[a]));r="["+s.join("",s)+"]",o.numberRegex=new RegExp("^([-+−]?[0-9][0-9,]*(\\.[0-9,]*)?(E[-+−]?[0-9][0-9,]*)?|[-+−]?"+r+"+[\\s\\xa0]*%?)$","i")}(),function(){var i,n,a=[];for(o.monthNames={},i=0;i<12;i++)n=t.language.months.names[i].toLowerCase(),o.monthNames[n]=i+1,a.push(e.escapeRE(n)),n=t.language.months.genitive[i].toLowerCase(),o.monthNames[n]=i+1,a.push(e.escapeRE(n)),n=t.language.months.abbrev[i].toLowerCase().replace(".",""),o.monthNames[n]=i+1,a.push(e.escapeRE(n));a=a.join("|"),o.dateRegex[0]=new RegExp(/^\s*(\d{1,2})[\,\.\-\/'\s]{1,2}(\d{1,2})[\,\.\-\/'\s]{1,2}(\d{2,4})\s*?/i),o.dateRegex[1]=new RegExp("^\\s*(\\d{1,2})[\\,\\.\\-\\/'\\s]+("+a+")[\\,\\.\\-\\/'\\s]+(\\d{2,4})\\s*$","i"),o.dateRegex[2]=new RegExp("^\\s*("+a+")[\\,\\.\\-\\/'\\s]+(\\d{1,2})[\\,\\.\\-\\/'\\s]+(\\d{2,4})\\s*$","i")}(),o.rgx||(o.rgx={IPAddress:[new RegExp(/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/)],currency:[new RegExp(/(^[£$€¥]|[£$€¥]$)/),new RegExp(/[£$€¥]/g)],url:[new RegExp(/^(https?|ftp|file):\/\/$/),new RegExp(/(https?|ftp|file):\/\//)],isoDate:[new RegExp(/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/)],usLongDate:[new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/)],time:[new RegExp(/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/)]}),f.not("."+w.unsortableClass).on("keypress click",function(t){var o,i,n,a,r,d,m,$;if("click"===t.type&&"a"===t.target.nodeName.toLowerCase())return!0;if("keypress"===t.type&&13!==t.which)return!0;if(x&&S(),v=s(h),r=k[0].tBodies[0]&&k[0].tBodies[0].rows.length||0,!h.sortDisabled&&r>0){if((o=e(this)).data({order:o.data("count")%2,count:o.data("count")+1}),this,i=w.headerToColumns[o.data("headerIndex")],n=e.map(i,function(e){return[[e,o.data("order")]]}),a=i[0],t[w.sortMultiSortKey])if(u(a,w.sortList))for(d=0;d<w.sortList.length;d++)m=w.sortList[d],$=w.headerList[m[0]],u(m[0],n)&&(e($).data("count",m[1]+1),m[1]=e($).data("count")%2);else w.sortList=w.sortList.concat(n);else w.sortList=n;return c(f,w.sortList,w.headerToColumns),p(k[0],f,w.sortList,y,b,w.columnToHeader),l(k[0],g(k[0],w.sortList,v)),!1}}).mousedown(function(){if(w.cancelSelection)return this.onselectstart=function(){return!1},!1}),k.data("tablesorter").sort=function(e){x&&S(),void 0===e?e=w.sortList:e.length>0&&(e=m(e)),c(f,e,w.headerToColumns),v=s(h),p(0,f,e,y,b,w.columnToHeader),l(h,g(0,e,v))},w.sortList.length>0&&(S(),w.sortList=m(w.sortList),k.data("tablesorter").sort()))})},addParser:function(e){var t,o=i.length,n=!0;for(t=0;t<o;t++)i[t].id.toLowerCase()===e.id.toLowerCase()&&(n=!1);n&&i.push(e)},formatDigit:function(e){var t,i,n,a;if(!1!==o.transformTable){for(t="",n=0;n<e.length;n++)(i=e.charAt(n))in o.transformTable?t+=o.transformTable[i]:t+=i;e=t}return a=parseFloat(e.replace(/[, ]/g,"").replace("−","-")),isNaN(a)?0:a},formatFloat:function(e){var t=parseFloat(e);return isNaN(t)?0:t},formatInt:function(e){var t=parseInt(e,10);return isNaN(t)?0:t},clearTableBody:function(t){e(t.tBodies[0]).empty()}},o=e.tablesorter,e.fn.tablesorter=function(e){return o.construct(this,e)},o.addParser({id:"text",is:function(){return!0},format:function(t){if(t=e.trim(t.toLowerCase()),o.collationRegex){var i=o.collationTable;t=t.replace(o.collationRegex,function(e){return(i[e]?i[e]:i[e.toUpperCase()]).toLowerCase()})}return t},type:"text"}),o.addParser({id:"IPAddress",is:function(e){return o.rgx.IPAddress[0].test(e)},format:function(t){var o,i,n=t.split("."),a="",r=n.length;for(o=0;o<r;o++)1===(i=n[o]).length?a+="00"+i:2===i.length?a+="0"+i:a+=i;return e.tablesorter.formatFloat(a)},type:"numeric"}),o.addParser({id:"currency",is:function(e){return o.rgx.currency[0].test(e)},format:function(t){return e.tablesorter.formatDigit(t.replace(o.rgx.currency[1],""))},type:"numeric"}),o.addParser({id:"url",is:function(e){return o.rgx.url[0].test(e)},format:function(t){return e.trim(t.replace(o.rgx.url[1],""))},type:"text"}),o.addParser({id:"isoDate",is:function(e){return o.rgx.isoDate[0].test(e)},format:function(t){return e.tablesorter.formatFloat(""!==t?new Date(t.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"}),o.addParser({id:"usLongDate",is:function(e){return o.rgx.usLongDate[0].test(e)},format:function(t){return e.tablesorter.formatFloat(new Date(t).getTime())},type:"numeric"}),o.addParser({id:"date",is:function(e){return o.dateRegex[0].test(e)||o.dateRegex[1].test(e)||o.dateRegex[2].test(e)},format:function(i){var n,a;if(null!==(n=(i=e.trim(i.toLowerCase())).match(o.dateRegex[0])))if("mdy"===t.config.get("wgDefaultDateFormat")||"en"===t.config.get("wgContentLanguage"))i=[n[3],n[1],n[2]];else{if("dmy"!==t.config.get("wgDefaultDateFormat"))return"99999999";i=[n[3],n[2],n[1]]}else if(null!==(n=i.match(o.dateRegex[1])))i=[n[3],""+o.monthNames[n[2]],n[1]];else{if(null===(n=i.match(o.dateRegex[2])))return"99999999";i=[n[3],""+o.monthNames[n[1]],n[2]]}for(1===i[1].length&&(i[1]="0"+i[1]),1===i[2].length&&(i[2]="0"+i[2]),(a=parseInt(i[0],10))<100&&(i[0]=a<30?2e3+a:1900+a);i[0].length<4;)i[0]="0"+i[0];return parseInt(i.join(""),10)},type:"numeric"}),o.addParser({id:"time",is:function(e){return o.rgx.time[0].test(e)},format:function(t){return e.tablesorter.formatFloat(new Date("2000/01/01 "+t).getTime())},type:"numeric"}),o.addParser({id:"number",is:function(t){return e.tablesorter.numberRegex.test(e.trim(t))},format:function(t){return e.tablesorter.formatDigit(t)},type:"numeric"})}(jQuery,mediaWiki),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){var t=!1,o=!1,i=0,n=2e3,a=0,r=e,s=["ms","moz","webkit","o"],l=window.requestAnimationFrame||!1,c=window.cancelAnimationFrame||!1;if(!l)for(var u in s){var d=s[u];l||(l=window[d+"RequestAnimationFrame"]),c||(c=window[d+"CancelAnimationFrame"]||window[d+"CancelRequestAnimationFrame"])}var p=window.MutationObserver||window.WebKitMutationObserver||!1,h={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:function(){var e=document.getElementsByTagName("script"),t=e[e.length-1].src.split("?")[0];return t.split("/").length>0?t.split("/").slice(0,-1).join("/")+"/":""}()},f=!1,g=function(){if(f)return f;var e=document.createElement("DIV"),t={};t.haspointerlock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,t.isopera="opera"in window,t.isopera12=t.isopera&&"getUserMedia"in navigator,t.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),t.isie="all"in document&&"attachEvent"in e&&!t.isopera,t.isieold=t.isie&&!("msInterpolationMode"in e.style),t.isie7=!(!t.isie||t.isieold||"documentMode"in document&&7!=document.documentMode),t.isie8=t.isie&&"documentMode"in document&&8==document.documentMode,t.isie9=t.isie&&"performance"in window&&document.documentMode>=9,t.isie10=t.isie&&"performance"in window&&document.documentMode>=10,t.isie9mobile=/iemobile.9/i.test(navigator.userAgent),t.isie9mobile&&(t.isie9=!1),t.isie7mobile=!t.isie9mobile&&t.isie7&&/iemobile/i.test(navigator.userAgent),t.ismozilla="MozAppearance"in e.style,t.iswebkit="WebkitAppearance"in e.style,t.ischrome="chrome"in window,t.ischrome22=t.ischrome&&t.haspointerlock,t.ischrome26=t.ischrome&&"transition"in e.style,t.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window,t.hasmstouch=window.navigator.msPointerEnabled||!1,t.ismac=/^mac$/i.test(navigator.platform),t.isios=t.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform),t.isios4=t.isios&&!("seal"in Object),t.isandroid=/android/i.test(navigator.userAgent),t.trstyle=!1,t.hastransform=!1,t.hastranslate3d=!1,t.transitionstyle=!1,t.hastransition=!1,t.transitionend=!1;for(var o=["transform","msTransform","webkitTransform","MozTransform","OTransform"],i=0;i<o.length;i++)if(void 0!==e.style[o[i]]){t.trstyle=o[i];break}t.hastransform=0!=t.trstyle,t.hastransform&&(e.style[t.trstyle]="translate3d(1px,2px,3px)",t.hastranslate3d=/translate3d/.test(e.style[t.trstyle])),t.transitionstyle=!1,t.prefixstyle="",t.transitionend=!1;o=["transition","webkitTransition","MozTransition","OTransition","OTransition","msTransition","KhtmlTransition"];var n=["","-webkit-","-moz-","-o-","-o","-ms-","-khtml-"],a=["transitionend","webkitTransitionEnd","transitionend","otransitionend","oTransitionEnd","msTransitionEnd","KhtmlTransitionEnd"];for(i=0;i<o.length;i++)if(o[i]in e.style){t.transitionstyle=o[i],t.prefixstyle=n[i],t.transitionend=a[i];break}return t.ischrome26&&(t.prefixstyle=n[1]),t.hastransition=t.transitionstyle,t.cursorgrabvalue=function(){var o=["-moz-grab","-webkit-grab","grab"];(t.ischrome&&!t.ischrome22||t.isie)&&(o=[]);for(var i=0;i<o.length;i++){var n=o[i];if(e.style.cursor=n,e.style.cursor==n)return n}return"url(//mail.google.com/mail/images/2/openhand.cur),n-resize"}(),t.hasmousecapture="setCapture"in e,t.hasMutationObserver=!1!==p,e=null,f=t,t},m=function(e,s){function u(){var e=w.doc.css(b.trstyle);return!(!e||"matrix"!=e.substr(0,6))&&e.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}function d(e,t,o){var i=e.css(t),n=parseFloat(i);if(isNaN(n)){var a=3==(n=S[i]||0)?o?w.win.outerHeight()-w.win.innerHeight():w.win.outerWidth()-w.win.innerWidth():1;return w.isie8&&n&&(n+=1),a?n:0}return n}function f(e,t,o,i){w._bind(e,t,function(i){var n={original:i=i||window.event,target:i.target||i.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==i.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return i.preventDefault?i.preventDefault():i.returnValue=!1,!1},stopImmediatePropagation:function(){i.stopImmediatePropagation?i.stopImmediatePropagation():i.cancelBubble=!0}};return"mousewheel"==t?(n.deltaY=-.025*i.wheelDelta,i.wheelDeltaX&&(n.deltaX=-.025*i.wheelDeltaX)):n.deltaY=i.detail,o.call(e,n)},i)}function m(e,t,o){var i,n;if(0==e.deltaMode?(i=-Math.floor(e.deltaX*(w.opt.mousescrollstep/54)),n=-Math.floor(e.deltaY*(w.opt.mousescrollstep/54))):1==e.deltaMode&&(i=-Math.floor(e.deltaX*w.opt.mousescrollstep),n=-Math.floor(e.deltaY*w.opt.mousescrollstep)),t&&w.opt.oneaxismousemode&&0==i&&n&&(i=n,n=0),i&&(w.scrollmom&&w.scrollmom.stop(),w.lastdeltax+=i,w.debounced("mousewheelx",function(){var e=w.lastdeltax;w.lastdeltax=0,w.rail.drag||w.doScrollLeftBy(e)},15)),n){if(w.opt.nativeparentscrolling&&o&&!w.ispage&&!w.zoomactive)if(0>n){if(w.getScrollTop()>=w.page.maxh)return!0}else if(w.getScrollTop()<=0)return!0;w.scrollmom&&w.scrollmom.stop(),w.lastdeltay+=n,w.debounced("mousewheely",function(){var e=w.lastdeltay;w.lastdeltay=0,w.rail.drag||w.doScrollBy(e)},15)}return e.stopImmediatePropagation(),e.preventDefault()}var w=this;if(this.version="3.5.6",this.name="nicescroll",this.me=s,this.opt={doc:r("body"),win:!1},r.extend(this.opt,h),this.opt.snapbackspeed=80,e)for(var y in w.opt)void 0!==e[y]&&(w.opt[y]=e[y]);this.doc=w.opt.doc,this.iddoc=this.doc&&this.doc[0]&&this.doc[0].id||"",this.ispage=/^BODY|HTML/.test(w.opt.win?w.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=!1!==w.opt.win,this.win=w.opt.win||(this.ispage?r(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?r(window):this.win,this.body=r("body"),this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=w.opt.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.isrtlmode="auto"==this.opt.rtlmode?"rtl"==(this.win[0]==window?this.body:this.win).css("direction"):!0===this.opt.rtlmode,this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1;do{this.id="ascrail"+n++}while(document.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=w.opt.overflowx,this.overflowy=w.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=g();var b=r.extend({},this.detected);this.canhwscroll=b.hastransform&&w.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&w.haswrapper,this.istouchcapable=!1,b.cantouch&&b.iswebkit&&!b.isios&&!b.isandroid&&(this.istouchcapable=!0,b.cantouch=!1),b.cantouch&&b.ismozilla&&!b.isios&&!b.isandroid&&(this.istouchcapable=!0,b.cantouch=!1),w.opt.enablemouselockapi||(b.hasmousecapture=!1,b.haspointerlock=!1),this.delayed=function(e,t,o,i){var n=w.delaylist[e],a=(new Date).getTime();return!(!i&&n&&n.tt)&&(n&&n.tt&&clearTimeout(n.tt),void(n&&n.last+o>a&&!n.tt?w.delaylist[e]={last:a+o,tt:setTimeout(function(){w&&(w.delaylist[e].tt=0,t.call())},o)}:n&&n.tt||(w.delaylist[e]={last:a,tt:0},setTimeout(function(){t.call()},0))))},this.debounced=function(e,t,o){var i=w.delaylist[e];(new Date).getTime(),w.delaylist[e]=t,i||setTimeout(function(){var t=w.delaylist[e];w.delaylist[e]=!1,t.call()},o)};var k=!1;if(this.synched=function(e,t){return w.synclist[e]=t,k||(l(function(){for(e in k=!1,w.synclist){var t=w.synclist[e];t&&t.call(w),w.synclist[e]=!1}}),k=!0),e},this.unsynched=function(e){w.synclist[e]&&(w.synclist[e]=!1)},this.css=function(e,t){for(var o in t)w.saved.css.push([e,o,e.css(o)]),e.css(o,t[o])},this.scrollTop=function(e){return void 0===e?w.getScrollTop():w.setScrollTop(e)},this.scrollLeft=function(e){return void 0===e?w.getScrollLeft():w.setScrollLeft(e)},BezierClass=function(e,t,o,i,n,a,r){this.st=e,this.ed=t,this.spd=o,this.p1=i||0,this.p2=n||1,this.p3=a||0,this.p4=r||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st},BezierClass.prototype={B2:function(e){return 3*e*e*(1-e)},B3:function(e){return 3*e*(1-e)*(1-e)},B4:function(e){return(1-e)*(1-e)*(1-e)},getNow:function(){var e=1-((new Date).getTime()-this.ts)/this.spd,t=this.B2(e)+this.B3(e)+this.B4(e);return 0>e?this.ed:this.st+Math.round(this.df*t)},update:function(e,t){return this.st=this.getNow(),this.ed=e,this.spd=t,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},b.hastranslate3d&&b.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(e){if(!e){var t=u();if(t)return 16==t.length?-t[13]:-t[5];if(w.timerscroll&&w.timerscroll.bz)return w.timerscroll.bz.getNow()}return w.doc.translate.y},this.getScrollLeft=function(e){if(!e){var t=u();if(t)return 16==t.length?-t[12]:-t[4];if(w.timerscroll&&w.timerscroll.bh)return w.timerscroll.bh.getNow()}return w.doc.translate.x},this.notifyScrollEvent=document.createEvent?function(e){var t=document.createEvent("UIEvents");t.initUIEvent("scroll",!1,!0,window,1),e.dispatchEvent(t)}:document.fireEvent?function(e){var t=document.createEventObject();e.fireEvent("onscroll"),t.cancelBubble=!0}:function(){};var x=this.isrtlmode?1:-1;b.hastranslate3d&&w.opt.enabletranslate3d?(this.setScrollTop=function(e,t){w.doc.translate.y=e,w.doc.translate.ty=-1*e+"px",w.doc.css(b.trstyle,"translate3d("+w.doc.translate.tx+","+w.doc.translate.ty+",0px)"),t||w.notifyScrollEvent(w.win[0])},this.setScrollLeft=function(e,t){w.doc.translate.x=e,w.doc.translate.tx=e*x+"px",w.doc.css(b.trstyle,"translate3d("+w.doc.translate.tx+","+w.doc.translate.ty+",0px)"),t||w.notifyScrollEvent(w.win[0])}):(this.setScrollTop=function(e,t){w.doc.translate.y=e,w.doc.translate.ty=-1*e+"px",w.doc.css(b.trstyle,"translate("+w.doc.translate.tx+","+w.doc.translate.ty+")"),t||w.notifyScrollEvent(w.win[0])},this.setScrollLeft=function(e,t){w.doc.translate.x=e,w.doc.translate.tx=e*x+"px",w.doc.css(b.trstyle,"translate("+w.doc.translate.tx+","+w.doc.translate.ty+")"),t||w.notifyScrollEvent(w.win[0])})}else this.getScrollTop=function(){return w.docscroll.scrollTop()},this.setScrollTop=function(e){return w.docscroll.scrollTop(e)},this.getScrollLeft=function(){return w.detected.ismozilla&&w.isrtlmode?Math.abs(w.docscroll.scrollLeft()):w.docscroll.scrollLeft()},this.setScrollLeft=function(e){return w.docscroll.scrollLeft(w.detected.ismozilla&&w.isrtlmode?-e:e)};this.getTarget=function(e){return!!e&&(e.target?e.target:!!e.srcElement&&e.srcElement)},this.hasParent=function(e,t){if(!e)return!1;for(var o=e.target||e.srcElement||e||!1;o&&o.id!=t;)o=o.parentNode||!1;return!1!==o};var S={thin:1,medium:3,thick:5};this.getOffset=function(){if(w.isfixed)return{top:parseFloat(w.win.css("top")),left:parseFloat(w.win.css("left"))};if(!w.viewport)return w.win.offset();var e=w.win.offset(),t=w.viewport.offset();return{top:e.top-t.top+w.viewport.scrollTop(),left:e.left-t.left+w.viewport.scrollLeft()}},this.updateScrollBar=function(e){if(w.ishwscroll)w.rail.css({height:w.win.innerHeight()}),w.railh&&w.railh.css({width:w.win.innerWidth()});else{var t=w.getOffset();if((i={top:t.top,left:t.left}).top+=d(w.win,"border-top-width",!0),w.win.outerWidth(),w.win.innerWidth(),i.left+=w.rail.align?w.win.outerWidth()-d(w.win,"border-right-width")-w.rail.width:d(w.win,"border-left-width"),(o=w.opt.railoffset)&&(o.top&&(i.top+=o.top),w.rail.align&&o.left&&(i.left+=o.left)),w.locked||w.rail.css({top:i.top,left:i.left,height:e?e.h:w.win.innerHeight()}),w.zoom&&w.zoom.css({top:i.top+1,left:1==w.rail.align?i.left-20:i.left+w.rail.width+4}),w.railh&&!w.locked){var o,i={top:t.top,left:t.left};(o=w.opt.railhoffset)&&(o.top&&(i.top+=o.top),o.left&&(i.left+=o.left));var n=w.railh.align?i.top+d(w.win,"border-top-width",!0)+w.win.innerHeight()-w.railh.height:i.top+d(w.win,"border-top-width",!0),a=i.left+d(w.win,"border-left-width");w.railh.css({top:n,left:a,width:w.railh.width})}}},this.doRailClick=function(e,t,o){var i,n,a,r;w.locked||(w.cancelEvent(e),t?(i=o?w.doScrollLeft:w.doScrollTop)(a=o?(e.pageX-w.railh.offset().left-w.cursorwidth/2)*w.scrollratio.x:(e.pageY-w.rail.offset().top-w.cursorheight/2)*w.scrollratio.y):(i=o?w.doScrollLeftBy:w.doScrollBy,a=o?w.scroll.x:w.scroll.y,r=o?e.pageX-w.railh.offset().left:e.pageY-w.rail.offset().top,n=o?w.view.w:w.view.h,i(a>=r?n:-n)))},w.hasanimationframe=l,w.hascancelanimationframe=c,w.hasanimationframe?w.hascancelanimationframe||(c=function(){w.cancelAnimationFrame=!0}):(l=function(e){return setTimeout(e,15-Math.floor(+new Date/1e3)%16)},c=clearInterval),this.init=function(){function e(){w.iframexd=!1;try{var e="contentDocument"in this?this.contentDocument:this.contentWindow.document;e.domain}catch(t){w.iframexd=!0,e=!1}if(w.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;if(w.forcescreen=!0,w.isiframe&&(w.iframe={doc:r(e),html:w.doc.contents().find("html")[0],body:w.doc.contents().find("body")[0]},w.getContentSize=function(){return{w:Math.max(w.iframe.html.scrollWidth,w.iframe.body.scrollWidth),h:Math.max(w.iframe.html.scrollHeight,w.iframe.body.scrollHeight)}},w.docscroll=r(w.iframe.body)),!b.isios&&w.opt.iframeautoresize&&!w.isiframe){w.win.scrollTop(0),w.doc.height("");var t=Math.max(e.getElementsByTagName("html")[0].scrollHeight,e.body.scrollHeight);w.doc.height(t)}w.lazyResize(30),b.isie7&&w.css(r(w.iframe.html),{"overflow-y":"hidden"}),w.css(r(w.iframe.body),{"overflow-y":"hidden"}),b.isios&&w.haswrapper&&w.css(r(e.body),{"-webkit-transform":"translate3d(0,0,0)"}),"contentWindow"in this?w.bind(this.contentWindow,"scroll",w.onscroll):w.bind(e,"scroll",w.onscroll),w.opt.enablemousewheel&&w.bind(e,"mousewheel",w.onmousewheel),w.opt.enablekeyboard&&w.bind(e,b.isopera?"keypress":"keydown",w.onkeypress),(b.cantouch||w.opt.touchbehavior)&&(w.bind(e,"mousedown",w.ontouchstart),w.bind(e,"mousemove",function(e){w.ontouchmove(e,!0)}),w.opt.grabcursorenabled&&b.cursorgrabvalue&&w.css(r(e.body),{cursor:b.cursorgrabvalue})),w.bind(e,"mouseup",w.ontouchend),w.zoom&&(w.opt.dblclickzoom&&w.bind(e,"dblclick",w.doZoom),w.ongesturezoom&&w.bind(e,"gestureend",w.ongesturezoom))}if(w.saved.css=[],b.isie7mobile)return!0;if(b.isoperamini)return!0;if(b.hasmstouch&&w.css(w.ispage?r("html"):w.win,{"-ms-touch-action":"none"}),w.zindex="auto",w.zindex=w.ispage||"auto"!=w.opt.zindex?w.opt.zindex:function(){var e=w.win;if("zIndex"in e)return e.zIndex();for(;e.length>0;){if(9==e[0].nodeType)return!1;var t=e.css("zIndex");if(!isNaN(t)&&0!=t)return parseInt(t);e=e.parent()}return!1}()||"auto",w.ispage||"auto"==w.zindex||w.zindex>a&&(a=w.zindex),w.isie&&0==w.zindex&&"auto"==w.opt.zindex&&(w.zindex="auto"),!w.ispage||!b.cantouch&&!b.isieold&&!b.isie9mobile){var n=w.docscroll;w.ispage&&(n=w.haswrapper?w.win:w.doc),b.isie9mobile||w.css(n,{"overflow-y":"hidden"}),w.ispage&&b.isie7&&("BODY"==w.doc[0].nodeName?w.css(r("html"),{"overflow-y":"hidden"}):"HTML"==w.doc[0].nodeName&&w.css(r("body"),{"overflow-y":"hidden"})),!b.isios||w.ispage||w.haswrapper||w.css(r("body"),{"-webkit-overflow-scrolling":"touch"}),(f=r(document.createElement("div"))).css({position:"relative",top:0,float:"right",width:w.opt.cursorwidth,height:"0px","background-color":w.opt.cursorcolor,border:w.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":w.opt.cursorborderradius,"-moz-border-radius":w.opt.cursorborderradius,"border-radius":w.opt.cursorborderradius}),f.hborder=parseFloat(f.outerHeight()-f.innerHeight()),w.cursor=f;var s=r(document.createElement("div"));s.attr("id",w.id),s.addClass("nicescroll-rails");var l,c,u=["left","right"];for(var d in u)c=u[d],(l=w.opt.railpadding[c])?s.css("padding-"+c,l+"px"):w.opt.railpadding[c]=0;s.append(f),s.width=Math.max(parseFloat(w.opt.cursorwidth),f.outerWidth())+w.opt.railpadding.left+w.opt.railpadding.right,s.css({width:s.width+"px",zIndex:w.zindex,background:w.opt.background,cursor:"default"}),s.visibility=!0,s.scrollable=!0,s.align="left"==w.opt.railalign?0:1,w.rail=s,w.rail.drag=!1;var h=!1;if(!w.opt.boxzoom||w.ispage||b.isieold||(h=document.createElement("div"),w.bind(h,"click",w.doZoom),w.zoom=r(h),w.zoom.css({cursor:"pointer","z-index":w.zindex,backgroundImage:"url("+w.opt.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),w.opt.dblclickzoom&&w.bind(w.win,"dblclick",w.doZoom),b.cantouch&&w.opt.gesturezoom&&(w.ongesturezoom=function(e){return e.scale>1.5&&w.doZoomIn(e),e.scale<.8&&w.doZoomOut(e),w.cancelEvent(e)},w.bind(w.win,"gestureend",w.ongesturezoom))),w.railh=!1,w.opt.horizrailenabled){var f;w.css(n,{"overflow-x":"hidden"}),(f=r(document.createElement("div"))).css({position:"absolute",top:0,height:w.opt.cursorwidth,width:"0px","background-color":w.opt.cursorcolor,border:w.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":w.opt.cursorborderradius,"-moz-border-radius":w.opt.cursorborderradius,"border-radius":w.opt.cursorborderradius}),f.wborder=parseFloat(f.outerWidth()-f.innerWidth()),w.cursorh=f;var g=r(document.createElement("div"));g.attr("id",w.id+"-hr"),g.addClass("nicescroll-rails"),g.height=Math.max(parseFloat(w.opt.cursorwidth),f.outerHeight()),g.css({height:g.height+"px",zIndex:w.zindex,background:w.opt.background}),g.append(f),g.visibility=!0,g.scrollable=!0,g.align="top"==w.opt.railvalign?0:1,w.railh=g,w.railh.drag=!1}if(w.ispage)s.css({position:"fixed",top:"0px",height:"100%"}),s.css(s.align?{right:"0px"}:{left:"0px"}),w.body.append(s),w.railh&&(g.css({position:"fixed",left:"0px",width:"100%"}),g.css(g.align?{bottom:"0px"}:{top:"0px"}),w.body.append(g));else{if(w.ishwscroll){"static"==w.win.css("position")&&w.css(w.win,{position:"relative"});var m="HTML"==w.win[0].nodeName?w.body:w.win;w.zoom&&(w.zoom.css({position:"absolute",top:1,right:0,"margin-right":s.width+4}),m.append(w.zoom)),s.css({position:"absolute",top:0}),s.css(s.align?{right:0}:{left:0}),m.append(s),g&&(g.css({position:"absolute",left:0,bottom:0}),g.css(g.align?{bottom:0}:{top:0}),m.append(g))}else{w.isfixed="fixed"==w.win.css("position");var y=w.isfixed?"fixed":"absolute";w.isfixed||(w.viewport=w.getViewport(w.win[0])),w.viewport&&(w.body=w.viewport,0==/fixed|relative|absolute/.test(w.viewport.css("position"))&&w.css(w.viewport,{position:"relative"})),s.css({position:y}),w.zoom&&w.zoom.css({position:y}),w.updateScrollBar(),w.body.append(s),w.zoom&&w.body.append(w.zoom),w.railh&&(g.css({position:y}),w.body.append(g))}b.isios&&w.css(w.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),b.isie&&w.opt.disableoutline&&w.win.attr("hideFocus","true"),b.iswebkit&&w.opt.disableoutline&&w.win.css({outline:"none"})}if(!1===w.opt.autohidemode?(w.autohidedom=!1,w.rail.css({opacity:w.opt.cursoropacitymax}),w.railh&&w.railh.css({opacity:w.opt.cursoropacitymax})):!0===w.opt.autohidemode||"leave"===w.opt.autohidemode?(w.autohidedom=r().add(w.rail),b.isie8&&(w.autohidedom=w.autohidedom.add(w.cursor)),w.railh&&(w.autohidedom=w.autohidedom.add(w.railh)),w.railh&&b.isie8&&(w.autohidedom=w.autohidedom.add(w.cursorh))):"scroll"==w.opt.autohidemode?(w.autohidedom=r().add(w.rail),w.railh&&(w.autohidedom=w.autohidedom.add(w.railh))):"cursor"==w.opt.autohidemode?(w.autohidedom=r().add(w.cursor),w.railh&&(w.autohidedom=w.autohidedom.add(w.cursorh))):"hidden"==w.opt.autohidemode&&(w.autohidedom=!1,w.hide(),w.locked=!1),b.isie9mobile){w.scrollmom=new v(w),w.onmangotouch=function(){var e=w.getScrollTop(),t=w.getScrollLeft();if(e==w.scrollmom.lastscrolly&&t==w.scrollmom.lastscrollx)return!0;var o=e-w.mangotouch.sy,i=t-w.mangotouch.sx;if(0!=Math.round(Math.sqrt(Math.pow(i,2)+Math.pow(o,2)))){var n=0>o?-1:1,a=0>i?-1:1,r=+new Date;if(w.mangotouch.lazy&&clearTimeout(w.mangotouch.lazy),r-w.mangotouch.tm>80||w.mangotouch.dry!=n||w.mangotouch.drx!=a)w.scrollmom.stop(),w.scrollmom.reset(t,e),w.mangotouch.sy=e,w.mangotouch.ly=e,w.mangotouch.sx=t,w.mangotouch.lx=t,w.mangotouch.dry=n,w.mangotouch.drx=a,w.mangotouch.tm=r;else{w.scrollmom.stop(),w.scrollmom.update(w.mangotouch.sx-i,w.mangotouch.sy-o),w.mangotouch.tm,w.mangotouch.tm=r;var s=Math.max(Math.abs(w.mangotouch.ly-e),Math.abs(w.mangotouch.lx-t));w.mangotouch.ly=e,w.mangotouch.lx=t,s>2&&(w.mangotouch.lazy=setTimeout(function(){w.mangotouch.lazy=!1,w.mangotouch.dry=0,w.mangotouch.drx=0,w.mangotouch.tm=0,w.scrollmom.doMomentum(30)},100))}}};var k=w.getScrollTop(),x=w.getScrollLeft();w.mangotouch={sy:k,ly:k,dry:0,sx:x,lx:x,drx:0,lazy:!1,tm:0},w.bind(w.docscroll,"scroll",w.onmangotouch)}else{if(b.cantouch||w.istouchcapable||w.opt.touchbehavior||b.hasmstouch){w.scrollmom=new v(w),w.ontouchstart=function(e){if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(w.hasmoving=!1,!w.locked){if(b.hasmstouch)for(var t=!!e.target&&e.target;t;){var o=r(t).getNiceScroll();if(o.length>0&&o[0].me==w.me)break;if(o.length>0)return!1;if("DIV"==t.nodeName&&t.id==w.id)break;t=!!t.parentNode&&t.parentNode}if(w.cancelScroll(),t=w.getTarget(e))if(/INPUT/i.test(t.nodeName)&&/range/i.test(t.type))return w.stopPropagation(e);if(!("clientX"in e)&&"changedTouches"in e&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),w.forcescreen){var i=e;(e={original:e.original?e.original:e}).clientX=i.screenX,e.clientY=i.screenY}if(w.rail.drag={x:e.clientX,y:e.clientY,sx:w.scroll.x,sy:w.scroll.y,st:w.getScrollTop(),sl:w.getScrollLeft(),pt:2,dl:!1},w.ispage||!w.opt.directionlockdeadzone)w.rail.drag.dl="f";else{var n={w:r(window).width(),h:r(window).height()},a={w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},s=Math.max(0,a.h-n.h),l=Math.max(0,a.w-n.w);w.rail.drag.ck=!w.rail.scrollable&&w.railh.scrollable?s>0&&"v":!!(w.rail.scrollable&&!w.railh.scrollable&&l>0)&&"h",w.rail.drag.ck||(w.rail.drag.dl="f")}if(w.opt.touchbehavior&&w.isiframe&&b.isie){var c=w.win.position();w.rail.drag.x+=c.left,w.rail.drag.y+=c.top}if(w.hasmoving=!1,w.lastmouseup=!1,w.scrollmom.reset(e.clientX,e.clientY),!b.cantouch&&!this.istouchcapable&&!b.hasmstouch){if(!(!!t&&/INPUT|SELECT|TEXTAREA/i.test(t.nodeName)))return!w.ispage&&b.hasmousecapture&&t.setCapture(),w.opt.touchbehavior?(t.onclick&&!t._onclick&&(t._onclick=t.onclick,t.onclick=function(e){return!w.hasmoving&&void t._onclick.call(this,e)}),w.cancelEvent(e)):w.stopPropagation(e);/SUBMIT|CANCEL|BUTTON/i.test(r(t).attr("type"))&&(pc={tg:t,click:!1},w.preventclick=pc)}}},w.ontouchend=function(e){return(!e.pointerType||2==e.pointerType||"touch"==e.pointerType)&&(w.rail.drag&&2==w.rail.drag.pt&&(w.scrollmom.doMomentum(),w.rail.drag=!1,w.hasmoving&&(w.lastmouseup=!0,w.hideCursor(),b.hasmousecapture&&document.releaseCapture(),!b.cantouch))?w.cancelEvent(e):void 0)};var S=w.opt.touchbehavior&&w.isiframe&&!b.hasmousecapture;w.ontouchmove=function(e,t){if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(w.rail.drag&&2==w.rail.drag.pt){if(b.cantouch&&void 0===e.original)return!0;if(w.hasmoving=!0,w.preventclick&&!w.preventclick.click&&(w.preventclick.click=w.preventclick.tg.onclick||!1,w.preventclick.tg.onclick=w.onpreventclick),"changedTouches"in(e=r.extend({original:e},e))&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),w.forcescreen){var o=e;(e={original:e.original?e.original:e}).clientX=o.screenX,e.clientY=o.screenY}var i=ofy=0;if(S&&!t){var n=w.win.position();i=-n.left,ofy=-n.top}var a=e.clientY+ofy,s=a-w.rail.drag.y,l=e.clientX+i,c=l-w.rail.drag.x,u=w.rail.drag.st-s;if(w.ishwscroll&&w.opt.bouncescroll?0>u?u=Math.round(u/2):u>w.page.maxh&&(u=w.page.maxh+Math.round((u-w.page.maxh)/2)):(0>u&&(u=0,a=0),u>w.page.maxh&&(u=w.page.maxh,a=0)),w.railh&&w.railh.scrollable){var d=w.isrtlmode?c-w.rail.drag.sl:w.rail.drag.sl-c;w.ishwscroll&&w.opt.bouncescroll?0>d?d=Math.round(d/2):d>w.page.maxw&&(d=w.page.maxw+Math.round((d-w.page.maxw)/2)):(0>d&&(d=0,l=0),d>w.page.maxw&&(d=w.page.maxw,l=0))}var p=!1;if(w.rail.drag.dl)p=!0,"v"==w.rail.drag.dl?d=w.rail.drag.sl:"h"==w.rail.drag.dl&&(u=w.rail.drag.st);else{var h=Math.abs(s),f=Math.abs(c),g=w.opt.directionlockdeadzone;if("v"==w.rail.drag.ck){if(h>g&&.3*h>=f)return w.rail.drag=!1,!0;f>g&&(w.rail.drag.dl="f",r("body").scrollTop(r("body").scrollTop()))}else if("h"==w.rail.drag.ck){if(f>g&&.3*f>=h)return w.rail.drag=!1,!0;h>g&&(w.rail.drag.dl="f",r("body").scrollLeft(r("body").scrollLeft()))}}if(w.synched("touchmove",function(){w.rail.drag&&2==w.rail.drag.pt&&(w.prepareTransition&&w.prepareTransition(0),w.rail.scrollable&&w.setScrollTop(u),w.scrollmom.update(l,a),w.railh&&w.railh.scrollable?(w.setScrollLeft(d),w.showCursor(u,d)):w.showCursor(u),b.isie10&&document.selection.clear())}),b.ischrome&&w.istouchcapable&&(p=!1),p)return w.cancelEvent(e)}}}w.onmousedown=function(e,t){if(!w.rail.drag||1==w.rail.drag.pt){if(w.locked)return w.cancelEvent(e);w.cancelScroll(),w.rail.drag={x:e.clientX,y:e.clientY,sx:w.scroll.x,sy:w.scroll.y,pt:1,hr:!!t};var o=w.getTarget(e);return!w.ispage&&b.hasmousecapture&&o.setCapture(),w.isiframe&&!b.hasmousecapture&&(w.saved.csspointerevents=w.doc.css("pointer-events"),w.css(w.doc,{"pointer-events":"none"})),w.hasmoving=!1,w.cancelEvent(e)}},w.onmouseup=function(e){if(w.rail.drag){if(b.hasmousecapture&&document.releaseCapture(),w.isiframe&&!b.hasmousecapture&&w.doc.css("pointer-events",w.saved.csspointerevents),1!=w.rail.drag.pt)return;return w.rail.drag=!1,w.hasmoving&&w.triggerScrollEnd(),w.cancelEvent(e)}},w.onmousemove=function(e){if(w.rail.drag){if(1!=w.rail.drag.pt)return;if(b.ischrome&&0==e.which)return w.onmouseup(e);if(w.cursorfreezed=!0,w.hasmoving=!0,w.rail.drag.hr){w.scroll.x=w.rail.drag.sx+(e.clientX-w.rail.drag.x),w.scroll.x<0&&(w.scroll.x=0);var t=w.scrollvaluemaxw;w.scroll.x>t&&(w.scroll.x=t)}else{w.scroll.y=w.rail.drag.sy+(e.clientY-w.rail.drag.y),w.scroll.y<0&&(w.scroll.y=0);var o=w.scrollvaluemax;w.scroll.y>o&&(w.scroll.y=o)}return w.synched("mousemove",function(){w.rail.drag&&1==w.rail.drag.pt&&(w.showCursor(),w.rail.drag.hr?w.doScrollLeft(Math.round(w.scroll.x*w.scrollratio.x),w.opt.cursordragspeed):w.doScrollTop(Math.round(w.scroll.y*w.scrollratio.y),w.opt.cursordragspeed))}),w.cancelEvent(e)}},b.cantouch||w.opt.touchbehavior?(w.onpreventclick=function(e){return w.preventclick?(w.preventclick.tg.onclick=w.preventclick.click,w.preventclick=!1,w.cancelEvent(e)):void 0},w.bind(w.win,"mousedown",w.ontouchstart),w.onclick=!b.isios&&function(e){return!w.lastmouseup||(w.lastmouseup=!1,w.cancelEvent(e))},w.opt.grabcursorenabled&&b.cursorgrabvalue&&(w.css(w.ispage?w.doc:w.win,{cursor:b.cursorgrabvalue}),w.css(w.rail,{cursor:b.cursorgrabvalue}))):(w.hasTextSelected="getSelection"in document?function(){return document.getSelection().rangeCount>0}:"selection"in document?function(){return"None"!=document.selection.type}:function(){return!1},w.onselectionstart=function(){w.ispage||(w.selectiondrag=w.win.offset())},w.onselectionend=function(){w.selectiondrag=!1},w.onselectiondrag=function(e){w.selectiondrag&&w.hasTextSelected()&&w.debounced("selectionscroll",function(){!function e(t){if(w.selectiondrag){if(t){var o=w.win.outerHeight(),i=t.pageY-w.selectiondrag.top;i>0&&o>i&&(i=0),i>=o&&(i-=o),w.selectiondrag.df=i}if(0!=w.selectiondrag.df){var n=2*-Math.floor(w.selectiondrag.df/6);w.doScrollBy(n),w.debounced("doselectionscroll",function(){e()},50)}}}(e)},250)}),b.hasmstouch&&(w.css(w.rail,{"-ms-touch-action":"none"}),w.css(w.cursor,{"-ms-touch-action":"none"}),w.bind(w.win,"MSPointerDown",w.ontouchstart),w.bind(document,"MSPointerUp",w.ontouchend),w.bind(document,"MSPointerMove",w.ontouchmove),w.bind(w.cursor,"MSGestureHold",function(e){e.preventDefault()}),w.bind(w.cursor,"contextmenu",function(e){e.preventDefault()})),this.istouchcapable&&(w.bind(w.win,"touchstart",w.ontouchstart),w.bind(document,"touchend",w.ontouchend),w.bind(document,"touchcancel",w.ontouchend),w.bind(document,"touchmove",w.ontouchmove)),w.bind(w.cursor,"mousedown",w.onmousedown),w.bind(w.cursor,"mouseup",w.onmouseup),w.railh&&(w.bind(w.cursorh,"mousedown",function(e){w.onmousedown(e,!0)}),w.bind(w.cursorh,"mouseup",w.onmouseup)),(w.opt.cursordragontouch||!b.cantouch&&!w.opt.touchbehavior)&&(w.rail.css({cursor:"default"}),w.railh&&w.railh.css({cursor:"default"}),w.jqbind(w.rail,"mouseenter",function(){return!!w.win.is(":visible")&&(w.canshowonmouseevent&&w.showCursor(),void(w.rail.active=!0))}),w.jqbind(w.rail,"mouseleave",function(){w.rail.active=!1,w.rail.drag||w.hideCursor()}),w.opt.sensitiverail&&(w.bind(w.rail,"click",function(e){w.doRailClick(e,!1,!1)}),w.bind(w.rail,"dblclick",function(e){w.doRailClick(e,!0,!1)}),w.bind(w.cursor,"click",function(e){w.cancelEvent(e)}),w.bind(w.cursor,"dblclick",function(e){w.cancelEvent(e)})),w.railh&&(w.jqbind(w.railh,"mouseenter",function(){return!!w.win.is(":visible")&&(w.canshowonmouseevent&&w.showCursor(),void(w.rail.active=!0))}),w.jqbind(w.railh,"mouseleave",function(){w.rail.active=!1,w.rail.drag||w.hideCursor()}),w.opt.sensitiverail&&(w.bind(w.railh,"click",function(e){w.doRailClick(e,!1,!0)}),w.bind(w.railh,"dblclick",function(e){w.doRailClick(e,!0,!0)}),w.bind(w.cursorh,"click",function(e){w.cancelEvent(e)}),w.bind(w.cursorh,"dblclick",function(e){w.cancelEvent(e)})))),b.cantouch||w.opt.touchbehavior?(w.bind(b.hasmousecapture?w.win:document,"mouseup",w.ontouchend),w.bind(document,"mousemove",w.ontouchmove),w.onclick&&w.bind(document,"click",w.onclick),w.opt.cursordragontouch&&(w.bind(w.cursor,"mousedown",w.onmousedown),w.bind(w.cursor,"mousemove",w.onmousemove),w.cursorh&&w.bind(w.cursorh,"mousedown",function(e){w.onmousedown(e,!0)}),w.cursorh&&w.bind(w.cursorh,"mousemove",w.onmousemove))):(w.bind(b.hasmousecapture?w.win:document,"mouseup",w.onmouseup),w.bind(document,"mousemove",w.onmousemove),w.onclick&&w.bind(document,"click",w.onclick),!w.ispage&&w.opt.enablescrollonselection&&(w.bind(w.win[0],"mousedown",w.onselectionstart),w.bind(document,"mouseup",w.onselectionend),w.bind(w.cursor,"mouseup",w.onselectionend),w.cursorh&&w.bind(w.cursorh,"mouseup",w.onselectionend),w.bind(document,"mousemove",w.onselectiondrag)),w.zoom&&(w.jqbind(w.zoom,"mouseenter",function(){w.canshowonmouseevent&&w.showCursor(),w.rail.active=!0}),w.jqbind(w.zoom,"mouseleave",function(){w.rail.active=!1,w.rail.drag||w.hideCursor()}))),w.opt.enablemousewheel&&(w.isiframe||w.bind(b.isie&&w.ispage?document:w.win,"mousewheel",w.onmousewheel),w.bind(w.rail,"mousewheel",w.onmousewheel),w.railh&&w.bind(w.railh,"mousewheel",w.onmousewheelhr)),w.ispage||b.cantouch||/HTML|^BODY/.test(w.win[0].nodeName)||(w.win.attr("tabindex")||w.win.attr({tabindex:i++}),w.jqbind(w.win,"focus",function(e){t=w.getTarget(e).id||!0,w.hasfocus=!0,w.canshowonmouseevent&&w.noticeCursor()}),w.jqbind(w.win,"blur",function(){t=!1,w.hasfocus=!1}),w.jqbind(w.win,"mouseenter",function(e){o=w.getTarget(e).id||!0,w.hasmousefocus=!0,w.canshowonmouseevent&&w.noticeCursor()}),w.jqbind(w.win,"mouseleave",function(){o=!1,w.hasmousefocus=!1,w.rail.drag||w.hideCursor()}))}if(w.onkeypress=function(e){if(w.locked&&0==w.page.maxh)return!0;e=e||window.e;var i=w.getTarget(e);if(i&&/INPUT|TEXTAREA|SELECT|OPTION/.test(i.nodeName)&&(!(i.getAttribute("type")||i.type||!1)||!/submit|button|cancel/i.tp))return!0;if(r(i).attr("contenteditable"))return!0;if(w.hasfocus||w.hasmousefocus&&!t||w.ispage&&!t&&!o){var n=e.keyCode;if(w.locked&&27!=n)return w.cancelEvent(e);var a=e.ctrlKey||!1,s=e.shiftKey||!1,l=!1;switch(n){case 38:case 63233:w.doScrollBy(72),l=!0;break;case 40:case 63235:w.doScrollBy(-72),l=!0;break;case 37:case 63232:w.railh&&(a?w.doScrollLeft(0):w.doScrollLeftBy(72),l=!0);break;case 39:case 63234:w.railh&&(a?w.doScrollLeft(w.page.maxw):w.doScrollLeftBy(-72),l=!0);break;case 33:case 63276:w.doScrollBy(w.view.h),l=!0;break;case 34:case 63277:w.doScrollBy(-w.view.h),l=!0;break;case 36:case 63273:w.railh&&a?w.doScrollPos(0,0):w.doScrollTo(0),l=!0;break;case 35:case 63275:w.railh&&a?w.doScrollPos(w.page.maxw,w.page.maxh):w.doScrollTo(w.page.maxh),l=!0;break;case 32:w.opt.spacebarenabled&&(w.doScrollBy(s?w.view.h:-w.view.h),l=!0);break;case 27:w.zoomactive&&(w.doZoom(),l=!0)}if(l)return w.cancelEvent(e)}},w.opt.enablekeyboard&&w.bind(document,b.isopera&&!b.isopera12?"keypress":"keydown",w.onkeypress),w.bind(document,"keydown",function(e){(e.ctrlKey||!1)&&(w.wheelprevented=!0)}),w.bind(document,"keyup",function(e){e.ctrlKey||!1||(w.wheelprevented=!1)}),w.bind(window,"resize",w.lazyResize),w.bind(window,"orientationchange",w.lazyResize),w.bind(window,"load",w.lazyResize),b.ischrome&&!w.ispage&&!w.haswrapper){var $=w.win.attr("style"),C=parseFloat(w.win.css("width"))+1;w.win.css("width",C),w.synched("chromefix",function(){w.win.attr("style",$)})}w.onAttributeChange=function(){w.lazyResize(250)},w.ispage||w.haswrapper||(!1!==p?(w.observer=new p(function(e){e.forEach(w.onAttributeChange)}),w.observer.observe(w.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),w.observerremover=new p(function(e){e.forEach(function(e){if(e.removedNodes.length>0)for(var t in e.removedNodes)if(e.removedNodes[t]==w.win[0])return w.remove()})}),w.observerremover.observe(w.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(w.bind(w.win,b.isie&&!b.isie9?"propertychange":"DOMAttrModified",w.onAttributeChange),b.isie9&&w.win[0].attachEvent("onpropertychange",w.onAttributeChange),w.bind(w.win,"DOMNodeRemoved",function(e){e.target==w.win[0]&&w.remove()}))),!w.ispage&&w.opt.boxzoom&&w.bind(window,"resize",w.resizeZoom),w.istextarea&&w.bind(w.win,"mouseup",w.lazyResize),w.lazyResize(30)}"IFRAME"==this.doc[0].nodeName&&(this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){e.call(w.doc[0],!1)},500),w.bind(this.doc,"load",e))},this.showCursor=function(e,t){w.cursortimeout&&(clearTimeout(w.cursortimeout),w.cursortimeout=0),w.rail&&(w.autohidedom&&(w.autohidedom.stop().css({opacity:w.opt.cursoropacitymax}),w.cursoractive=!0),w.rail.drag&&1==w.rail.drag.pt||(void 0!==e&&!1!==e&&(w.scroll.y=Math.round(1*e/w.scrollratio.y)),void 0!==t&&(w.scroll.x=Math.round(1*t/w.scrollratio.x))),w.cursor.css({height:w.cursorheight,top:w.scroll.y}),w.cursorh&&(w.cursorh.css(!w.rail.align&&w.rail.visibility?{width:w.cursorwidth,left:w.scroll.x+w.rail.width}:{width:w.cursorwidth,left:w.scroll.x}),w.cursoractive=!0),w.zoom&&w.zoom.stop().css({opacity:w.opt.cursoropacitymax}))},this.hideCursor=function(e){w.cursortimeout||w.rail&&w.autohidedom&&(w.hasmousefocus&&"leave"==w.opt.autohidemode||(w.cursortimeout=setTimeout(function(){w.rail.active&&w.showonmouseevent||(w.autohidedom.stop().animate({opacity:w.opt.cursoropacitymin}),w.zoom&&w.zoom.stop().animate({opacity:w.opt.cursoropacitymin}),w.cursoractive=!1),w.cursortimeout=0},e||w.opt.hidecursordelay)))},this.noticeCursor=function(e,t,o){w.showCursor(t,o),w.rail.active||w.hideCursor(e)},this.getContentSize=w.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:w.haswrapper?function(){return{w:w.doc.outerWidth()+parseInt(w.win.css("paddingLeft"))+parseInt(w.win.css("paddingRight")),h:w.doc.outerHeight()+parseInt(w.win.css("paddingTop"))+parseInt(w.win.css("paddingBottom"))}}:function(){return{w:w.docscroll[0].scrollWidth,h:w.docscroll[0].scrollHeight}},this.onResize=function(e,t){if(!w||!w.win)return!1;if(!w.haswrapper&&!w.ispage){if("none"==w.win.css("display"))return w.visibility&&w.hideRail().hideRailHr(),!1;w.hidden||w.visibility||w.showRail().showRailHr()}var o=w.page.maxh,i=w.page.maxw,n=(w.view.h,w.view.w);if(w.view={w:w.ispage?w.win.width():parseInt(w.win[0].clientWidth),h:w.ispage?w.win.height():parseInt(w.win[0].clientHeight)},w.page=t||w.getContentSize(),w.page.maxh=Math.max(0,w.page.h-w.view.h),w.page.maxw=Math.max(0,w.page.w-w.view.w),w.page.maxh==o&&w.page.maxw==i&&w.view.w==n){if(w.ispage)return w;var a=w.win.offset();if(w.lastposition){var r=w.lastposition;if(r.top==a.top&&r.left==a.left)return w}w.lastposition=a}return 0==w.page.maxh?(w.hideRail(),w.scrollvaluemax=0,w.scroll.y=0,w.scrollratio.y=0,w.cursorheight=0,w.setScrollTop(0),w.rail.scrollable=!1):w.rail.scrollable=!0,0==w.page.maxw?(w.hideRailHr(),w.scrollvaluemaxw=0,w.scroll.x=0,w.scrollratio.x=0,w.cursorwidth=0,w.setScrollLeft(0),w.railh.scrollable=!1):w.railh.scrollable=!0,w.locked=0==w.page.maxh&&0==w.page.maxw,w.locked?(w.ispage||w.updateScrollBar(w.view),!1):(w.hidden||w.visibility?w.hidden||w.railh.visibility||w.showRailHr():w.showRail().showRailHr(),w.istextarea&&w.win.css("resize")&&"none"!=w.win.css("resize")&&(w.view.h-=20),w.cursorheight=Math.min(w.view.h,Math.round(w.view.h*(w.view.h/w.page.h))),w.cursorheight=w.opt.cursorfixedheight?w.opt.cursorfixedheight:Math.max(w.opt.cursorminheight,w.cursorheight),w.cursorwidth=Math.min(w.view.w,Math.round(w.view.w*(w.view.w/w.page.w))),w.cursorwidth=w.opt.cursorfixedheight?w.opt.cursorfixedheight:Math.max(w.opt.cursorminheight,w.cursorwidth),w.scrollvaluemax=w.view.h-w.cursorheight-w.cursor.hborder,w.railh&&(w.railh.width=w.page.maxh>0?w.view.w-w.rail.width:w.view.w,w.scrollvaluemaxw=w.railh.width-w.cursorwidth-w.cursorh.wborder),w.ispage||w.updateScrollBar(w.view),w.scrollratio={x:w.page.maxw/w.scrollvaluemaxw,y:w.page.maxh/w.scrollvaluemax},w.getScrollTop()>w.page.maxh?w.doScrollTop(w.page.maxh):(w.scroll.y=Math.round(w.getScrollTop()*(1/w.scrollratio.y)),w.scroll.x=Math.round(w.getScrollLeft()*(1/w.scrollratio.x)),w.cursoractive&&w.noticeCursor()),w.scroll.y&&0==w.getScrollTop()&&w.doScrollTo(Math.floor(w.scroll.y*w.scrollratio.y)),w)},this.resize=w.onResize,this.lazyResize=function(e){return e=isNaN(e)?30:e,w.delayed("resize",w.resize,e),w},this._bind=function(e,t,o,i){w.events.push({e:e,n:t,f:o,b:i,q:!1}),e.addEventListener?e.addEventListener(t,o,i||!1):e.attachEvent?e.attachEvent("on"+t,o):e["on"+t]=o},this.jqbind=function(e,t,o){w.events.push({e:e,n:t,f:o,q:!0}),r(e).bind(t,o)},this.bind=function(e,t,o,i){var n="jquery"in e?e[0]:e;if("mousewheel"==t)if("onwheel"in document||document.documentMode>=9)w._bind(n,"wheel",o,i||!1);else{var a=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";f(n,a,o,i||!1),"DOMMouseScroll"==a&&f(n,"MozMousePixelScroll",o,i||!1)}else if(n.addEventListener){if(b.cantouch&&/mouseup|mousedown|mousemove/.test(t)){var r="mousedown"==t?"touchstart":"mouseup"==t?"touchend":"touchmove";w._bind(n,r,function(e){if(e.touches)e.touches.length<2&&((t=e.touches.length?e.touches[0]:e).original=e,o.call(this,t));else if(e.changedTouches){var t;(t=e.changedTouches[0]).original=e,o.call(this,t)}},i||!1)}w._bind(n,t,o,i||!1),b.cantouch&&"mouseup"==t&&w._bind(n,"touchcancel",o,i||!1)}else w._bind(n,t,function(e){return(e=e||window.event||!1)&&e.srcElement&&(e.target=e.srcElement),"pageY"in e||(e.pageX=e.clientX+document.documentElement.scrollLeft,e.pageY=e.clientY+document.documentElement.scrollTop),!1!==o.call(n,e)&&!1!==i||w.cancelEvent(e)})},this._unbind=function(e,t,o,i){e.removeEventListener?e.removeEventListener(t,o,i):e.detachEvent?e.detachEvent("on"+t,o):e["on"+t]=!1},this.unbindAll=function(){for(var e=0;e<w.events.length;e++){var t=w.events[e];t.q?t.e.unbind(t.n,t.f):w._unbind(t.e,t.n,t.f,t.b)}},this.cancelEvent=function(e){return!!(e=e.original?e.original:e||(window.event||!1))&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventManipulation&&e.preventManipulation(),e.cancelBubble=!0,e.cancel=!0,e.returnValue=!1,!1)},this.stopPropagation=function(e){return!!(e=e.original?e.original:e||(window.event||!1))&&(e.stopPropagation?e.stopPropagation():(e.cancelBubble&&(e.cancelBubble=!0),!1))},this.showRail=function(){return 0==w.page.maxh||!w.ispage&&"none"==w.win.css("display")||(w.visibility=!0,w.rail.visibility=!0,w.rail.css("display","block")),w},this.showRailHr=function(){return w.railh?(0==w.page.maxw||!w.ispage&&"none"==w.win.css("display")||(w.railh.visibility=!0,w.railh.css("display","block")),w):w},this.hideRail=function(){return w.visibility=!1,w.rail.visibility=!1,w.rail.css("display","none"),w},this.hideRailHr=function(){return w.railh?(w.railh.visibility=!1,w.railh.css("display","none"),w):w},this.show=function(){return w.hidden=!1,w.locked=!1,w.showRail().showRailHr()},this.hide=function(){return w.hidden=!0,w.locked=!0,w.hideRail().hideRailHr()},this.toggle=function(){return w.hidden?w.show():w.hide()},this.remove=function(){w.stop(),w.cursortimeout&&clearTimeout(w.cursortimeout),w.doZoomOut(),w.unbindAll(),b.isie9&&w.win[0].detachEvent("onpropertychange",w.onAttributeChange),!1!==w.observer&&w.observer.disconnect(),!1!==w.observerremover&&w.observerremover.disconnect(),w.events=null,w.cursor&&w.cursor.remove(),w.cursorh&&w.cursorh.remove(),w.rail&&w.rail.remove(),w.railh&&w.railh.remove(),w.zoom&&w.zoom.remove();for(var e=0;e<w.saved.css.length;e++){var t=w.saved.css[e];t[0].css(t[1],void 0===t[2]?"":t[2])}w.saved=!1,w.me.data("__nicescroll","");var o=r.nicescroll;for(var i in o.each(function(e){if(this&&this.id===w.id){delete o[e];for(var t=++e;t<o.length;t++,e++)o[e]=o[t];o.length--,o.length&&delete o[o.length]}}),w)w[i]=null,delete w[i];w=null},this.scrollstart=function(e){return this.onscrollstart=e,w},this.scrollend=function(e){return this.onscrollend=e,w},this.scrollcancel=function(e){return this.onscrollcancel=e,w},this.zoomin=function(e){return this.onzoomin=e,w},this.zoomout=function(e){return this.onzoomout=e,w},this.isScrollable=function(e){var t=e.target?e.target:e;if("OPTION"==t.nodeName)return!0;for(;t&&1==t.nodeType&&!/^BODY|HTML/.test(t.nodeName);){var o=r(t),i=o.css("overflowY")||o.css("overflowX")||o.css("overflow")||"";if(/scroll|auto/.test(i))return t.clientHeight!=t.scrollHeight;t=!!t.parentNode&&t.parentNode}return!1},this.getViewport=function(e){for(var t=!(!e||!e.parentNode)&&e.parentNode;t&&1==t.nodeType&&!/^BODY|HTML/.test(t.nodeName);){var o=r(t);if(/fixed|absolute/.test(o.css("position")))return o;var i=o.css("overflowY")||o.css("overflowX")||o.css("overflow")||"";if(/scroll|auto/.test(i)&&t.clientHeight!=t.scrollHeight)return o;if(o.getNiceScroll().length>0)return o;t=!!t.parentNode&&t.parentNode}return!!t&&r(t)},this.triggerScrollEnd=function(){if(w.onscrollend){var e=w.getScrollLeft(),t=w.getScrollTop(),o={type:"scrollend",current:{x:e,y:t},end:{x:e,y:t}};w.onscrollend.call(w,o)}},this.onmousewheel=function(e){if(!w.wheelprevented){if(w.locked)return w.debounced("checkunlock",w.resize,250),!0;if(w.rail.drag)return w.cancelEvent(e);if("auto"==w.opt.oneaxismousemode&&0!=e.deltaX&&(w.opt.oneaxismousemode=!1),w.opt.oneaxismousemode&&0==e.deltaX&&!w.rail.scrollable)return!w.railh||!w.railh.scrollable||w.onmousewheelhr(e);var t=+new Date,o=!1;if(w.opt.preservenativescrolling&&w.checkarea+600<t&&(w.nativescrollingarea=w.isScrollable(e),o=!0),w.checkarea=t,w.nativescrollingarea)return!0;var i=m(e,!1,o);return i&&(w.checkarea=0),i}},this.onmousewheelhr=function(e){if(!w.wheelprevented){if(w.locked||!w.railh.scrollable)return!0;if(w.rail.drag)return w.cancelEvent(e);var t=+new Date,o=!1;return w.opt.preservenativescrolling&&w.checkarea+600<t&&(w.nativescrollingarea=w.isScrollable(e),o=!0),w.checkarea=t,!!w.nativescrollingarea||(w.locked?w.cancelEvent(e):m(e,!0,o))}},this.stop=function(){return w.cancelScroll(),w.scrollmon&&w.scrollmon.stop(),w.cursorfreezed=!1,w.scroll.y=Math.round(w.getScrollTop()*(1/w.scrollratio.y)),w.noticeCursor(),w},this.getTransitionSpeed=function(e){var t=Math.round(10*w.opt.scrollspeed),o=Math.min(t,Math.round(e/20*w.opt.scrollspeed));return o>20?o:0},w.opt.smoothscroll?w.ishwscroll&&b.hastransition&&w.opt.usetransition?(this.prepareTransition=function(e,t){var o=t?e>20?e:0:w.getTransitionSpeed(e),i=o?b.prefixstyle+"transform "+o+"ms ease-out":"";return w.lasttransitionstyle&&w.lasttransitionstyle==i||(w.lasttransitionstyle=i,w.doc.css(b.transitionstyle,i)),o},this.doScrollLeft=function(e,t){var o=w.scrollrunning?w.newscrolly:w.getScrollTop();w.doScrollPos(e,o,t)},this.doScrollTop=function(e,t){var o=w.scrollrunning?w.newscrollx:w.getScrollLeft();w.doScrollPos(o,e,t)},this.doScrollPos=function(e,t,o){var i=w.getScrollTop(),n=w.getScrollLeft();return((w.newscrolly-i)*(t-i)<0||(w.newscrollx-n)*(e-n)<0)&&w.cancelScroll(),0==w.opt.bouncescroll&&(0>t?t=0:t>w.page.maxh&&(t=w.page.maxh),0>e?e=0:e>w.page.maxw&&(e=w.page.maxw)),(!w.scrollrunning||e!=w.newscrollx||t!=w.newscrolly)&&(w.newscrolly=t,w.newscrollx=e,w.newscrollspeed=o||!1,!w.timer&&void(w.timer=setTimeout(function(){var o=w.getScrollTop(),i=w.getScrollLeft(),n={};n.x=e-i,n.y=t-o,n.px=i,n.py=o;var a=Math.round(Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))),r=w.newscrollspeed&&w.newscrollspeed>1?w.newscrollspeed:w.getTransitionSpeed(a);if(w.newscrollspeed&&w.newscrollspeed<=1&&(r*=w.newscrollspeed),w.prepareTransition(r,!0),w.timerscroll&&w.timerscroll.tm&&clearInterval(w.timerscroll.tm),r>0){if(!w.scrollrunning&&w.onscrollstart){var s={type:"scrollstart",current:{x:i,y:o},request:{x:e,y:t},end:{x:w.newscrollx,y:w.newscrolly},speed:r};w.onscrollstart.call(w,s)}b.transitionend?w.scrollendtrapped||(w.scrollendtrapped=!0,w.bind(w.doc,b.transitionend,w.onScrollTransitionEnd,!1)):(w.scrollendtrapped&&clearTimeout(w.scrollendtrapped),w.scrollendtrapped=setTimeout(w.onScrollTransitionEnd,r));var l=o,c=i;w.timerscroll={bz:new BezierClass(l,w.newscrolly,r,0,0,.58,1),bh:new BezierClass(c,w.newscrollx,r,0,0,.58,1)},w.cursorfreezed||(w.timerscroll.tm=setInterval(function(){w.showCursor(w.getScrollTop(),w.getScrollLeft())},60))}w.synched("doScroll-set",function(){w.timer=0,w.scrollendtrapped&&(w.scrollrunning=!0),w.setScrollTop(w.newscrolly),w.setScrollLeft(w.newscrollx),w.scrollendtrapped||w.onScrollTransitionEnd()})},50)))},this.cancelScroll=function(){if(!w.scrollendtrapped)return!0;var e=w.getScrollTop(),t=w.getScrollLeft();return w.scrollrunning=!1,b.transitionend||clearTimeout(b.transitionend),w.scrollendtrapped=!1,w._unbind(w.doc,b.transitionend,w.onScrollTransitionEnd),w.prepareTransition(0),w.setScrollTop(e),w.railh&&w.setScrollLeft(t),w.timerscroll&&w.timerscroll.tm&&clearInterval(w.timerscroll.tm),w.timerscroll=!1,w.cursorfreezed=!1,w.showCursor(e,t),w},this.onScrollTransitionEnd=function(){w.scrollendtrapped&&w._unbind(w.doc,b.transitionend,w.onScrollTransitionEnd),w.scrollendtrapped=!1,w.prepareTransition(0),w.timerscroll&&w.timerscroll.tm&&clearInterval(w.timerscroll.tm),w.timerscroll=!1;var e=w.getScrollTop(),t=w.getScrollLeft();return w.setScrollTop(e),w.railh&&w.setScrollLeft(t),w.noticeCursor(!1,e,t),w.cursorfreezed=!1,0>e?e=0:e>w.page.maxh&&(e=w.page.maxh),0>t?t=0:t>w.page.maxw&&(t=w.page.maxw),e!=w.newscrolly||t!=w.newscrollx?w.doScrollPos(t,e,w.opt.snapbackspeed):(w.onscrollend&&w.scrollrunning&&w.triggerScrollEnd(),void(w.scrollrunning=!1))}):(this.doScrollLeft=function(e,t){var o=w.scrollrunning?w.newscrolly:w.getScrollTop();w.doScrollPos(e,o,t)},this.doScrollTop=function(e,t){var o=w.scrollrunning?w.newscrollx:w.getScrollLeft();w.doScrollPos(o,e,t)},this.doScrollPos=function(e,t,o){t=void 0===t||!1===t?w.getScrollTop(!0):t;if(w.timer&&w.newscrolly==t&&w.newscrollx==e)return!0;w.timer&&c(w.timer),w.timer=0;var i=w.getScrollTop(),n=w.getScrollLeft();((w.newscrolly-i)*(t-i)<0||(w.newscrollx-n)*(e-n)<0)&&w.cancelScroll(),w.newscrolly=t,w.newscrollx=e,w.bouncescroll&&w.rail.visibility||(w.newscrolly<0?w.newscrolly=0:w.newscrolly>w.page.maxh&&(w.newscrolly=w.page.maxh)),w.bouncescroll&&w.railh.visibility||(w.newscrollx<0?w.newscrollx=0:w.newscrollx>w.page.maxw&&(w.newscrollx=w.page.maxw)),w.dst={},w.dst.x=e-n,w.dst.y=t-i,w.dst.px=n,w.dst.py=i;var a=Math.round(Math.sqrt(Math.pow(w.dst.x,2)+Math.pow(w.dst.y,2)));w.dst.ax=w.dst.x/a,w.dst.ay=w.dst.y/a;var r=0,s=a;0==w.dst.x?(r=i,s=t,w.dst.ay=1,w.dst.py=0):0==w.dst.y&&(r=n,s=e,w.dst.ax=1,w.dst.px=0);var u=w.getTransitionSpeed(a);if(o&&1>=o&&(u*=o),w.bzscroll=u>0&&(w.bzscroll?w.bzscroll.update(s,u):new BezierClass(r,s,u,0,1,0,1)),!w.timer){(i==w.page.maxh&&t>=w.page.maxh||n==w.page.maxw&&e>=w.page.maxw)&&w.checkContentSize();var d=1;if(w.cancelAnimationFrame=!1,w.timer=1,w.onscrollstart&&!w.scrollrunning){var p={type:"scrollstart",current:{x:n,y:i},request:{x:e,y:t},end:{x:w.newscrollx,y:w.newscrolly},speed:u};w.onscrollstart.call(w,p)}(function e(){if(w.cancelAnimationFrame)return!0;if(w.scrollrunning=!0,d=1-d)return w.timer=l(e)||1;var t=0,o=sy=w.getScrollTop();w.dst.ay?((0>(i=(o=w.bzscroll?w.dst.py+w.bzscroll.getNow()*w.dst.ay:w.newscrolly)-sy)&&o<w.newscrolly||i>0&&o>w.newscrolly)&&(o=w.newscrolly),w.setScrollTop(o),o==w.newscrolly&&(t=1)):t=1;var i,n=sx=w.getScrollLeft();w.dst.ax?((0>(i=(n=w.bzscroll?w.dst.px+w.bzscroll.getNow()*w.dst.ax:w.newscrollx)-sx)&&n<w.newscrollx||i>0&&n>w.newscrollx)&&(n=w.newscrollx),w.setScrollLeft(n),n==w.newscrollx&&(t+=1)):t+=1;2==t?(w.timer=0,w.cursorfreezed=!1,w.bzscroll=!1,w.scrollrunning=!1,0>o?o=0:o>w.page.maxh&&(o=w.page.maxh),0>n?n=0:n>w.page.maxw&&(n=w.page.maxw),n!=w.newscrollx||o!=w.newscrolly?w.doScrollPos(n,o):w.onscrollend&&w.triggerScrollEnd()):w.timer=l(e)||1})(),(i==w.page.maxh&&t>=i||n==w.page.maxw&&e>=n)&&w.checkContentSize(),w.noticeCursor()}},this.cancelScroll=function(){return w.timer&&c(w.timer),w.timer=0,w.bzscroll=!1,w.scrollrunning=!1,w}):(this.doScrollLeft=function(e,t){var o=w.getScrollTop();w.doScrollPos(e,o,t)},this.doScrollTop=function(e,t){var o=w.getScrollLeft();w.doScrollPos(o,e,t)},this.doScrollPos=function(e,t){var o=e>w.page.maxw?w.page.maxw:e;0>o&&(o=0);var i=t>w.page.maxh?w.page.maxh:t;0>i&&(i=0),w.synched("scroll",function(){w.setScrollTop(i),w.setScrollLeft(o)})},this.cancelScroll=function(){}),this.doScrollBy=function(e,t){var o=0;t?o=Math.floor((w.scroll.y-e)*w.scrollratio.y):o=(w.timer?w.newscrolly:w.getScrollTop(!0))-e;if(w.bouncescroll){var i=Math.round(w.view.h/2);-i>o?o=-i:o>w.page.maxh+i&&(o=w.page.maxh+i)}return w.cursorfreezed=!1,py=w.getScrollTop(!0),0>o&&0>=py?w.noticeCursor():o>w.page.maxh&&py>=w.page.maxh?(w.checkContentSize(),w.noticeCursor()):void w.doScrollTop(o)},this.doScrollLeftBy=function(e,t){var o=0;t?o=Math.floor((w.scroll.x-e)*w.scrollratio.x):o=(w.timer?w.newscrollx:w.getScrollLeft(!0))-e;if(w.bouncescroll){var i=Math.round(w.view.w/2);-i>o?o=-i:o>w.page.maxw+i&&(o=w.page.maxw+i)}return w.cursorfreezed=!1,px=w.getScrollLeft(!0),0>o&&0>=px?w.noticeCursor():o>w.page.maxw&&px>=w.page.maxw?w.noticeCursor():void w.doScrollLeft(o)},this.doScrollTo=function(e,t){var o=t?Math.round(e*w.scrollratio.y):e;0>o?o=0:o>w.page.maxh&&(o=w.page.maxh),w.cursorfreezed=!1,w.doScrollTop(e)},this.checkContentSize=function(){var e=w.getContentSize();(e.h!=w.page.h||e.w!=w.page.w)&&w.resize(!1,e)},w.onscroll=function(){w.rail.drag||w.cursorfreezed||w.synched("scroll",function(){w.scroll.y=Math.round(w.getScrollTop()*(1/w.scrollratio.y)),w.railh&&(w.scroll.x=Math.round(w.getScrollLeft()*(1/w.scrollratio.x))),w.noticeCursor()})},w.bind(w.docscroll,"scroll",w.onscroll),this.doZoomIn=function(e){if(!w.zoomactive){w.zoomactive=!0,w.zoomrestore={style:{}};var t=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],o=w.win[0].style;for(var i in t){var n=t[i];w.zoomrestore.style[n]=void 0!==o[n]?o[n]:""}w.zoomrestore.style.width=w.win.css("width"),w.zoomrestore.style.height=w.win.css("height"),w.zoomrestore.padding={w:w.win.outerWidth()-w.win.width(),h:w.win.outerHeight()-w.win.height()},b.isios4&&(w.zoomrestore.scrollTop=r(window).scrollTop(),r(window).scrollTop(0)),w.win.css({position:b.isios4?"absolute":"fixed",top:0,left:0,"z-index":a+100,margin:"0px"});var s=w.win.css("backgroundColor");return(""==s||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(s))&&w.win.css("backgroundColor","#fff"),w.rail.css({"z-index":a+101}),w.zoom.css({"z-index":a+102}),w.zoom.css("backgroundPosition","0px -18px"),w.resizeZoom(),w.onzoomin&&w.onzoomin.call(w),w.cancelEvent(e)}},this.doZoomOut=function(e){return w.zoomactive?(w.zoomactive=!1,w.win.css("margin",""),w.win.css(w.zoomrestore.style),b.isios4&&r(window).scrollTop(w.zoomrestore.scrollTop),w.rail.css({"z-index":w.zindex}),w.zoom.css({"z-index":w.zindex}),w.zoomrestore=!1,w.zoom.css("backgroundPosition","0px 0px"),w.onResize(),w.onzoomout&&w.onzoomout.call(w),w.cancelEvent(e)):void 0},this.doZoom=function(e){return w.zoomactive?w.doZoomOut(e):w.doZoomIn(e)},this.resizeZoom=function(){if(w.zoomactive){var e=w.getScrollTop();w.win.css({width:r(window).width()-w.zoomrestore.padding.w+"px",height:r(window).height()-w.zoomrestore.padding.h+"px"}),w.onResize(),w.setScrollTop(Math.min(w.page.maxh,e))}},this.init(),r.nicescroll.push(this)},v=function(e){var t=this;this.nc=e,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+new Date},this.reset=function(e,o){t.stop();var i=t.time();t.steptime=0,t.lasttime=i,t.speedx=0,t.speedy=0,t.lastx=e,t.lasty=o,t.lastscrollx=-1,t.lastscrolly=-1},this.update=function(e,o){var i=t.time();t.steptime=i-t.lasttime,t.lasttime=i;var n=o-t.lasty,a=e-t.lastx,r=t.nc.getScrollTop()+n,s=t.nc.getScrollLeft()+a;t.snapx=0>s||s>t.nc.page.maxw,t.snapy=0>r||r>t.nc.page.maxh,t.speedx=a,t.speedy=n,t.lastx=e,t.lasty=o},this.stop=function(){t.nc.unsynched("domomentum2d"),t.timer&&clearTimeout(t.timer),t.timer=0,t.lastscrollx=-1,t.lastscrolly=-1},this.doSnapy=function(e,o){var i=!1;0>o?(o=0,i=!0):o>t.nc.page.maxh&&(o=t.nc.page.maxh,i=!0),0>e?(e=0,i=!0):e>t.nc.page.maxw&&(e=t.nc.page.maxw,i=!0),i?t.nc.doScrollPos(e,o,t.nc.opt.snapbackspeed):t.nc.triggerScrollEnd()},this.doMomentum=function(e){var o=t.time(),i=e?o+e:t.lasttime,n=t.nc.getScrollLeft(),a=t.nc.getScrollTop(),r=t.nc.page.maxh,s=t.nc.page.maxw;t.speedx=s>0?Math.min(60,t.speedx):0,t.speedy=r>0?Math.min(60,t.speedy):0;var l=i&&60>=o-i;(0>a||a>r||0>n||n>s)&&(l=!1);var c=!(!t.speedy||!l)&&t.speedy,u=!(!t.speedx||!l)&&t.speedx;if(c||u){var d=Math.max(16,t.steptime);if(d>50){var p=d/50;t.speedx*=p,t.speedy*=p,d=50}t.demulxy=0,t.lastscrollx=t.nc.getScrollLeft(),t.chkx=t.lastscrollx,t.lastscrolly=t.nc.getScrollTop(),t.chky=t.lastscrolly;var h=t.lastscrollx,f=t.lastscrolly,g=function(){var e=t.time()-o>600?.04:.02;t.speedx&&(h=Math.floor(t.lastscrollx-t.speedx*(1-t.demulxy)),t.lastscrollx=h,(0>h||h>s)&&(e=.1)),t.speedy&&(f=Math.floor(t.lastscrolly-t.speedy*(1-t.demulxy)),t.lastscrolly=f,(0>f||f>r)&&(e=.1)),t.demulxy=Math.min(1,t.demulxy+e),t.nc.synched("domomentum2d",function(){t.speedx&&(t.nc.getScrollLeft()!=t.chkx&&t.stop(),t.chkx=h,t.nc.setScrollLeft(h));t.speedy&&(t.nc.getScrollTop()!=t.chky&&t.stop(),t.chky=f,t.nc.setScrollTop(f));t.timer||(t.nc.hideCursor(),t.doSnapy(h,f))}),t.demulxy<1?t.timer=setTimeout(g,d):(t.stop(),t.nc.hideCursor(),t.doSnapy(h,f))};g()}else t.doSnapy(t.nc.getScrollLeft(),t.nc.getScrollTop())}},w=e.fn.scrollTop;e.cssHooks.pageYOffset={get:function(e){var t=r.data(e,"__nicescroll")||!1;return t&&t.ishwscroll?t.getScrollTop():w.call(e)},set:function(e,t){var o=r.data(e,"__nicescroll")||!1;return o&&o.ishwscroll?o.setScrollTop(parseInt(t)):w.call(e,t),this}},e.fn.scrollTop=function(e){if(void 0===e){var t=this[0]&&r.data(this[0],"__nicescroll")||!1;return t&&t.ishwscroll?t.getScrollTop():w.call(this)}return this.each(function(){var t=r.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollTop(parseInt(e)):w.call(r(this),e)})};var y=e.fn.scrollLeft;r.cssHooks.pageXOffset={get:function(e){var t=r.data(e,"__nicescroll")||!1;return t&&t.ishwscroll?t.getScrollLeft():y.call(e)},set:function(e,t){var o=r.data(e,"__nicescroll")||!1;return o&&o.ishwscroll?o.setScrollLeft(parseInt(t)):y.call(e,t),this}},e.fn.scrollLeft=function(e){if(void 0===e){var t=this[0]&&r.data(this[0],"__nicescroll")||!1;return t&&t.ishwscroll?t.getScrollLeft():y.call(this)}return this.each(function(){var t=r.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollLeft(parseInt(e)):y.call(r(this),e)})};var b=function(e){var t=this;if(this.length=0,this.name="nicescrollarray",this.each=function(e){for(var o=0,i=0;o<t.length;o++)e.call(t[o],i++);return t},this.push=function(e){t[t.length]=e,t.length++},this.eq=function(e){return t[e]},e)for(var o=0;o<e.length;o++){var i=r.data(e[o],"__nicescroll")||!1;i&&(this[this.length]=i,this.length++)}return this};(function(e,t,o){for(var i=0;i<t.length;i++)o(e,t[i])})(b.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(e,t){e[t]=function(){var e=arguments;return this.each(function(){this[t].apply(this,e)})}}),e.fn.getNiceScroll=function(e){return void 0===e?new b(this):this[e]&&r.data(this[e],"__nicescroll")||!1},e.extend(e.expr[":"],{nicescroll:function(e){return!!r.data(e,"__nicescroll")}}),r.fn.niceScroll=function(e,t){void 0===t&&("object"!=typeof e||"jquery"in e||(t=e,e=!1));var o=new b;void 0===t&&(t={}),e&&(t.doc=r(e),t.win=r(this));var i=!("doc"in t);return i||"win"in t||(t.win=r(this)),this.each(function(){var e=r(this).data("__nicescroll")||!1;e||(t.doc=i?r(this):t.doc,e=new m(t,r(this)),r(this).data("__nicescroll",e)),o.push(e)}),1==o.length?o[0]:o},window.NiceScroll={getjQuery:function(){return e}},r.nicescroll||(r.nicescroll=new b,r.nicescroll.options=h)}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";var t=window.Slick||{};(t=function(){var t=0;return function(o,i){var n,a,r,s=this;if(s.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:e(o),appendDots:e(o),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="previous">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="next">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return'<button type="button" data-role="none">'+(t+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0},s.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},e.extend(s,s.initials),s.activeBreakpoint=null,s.animType=null,s.animProp=null,s.breakpoints=[],s.breakpointSettings=[],s.cssTransitions=!1,s.hidden="hidden",s.paused=!1,s.positionProp=null,s.respondTo=null,s.rowCount=1,s.shouldClick=!0,s.$slider=e(o),s.$slidesCache=null,s.transformType=null,s.transitionType=null,s.visibilityChange="visibilitychange",s.windowWidth=0,s.windowTimer=null,n=e(o).data("slick")||{},s.options=e.extend({},s.defaults,n,i),s.currentSlide=s.options.initialSlide,s.originalSettings=s.options,(a=s.options.responsive||null)&&a.length>-1){for(r in s.respondTo=s.options.respondTo||"window",a)a.hasOwnProperty(r)&&(s.breakpoints.push(a[r].breakpoint),s.breakpointSettings[a[r].breakpoint]=a[r].settings);s.breakpoints.sort(function(e,t){return!0===s.options.mobileFirst?e-t:t-e})}void 0!==document.mozHidden?(s.hidden="mozHidden",s.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(s.hidden="webkitHidden",s.visibilityChange="webkitvisibilitychange"),s.autoPlay=e.proxy(s.autoPlay,s),s.autoPlayClear=e.proxy(s.autoPlayClear,s),s.changeSlide=e.proxy(s.changeSlide,s),s.clickHandler=e.proxy(s.clickHandler,s),s.selectHandler=e.proxy(s.selectHandler,s),s.setPosition=e.proxy(s.setPosition,s),s.swipeHandler=e.proxy(s.swipeHandler,s),s.dragHandler=e.proxy(s.dragHandler,s),s.keyHandler=e.proxy(s.keyHandler,s),s.autoPlayIterator=e.proxy(s.autoPlayIterator,s),s.instanceUid=t++,s.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,s.init(!0),s.checkResponsive(!0)}}()).prototype.addSlide=t.prototype.slickAdd=function(t,o,i){var n=this;if("boolean"==typeof o)i=o,o=null;else if(0>o||o>=n.slideCount)return!1;n.unload(),"number"==typeof o?0===o&&0===n.$slides.length?e(t).appendTo(n.$slideTrack):i?e(t).insertBefore(n.$slides.eq(o)):e(t).insertAfter(n.$slides.eq(o)):!0===i?e(t).prependTo(n.$slideTrack):e(t).appendTo(n.$slideTrack),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slides.each(function(t,o){e(o).attr("data-slick-index",t)}),n.$slidesCache=n.$slides,n.reinit()},t.prototype.animateHeight=function(){var e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:t},e.options.speed)}},t.prototype.animateSlide=function(t,o){var i={},n=this;n.animateHeight(),!0===n.options.rtl&&!1===n.options.vertical&&(t=-t),!1===n.transformsEnabled?!1===n.options.vertical?n.$slideTrack.animate({left:t},n.options.speed,n.options.easing,o):n.$slideTrack.animate({top:t},n.options.speed,n.options.easing,o):!1===n.cssTransitions?(!0===n.options.rtl&&(n.currentLeft=-n.currentLeft),e({animStart:n.currentLeft}).animate({animStart:t},{duration:n.options.speed,easing:n.options.easing,step:function(e){e=Math.ceil(e),!1===n.options.vertical?(i[n.animType]="translate("+e+"px, 0px)",n.$slideTrack.css(i)):(i[n.animType]="translate(0px,"+e+"px)",n.$slideTrack.css(i))},complete:function(){o&&o.call()}})):(n.applyTransition(),t=Math.ceil(t),i[n.animType]=!1===n.options.vertical?"translate3d("+t+"px, 0px, 0px)":"translate3d(0px,"+t+"px, 0px)",n.$slideTrack.css(i),o&&setTimeout(function(){n.disableTransition(),o.call()},n.options.speed))},t.prototype.asNavFor=function(t){var o=this.options.asNavFor;o&&null!==o&&(o=e(o).not(this.$slider)),null!==o&&"object"==typeof o&&o.each(function(){var o=e(this).slick("getSlick");o.unslicked||o.slideHandler(t,!0)})},t.prototype.applyTransition=function(e){var t=this,o={};o[t.transitionType]=!1===t.options.fade?t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:"opacity "+t.options.speed+"ms "+t.options.cssEase,!1===t.options.fade?t.$slideTrack.css(o):t.$slides.eq(e).css(o)},t.prototype.autoPlay=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer),e.slideCount>e.options.slidesToShow&&!0!==e.paused&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this;!1===e.options.infinite?1===e.direction?(e.currentSlide+1===e.slideCount-1&&(e.direction=0),e.slideHandler(e.currentSlide+e.options.slidesToScroll)):(0==e.currentSlide-1&&(e.direction=1),e.slideHandler(e.currentSlide-e.options.slidesToScroll)):e.slideHandler(e.currentSlide+e.options.slidesToScroll)},t.prototype.buildArrows=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow=e(t.options.prevArrow),t.$nextArrow=e(t.options.nextArrow),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.appendTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),!0!==t.options.infinite&&t.$prevArrow.addClass("slick-disabled"))},t.prototype.buildDots=function(){var t,o,i=this;if(!0===i.options.dots&&i.slideCount>i.options.slidesToShow){for(o='<ul class="'+i.options.dotsClass+'">',t=0;t<=i.getDotCount();t+=1)o+="<li>"+i.options.customPaging.call(this,i,t)+"</li>";o+="</ul>",i.$dots=e(o).appendTo(i.options.appendDots),i.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,o){e(o).attr("data-slick-index",t)}),t.$slidesCache=t.$slides,t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),(!0===t.options.centerMode||!0===t.options.swipeToSlide)&&(t.options.slidesToScroll=1),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),!0===t.options.accessibility&&t.$list.prop("tabIndex",0),t.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0),!0===t.options.draggable&&t.$list.addClass("draggable")},t.prototype.buildRows=function(){var e,t,o,i,n,a,r,s=this;if(i=document.createDocumentFragment(),a=s.$slider.children(),s.options.rows>1){for(r=s.options.slidesPerRow*s.options.rows,n=Math.ceil(a.length/r),e=0;n>e;e++){var l=document.createElement("div");for(t=0;t<s.options.rows;t++){var c=document.createElement("div");for(o=0;o<s.options.slidesPerRow;o++){var u=e*r+(t*s.options.slidesPerRow+o);a.get(u)&&c.appendChild(a.get(u))}l.appendChild(c)}i.appendChild(l)}s.$slider.html(i),s.$slider.children().children().children().width(100/s.options.slidesPerRow+"%").css({display:"inline-block"})}},t.prototype.checkResponsive=function(t){var o,i,n,a=this,r=!1,s=a.$slider.width(),l=window.innerWidth||e(window).width();if("window"===a.respondTo?n=l:"slider"===a.respondTo?n=s:"min"===a.respondTo&&(n=Math.min(l,s)),a.originalSettings.responsive&&a.originalSettings.responsive.length>-1&&null!==a.originalSettings.responsive){for(o in i=null,a.breakpoints)a.breakpoints.hasOwnProperty(o)&&(!1===a.originalSettings.mobileFirst?n<a.breakpoints[o]&&(i=a.breakpoints[o]):n>a.breakpoints[o]&&(i=a.breakpoints[o]));null!==i?null!==a.activeBreakpoint?i!==a.activeBreakpoint&&(a.activeBreakpoint=i,"unslick"===a.breakpointSettings[i]?a.unslick(i):(a.options=e.extend({},a.originalSettings,a.breakpointSettings[i]),!0===t&&(a.currentSlide=a.options.initialSlide),a.refresh()),r=i):(a.activeBreakpoint=i,"unslick"===a.breakpointSettings[i]?a.unslick(i):(a.options=e.extend({},a.originalSettings,a.breakpointSettings[i]),!0===t?a.currentSlide=a.options.initialSlide:a.refresh()),r=i):null!==a.activeBreakpoint&&(a.activeBreakpoint=null,a.options=a.originalSettings,!0===t&&(a.currentSlide=a.options.initialSlide),a.refresh(),r=i),t||!1===r||a.$slider.trigger("breakpoint",[a,r])}},t.prototype.changeSlide=function(t,o){var i,n,a=this,r=e(t.target);switch(r.is("a")&&t.preventDefault(),r.is("li")||(r=r.closest("li")),i=0!=a.slideCount%a.options.slidesToScroll?0:(a.slideCount-a.currentSlide)%a.options.slidesToScroll,t.data.message){case"previous":n=0===i?a.options.slidesToScroll:a.options.slidesToShow-i,a.slideCount>a.options.slidesToShow&&a.slideHandler(a.currentSlide-n,!1,o);break;case"next":n=0===i?a.options.slidesToScroll:i,a.slideCount>a.options.slidesToShow&&a.slideHandler(a.currentSlide+n,!1,o);break;case"index":var s=0===t.data.index?0:t.data.index||r.index()*a.options.slidesToScroll;a.slideHandler(a.checkNavigable(s),!1,o),r.children().trigger("focus");break;default:return}},t.prototype.checkNavigable=function(e){var t,o;if(o=0,e>(t=this.getNavigableIndexes())[t.length-1])e=t[t.length-1];else for(var i in t){if(e<t[i]){e=o;break}o=t[i]}return e},t.prototype.cleanUpEvents=function(){var t=this;!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).off("click.slick",t.changeSlide),!0===t.options.dots&&!0===t.options.pauseOnDotsHover&&!0===t.options.autoplay&&e("li",t.$dots).off("mouseenter.slick",e.proxy(t.setPaused,t,!0)).off("mouseleave.slick",e.proxy(t.setPaused,t,!1)),!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide)),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),e(document).off(t.visibilityChange,t.visibility),t.$list.off("mouseenter.slick",e.proxy(t.setPaused,t,!0)),t.$list.off("mouseleave.slick",e.proxy(t.setPaused,t,!1)),!0===t.options.accessibility&&t.$list.off("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&e(t.$slideTrack).children().off("click.slick",t.selectHandler),e(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),e(window).off("resize.slick.slick-"+t.instanceUid,t.resize),e("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),e(window).off("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).off("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.cleanUpRows=function(){var e,t=this;t.options.rows>1&&((e=t.$slides.children().children()).removeAttr("style"),t.$slider.html(e))},t.prototype.clickHandler=function(e){!1===this.shouldClick&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(){var t=this;t.autoPlayClear(),t.touchObject={},t.cleanUpEvents(),e(".slick-cloned",t.$slider).detach(),t.$dots&&t.$dots.remove(),t.$prevArrow&&"object"!=typeof t.options.prevArrow&&t.$prevArrow.remove(),t.$nextArrow&&"object"!=typeof t.options.nextArrow&&t.$nextArrow.remove(),t.$slides&&(t.$slides.removeClass("slick-slide slick-active slick-center slick-visible").removeAttr("aria-hidden").removeAttr("data-slick-index").css({position:"",left:"",top:"",zIndex:"",opacity:"",width:""}),t.$slideTrack.children(this.options.slide).detach(),t.$slideTrack.detach(),t.$list.detach(),t.$slider.append(t.$slides)),t.cleanUpRows(),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized"),t.unslicked=!0},t.prototype.disableTransition=function(e){var t=this,o={};o[t.transitionType]="",!1===t.options.fade?t.$slideTrack.css(o):t.$slides.eq(e).css(o)},t.prototype.fadeSlide=function(e,t){var o=this;!1===o.cssTransitions?(o.$slides.eq(e).css({zIndex:1e3}),o.$slides.eq(e).animate({opacity:1},o.options.speed,o.options.easing,t)):(o.applyTransition(e),o.$slides.eq(e).css({opacity:1,zIndex:1e3}),t&&setTimeout(function(){o.disableTransition(e),t.call()},o.options.speed))},t.prototype.filterSlides=t.prototype.slickFilter=function(e){var t=this;null!==e&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.getCurrent=t.prototype.slickCurrentSlide=function(){return this.currentSlide},t.prototype.getDotCount=function(){var e=this,t=0,o=0,i=0;if(!0===e.options.infinite)for(;t<e.slideCount;)++i,t=o+e.options.slidesToShow,o+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(!0===e.options.centerMode)i=e.slideCount;else for(;t<e.slideCount;)++i,t=o+e.options.slidesToShow,o+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return i-1},t.prototype.getLeft=function(e){var t,o,i,n=this,a=0;return n.slideOffset=0,o=n.$slides.first().outerHeight(),!0===n.options.infinite?(n.slideCount>n.options.slidesToShow&&(n.slideOffset=-1*n.slideWidth*n.options.slidesToShow,a=-1*o*n.options.slidesToShow),0!=n.slideCount%n.options.slidesToScroll&&e+n.options.slidesToScroll>n.slideCount&&n.slideCount>n.options.slidesToShow&&(e>n.slideCount?(n.slideOffset=-1*(n.options.slidesToShow-(e-n.slideCount))*n.slideWidth,a=-1*(n.options.slidesToShow-(e-n.slideCount))*o):(n.slideOffset=-1*n.slideCount%n.options.slidesToScroll*n.slideWidth,a=-1*n.slideCount%n.options.slidesToScroll*o))):e+n.options.slidesToShow>n.slideCount&&(n.slideOffset=(e+n.options.slidesToShow-n.slideCount)*n.slideWidth,a=(e+n.options.slidesToShow-n.slideCount)*o),n.slideCount<=n.options.slidesToShow&&(n.slideOffset=0,a=0),!0===n.options.centerMode&&!0===n.options.infinite?n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)-n.slideWidth:!0===n.options.centerMode&&(n.slideOffset=0,n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)),t=!1===n.options.vertical?-1*e*n.slideWidth+n.slideOffset:-1*e*o+a,!0===n.options.variableWidth&&(t=(i=n.slideCount<=n.options.slidesToShow||!1===n.options.infinite?n.$slideTrack.children(".slick-slide").eq(e):n.$slideTrack.children(".slick-slide").eq(e+n.options.slidesToShow))[0]?-1*i[0].offsetLeft:0,!0===n.options.centerMode&&(t=(i=!1===n.options.infinite?n.$slideTrack.children(".slick-slide").eq(e):n.$slideTrack.children(".slick-slide").eq(e+n.options.slidesToShow+1))[0]?-1*i[0].offsetLeft:0,t+=(n.$list.width()-i.outerWidth())/2)),t},t.prototype.getOption=t.prototype.slickGetOption=function(e){return this.options[e]},t.prototype.getNavigableIndexes=function(){var e,t=this,o=0,i=0,n=[];for(!1===t.options.infinite?e=t.slideCount:(o=-1*t.options.slidesToScroll,i=-1*t.options.slidesToScroll,e=2*t.slideCount);e>o;)n.push(o),o=i+t.options.slidesToScroll,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return n},t.prototype.getSlick=function(){return this},t.prototype.getSlideCount=function(){var t,o,i=this;return o=!0===i.options.centerMode?i.slideWidth*Math.floor(i.options.slidesToShow/2):0,!0===i.options.swipeToSlide?(i.$slideTrack.find(".slick-slide").each(function(n,a){return a.offsetLeft-o+e(a).outerWidth()/2>-1*i.swipeLeft?(t=a,!1):void 0}),Math.abs(e(t).attr("data-slick-index")-i.currentSlide)||1):i.options.slidesToScroll},t.prototype.goTo=t.prototype.slickGoTo=function(e,t){this.changeSlide({data:{message:"index",index:parseInt(e)}},t)},t.prototype.init=function(t){var o=this;e(o.$slider).hasClass("slick-initialized")||(e(o.$slider).addClass("slick-initialized"),o.buildRows(),o.buildOut(),o.setProps(),o.startLoad(),o.loadSlider(),o.initializeEvents(),o.updateArrows(),o.updateDots()),t&&o.$slider.trigger("init",[o])},t.prototype.initArrowEvents=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.on("click.slick",{message:"next"},e.changeSlide))},t.prototype.initDotEvents=function(){var t=this;!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),!0===t.options.dots&&!0===t.options.pauseOnDotsHover&&!0===t.options.autoplay&&e("li",t.$dots).on("mouseenter.slick",e.proxy(t.setPaused,t,!0)).on("mouseleave.slick",e.proxy(t.setPaused,t,!1))},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),e(document).on(t.visibilityChange,e.proxy(t.visibility,t)),t.$list.on("mouseenter.slick",e.proxy(t.setPaused,t,!0)),t.$list.on("mouseleave.slick",e.proxy(t.setPaused,t,!1)),!0===t.options.accessibility&&t.$list.on("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,e.proxy(t.orientationChange,t)),e(window).on("resize.slick.slick-"+t.instanceUid,e.proxy(t.resize,t)),e("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).on("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.initUI=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.show(),!0===e.options.autoplay&&e.autoPlay()},t.prototype.keyHandler=function(e){var t=this;37===e.keyCode&&!0===t.options.accessibility?t.changeSlide({data:{message:"previous"}}):39===e.keyCode&&!0===t.options.accessibility&&t.changeSlide({data:{message:"next"}})},t.prototype.lazyLoad=function(){function t(t){e("img[data-lazy]",t).each(function(){var t=e(this),o=e(this).attr("data-lazy"),i=document.createElement("img");i.onload=function(){t.animate({opacity:1},200)},i.src=o,t.css({opacity:0}).attr("src",o).removeAttr("data-lazy").removeClass("slick-loading")})}var o,i,n=this;!0===n.options.centerMode?!0===n.options.infinite?i=(o=n.currentSlide+(n.options.slidesToShow/2+1))+n.options.slidesToShow+2:(o=Math.max(0,n.currentSlide-(n.options.slidesToShow/2+1)),i=n.options.slidesToShow/2+1+2+n.currentSlide):(i=(o=n.options.infinite?n.options.slidesToShow+n.currentSlide:n.currentSlide)+n.options.slidesToShow,!0===n.options.fade&&(o>0&&o--,i<=n.slideCount&&i++)),t(n.$slider.find(".slick-slide").slice(o,i)),n.slideCount<=n.options.slidesToShow?t(n.$slider.find(".slick-slide")):n.currentSlide>=n.slideCount-n.options.slidesToShow?t(n.$slider.find(".slick-cloned").slice(0,n.options.slidesToShow)):0===n.currentSlide&&t(n.$slider.find(".slick-cloned").slice(-1*n.options.slidesToShow))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},t.prototype.next=t.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},t.prototype.orientationChange=function(){this.checkResponsive(),this.setPosition()},t.prototype.pause=t.prototype.slickPause=function(){this.autoPlayClear(),this.paused=!0},t.prototype.play=t.prototype.slickPlay=function(){this.paused=!1,this.autoPlay()},t.prototype.postSlide=function(e){var t=this;t.$slider.trigger("afterChange",[t,e]),t.animating=!1,t.setPosition(),t.swipeLeft=null,!0===t.options.autoplay&&!1===t.paused&&t.autoPlay()},t.prototype.prev=t.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},t.prototype.preventDefault=function(e){e.preventDefault()},t.prototype.progressiveLazyLoad=function(){var t,o=this;e("img[data-lazy]",o.$slider).length>0&&(t=e("img[data-lazy]",o.$slider).first()).attr("src",t.attr("data-lazy")).removeClass("slick-loading").load(function(){t.removeAttr("data-lazy"),o.progressiveLazyLoad(),!0===o.options.adaptiveHeight&&o.setPosition()}).error(function(){t.removeAttr("data-lazy"),o.progressiveLazyLoad()})},t.prototype.refresh=function(){var t=this,o=t.currentSlide;t.destroy(),e.extend(t,t.initials),t.init(),t.changeSlide({data:{message:"index",index:o}},!1)},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),!0===t.options.focusOnSelect&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses(0),t.setPosition(),t.$slider.trigger("reInit",[t])},t.prototype.resize=function(){var t=this;e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.setPosition()},50))},t.prototype.removeSlide=t.prototype.slickRemove=function(e,t,o){var i=this;return"boolean"==typeof e?e=!0===(t=e)?0:i.slideCount-1:e=!0===t?--e:e,!(i.slideCount<1||0>e||e>i.slideCount-1)&&(i.unload(),!0===o?i.$slideTrack.children().remove():i.$slideTrack.children(this.options.slide).eq(e).remove(),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slidesCache=i.$slides,void i.reinit())},t.prototype.setCSS=function(e){var t,o,i=this,n={};!0===i.options.rtl&&(e=-e),t="left"==i.positionProp?Math.ceil(e)+"px":"0px",o="top"==i.positionProp?Math.ceil(e)+"px":"0px",n[i.positionProp]=e,!1===i.transformsEnabled?i.$slideTrack.css(n):(n={},!1===i.cssTransitions?(n[i.animType]="translate("+t+", "+o+")",i.$slideTrack.css(n)):(n[i.animType]="translate3d("+t+", "+o+", 0px)",i.$slideTrack.css(n)))},t.prototype.setDimensions=function(){var e=this;!1===e.options.vertical?!0===e.options.centerMode&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),!0===e.options.centerMode&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),!1===e.options.vertical&&!1===e.options.variableWidth?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):!0===e.options.variableWidth?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();!1===e.options.variableWidth&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},t.prototype.setFade=function(){var t,o=this;o.$slides.each(function(i,n){t=-1*o.slideWidth*i,!0===o.options.rtl?e(n).css({position:"relative",right:t,top:0,zIndex:800,opacity:0}):e(n).css({position:"relative",left:t,top:0,zIndex:800,opacity:0})}),o.$slides.eq(o.currentSlide).css({zIndex:900,opacity:1})},t.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},t.prototype.setOption=t.prototype.slickSetOption=function(e,t,o){var i=this;i.options[e]=t,!0===o&&(i.unload(),i.reinit())},t.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),!1===e.options.fade?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=!0===e.options.vertical?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),(void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.msTransition)&&!0===e.options.useCSS&&(e.cssTransitions=!0),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&!1!==e.animType&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=null!==e.animType&&!1!==e.animType},t.prototype.setSlideClasses=function(e){var t,o,i,n,a=this;a.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden","true").removeClass("slick-center"),o=a.$slider.find(".slick-slide"),!0===a.options.centerMode?(t=Math.floor(a.options.slidesToShow/2),!0===a.options.infinite&&(e>=t&&e<=a.slideCount-1-t?a.$slides.slice(e-t,e+t+1).addClass("slick-active").attr("aria-hidden","false"):(i=a.options.slidesToShow+e,o.slice(i-t+1,i+t+2).addClass("slick-active").attr("aria-hidden","false")),0===e?o.eq(o.length-1-a.options.slidesToShow).addClass("slick-center"):e===a.slideCount-1&&o.eq(a.options.slidesToShow).addClass("slick-center")),a.$slides.eq(e).addClass("slick-center")):e>=0&&e<=a.slideCount-a.options.slidesToShow?a.$slides.slice(e,e+a.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):o.length<=a.options.slidesToShow?o.addClass("slick-active").attr("aria-hidden","false"):(n=a.slideCount%a.options.slidesToShow,i=!0===a.options.infinite?a.options.slidesToShow+e:e,a.options.slidesToShow==a.options.slidesToScroll&&a.slideCount-e<a.options.slidesToShow?o.slice(i-(a.options.slidesToShow-n),i+n).addClass("slick-active").attr("aria-hidden","false"):o.slice(i,i+a.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===a.options.lazyLoad&&a.lazyLoad()},t.prototype.setupInfinite=function(){var t,o,i,n=this;if(!0===n.options.fade&&(n.options.centerMode=!1),!0===n.options.infinite&&!1===n.options.fade&&(o=null,n.slideCount>n.options.slidesToShow)){for(i=!0===n.options.centerMode?n.options.slidesToShow+1:n.options.slidesToShow,t=n.slideCount;t>n.slideCount-i;t-=1)o=t-1,e(n.$slides[o]).clone(!0).attr("id","").attr("data-slick-index",o-n.slideCount).prependTo(n.$slideTrack).addClass("slick-cloned");for(t=0;i>t;t+=1)o=t,e(n.$slides[o]).clone(!0).attr("id","").attr("data-slick-index",o+n.slideCount).appendTo(n.$slideTrack).addClass("slick-cloned");n.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}},t.prototype.setPaused=function(e){var t=this;!0===t.options.autoplay&&!0===t.options.pauseOnHover&&(t.paused=e,e?t.autoPlayClear():t.autoPlay())},t.prototype.selectHandler=function(t){var o=this,i=e(t.target).is(".slick-slide")?e(t.target):e(t.target).parents(".slick-slide"),n=parseInt(i.attr("data-slick-index"));return n||(n=0),o.slideCount<=o.options.slidesToShow?(o.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden","true"),o.$slides.eq(n).addClass("slick-active").attr("aria-hidden","false"),!0===o.options.centerMode&&(o.$slider.find(".slick-slide").removeClass("slick-center"),o.$slides.eq(n).addClass("slick-center")),void o.asNavFor(n)):void o.slideHandler(n)},t.prototype.slideHandler=function(e,t,o){var i,n,a,r=null,s=this;return t=t||!1,!0===s.animating&&!0===s.options.waitForAnimate||!0===s.options.fade&&s.currentSlide===e||s.slideCount<=s.options.slidesToShow?void 0:(!1===t&&s.asNavFor(e),i=e,r=s.getLeft(i),a=s.getLeft(s.currentSlide),s.currentLeft=null===s.swipeLeft?a:s.swipeLeft,!1===s.options.infinite&&!1===s.options.centerMode&&(0>e||e>s.getDotCount()*s.options.slidesToScroll)?void(!1===s.options.fade&&(i=s.currentSlide,!0!==o?s.animateSlide(a,function(){s.postSlide(i)}):s.postSlide(i))):!1===s.options.infinite&&!0===s.options.centerMode&&(0>e||e>s.slideCount-s.options.slidesToScroll)?void(!1===s.options.fade&&(i=s.currentSlide,!0!==o?s.animateSlide(a,function(){s.postSlide(i)}):s.postSlide(i))):(!0===s.options.autoplay&&clearInterval(s.autoPlayTimer),n=0>i?0!=s.slideCount%s.options.slidesToScroll?s.slideCount-s.slideCount%s.options.slidesToScroll:s.slideCount+i:i>=s.slideCount?0!=s.slideCount%s.options.slidesToScroll?0:i-s.slideCount:i,s.animating=!0,s.$slider.trigger("beforeChange",[s,s.currentSlide,n]),s.currentSlide,s.currentSlide=n,s.setSlideClasses(s.currentSlide),s.updateDots(),s.updateArrows(),!0===s.options.fade?(!0!==o?s.fadeSlide(n,function(){s.postSlide(n)}):s.postSlide(n),void s.animateHeight()):void(!0!==o?s.animateSlide(r,function(){s.postSlide(n)}):s.postSlide(n))))},t.prototype.startLoad=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var e,t,o,i,n=this;return e=n.touchObject.startX-n.touchObject.curX,t=n.touchObject.startY-n.touchObject.curY,o=Math.atan2(t,e),0>(i=Math.round(180*o/Math.PI))&&(i=360-Math.abs(i)),45>=i&&i>=0?!1===n.options.rtl?"left":"right":360>=i&&i>=315?!1===n.options.rtl?"left":"right":i>=135&&225>=i?!1===n.options.rtl?"right":"left":!0===n.options.verticalSwiping?i>=35&&135>=i?"left":"right":"vertical"},t.prototype.swipeEnd=function(){var e,t=this;if(t.dragging=!1,t.shouldClick=!(t.touchObject.swipeLength>10),void 0===t.touchObject.curX)return!1;if(!0===t.touchObject.edgeHit&&t.$slider.trigger("edge",[t,t.swipeDirection()]),t.touchObject.swipeLength>=t.touchObject.minSwipe)switch(t.swipeDirection()){case"left":e=t.options.swipeToSlide?t.checkNavigable(t.currentSlide+t.getSlideCount()):t.currentSlide+t.getSlideCount(),t.slideHandler(e),t.currentDirection=0,t.touchObject={},t.$slider.trigger("swipe",[t,"left"]);break;case"right":e=t.options.swipeToSlide?t.checkNavigable(t.currentSlide-t.getSlideCount()):t.currentSlide-t.getSlideCount(),t.slideHandler(e),t.currentDirection=1,t.touchObject={},t.$slider.trigger("swipe",[t,"right"])}else t.touchObject.startX!==t.touchObject.curX&&(t.slideHandler(t.currentSlide),t.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(!(!1===t.options.swipe||"ontouchend"in document&&!1===t.options.swipe||!1===t.options.draggable&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,!0===t.options.verticalSwiping&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t,o,i,n,a,r=this;return a=void 0!==e.originalEvent?e.originalEvent.touches:null,!(!r.dragging||a&&1!==a.length)&&(t=r.getLeft(r.currentSlide),r.touchObject.curX=void 0!==a?a[0].pageX:e.clientX,r.touchObject.curY=void 0!==a?a[0].pageY:e.clientY,r.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(r.touchObject.curX-r.touchObject.startX,2))),!0===r.options.verticalSwiping&&(r.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(r.touchObject.curY-r.touchObject.startY,2)))),"vertical"!==(o=r.swipeDirection())?(void 0!==e.originalEvent&&r.touchObject.swipeLength>4&&e.preventDefault(),n=(!1===r.options.rtl?1:-1)*(r.touchObject.curX>r.touchObject.startX?1:-1),!0===r.options.verticalSwiping&&(n=r.touchObject.curY>r.touchObject.startY?1:-1),i=r.touchObject.swipeLength,r.touchObject.edgeHit=!1,!1===r.options.infinite&&(0===r.currentSlide&&"right"===o||r.currentSlide>=r.getDotCount()&&"left"===o)&&(i=r.touchObject.swipeLength*r.options.edgeFriction,r.touchObject.edgeHit=!0),r.swipeLeft=!1===r.options.vertical?t+i*n:t+i*(r.$list.height()/r.listWidth)*n,!0===r.options.verticalSwiping&&(r.swipeLeft=t+i*n),!0!==r.options.fade&&!1!==r.options.touchMove&&(!0===r.animating?(r.swipeLeft=null,!1):void r.setCSS(r.swipeLeft))):void 0)},t.prototype.swipeStart=function(e){var t,o=this;return 1!==o.touchObject.fingerCount||o.slideCount<=o.options.slidesToShow?(o.touchObject={},!1):(void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),o.touchObject.startX=o.touchObject.curX=void 0!==t?t.pageX:e.clientX,o.touchObject.startY=o.touchObject.curY=void 0!==t?t.pageY:e.clientY,void(o.dragging=!0))},t.prototype.unfilterSlides=t.prototype.slickUnfilter=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&"object"!=typeof t.options.prevArrow&&t.$prevArrow.remove(),t.$nextArrow&&"object"!=typeof t.options.nextArrow&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible").attr("aria-hidden","true").css("width","")},t.prototype.unslick=function(e){var t=this;t.$slider.trigger("unslick",[t,e]),t.destroy()},t.prototype.updateArrows=function(){var e=this;Math.floor(e.options.slidesToShow/2),!0===e.options.arrows&&!0!==e.options.infinite&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.removeClass("slick-disabled"),e.$nextArrow.removeClass("slick-disabled"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled"),e.$nextArrow.removeClass("slick-disabled")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&!1===e.options.centerMode?(e.$nextArrow.addClass("slick-disabled"),e.$prevArrow.removeClass("slick-disabled")):e.currentSlide>=e.slideCount-1&&!0===e.options.centerMode&&(e.$nextArrow.addClass("slick-disabled"),e.$prevArrow.removeClass("slick-disabled")))},t.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},t.prototype.visibility=function(){var e=this;document[e.hidden]?(e.paused=!0,e.autoPlayClear()):!0===e.options.autoplay&&(e.paused=!1,e.autoPlay())},e.fn.slick=function(){for(var e,o=this,i=arguments[0],n=Array.prototype.slice.call(arguments,1),a=o.length,r=0;a>r;r++)if("object"==typeof i||void 0===i?o[r].slick=new t(o[r],i):e=o[r].slick[i].apply(o[r].slick,n),void 0!==e)return e;return o}}),function(){var e=this,t=e._,o={},i=Array.prototype,n=Object.prototype,a=Function.prototype,r=i.push,s=i.slice,l=i.concat,c=n.toString,u=n.hasOwnProperty,d=i.forEach,p=i.map,h=i.reduce,f=i.reduceRight,g=i.filter,m=i.every,v=i.some,w=i.indexOf,y=i.lastIndexOf,b=Array.isArray,k=Object.keys,x=a.bind,S=function(e){return e instanceof S?e:this instanceof S?void(this._wrapped=e):new S(e)};"undefined"!=typeof exports?(void 0!==module&&module.exports&&(exports=module.exports=S),exports._=S):e._=S,S.VERSION="1.6.0";var $=S.each=S.forEach=function(e,t,i){if(null==e)return e;if(d&&e.forEach===d)e.forEach(t,i);else if(e.length===+e.length){for(var n=0,a=e.length;a>n;n++)if(t.call(i,e[n],n,e)===o)return}else{var r=S.keys(e);for(n=0,a=r.length;a>n;n++)if(t.call(i,e[r[n]],r[n],e)===o)return}return e};S.map=S.collect=function(e,t,o){var i=[];return null==e?i:p&&e.map===p?e.map(t,o):($(e,function(e,n,a){i.push(t.call(o,e,n,a))}),i)};var C="Reduce of empty array with no initial value";S.reduce=S.foldl=S.inject=function(e,t,o,i){var n=arguments.length>2;if(null==e&&(e=[]),h&&e.reduce===h)return i&&(t=S.bind(t,i)),n?e.reduce(t,o):e.reduce(t);if($(e,function(e,a,r){n?o=t.call(i,o,e,a,r):(o=e,n=!0)}),!n)throw new TypeError(C);return o},S.reduceRight=S.foldr=function(e,t,o,i){var n=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return i&&(t=S.bind(t,i)),n?e.reduceRight(t,o):e.reduceRight(t);var a=e.length;if(a!==+a){var r=S.keys(e);a=r.length}if($(e,function(s,l,c){l=r?r[--a]:--a,n?o=t.call(i,o,e[l],l,c):(o=e[l],n=!0)}),!n)throw new TypeError(C);return o},S.find=S.detect=function(e,t,o){var i;return T(e,function(e,n,a){return t.call(o,e,n,a)?(i=e,!0):void 0}),i},S.filter=S.select=function(e,t,o){var i=[];return null==e?i:g&&e.filter===g?e.filter(t,o):($(e,function(e,n,a){t.call(o,e,n,a)&&i.push(e)}),i)},S.reject=function(e,t,o){return S.filter(e,function(e,i,n){return!t.call(o,e,i,n)},o)},S.every=S.all=function(e,t,i){t||(t=S.identity);var n=!0;return null==e?n:m&&e.every===m?e.every(t,i):($(e,function(e,a,r){return(n=n&&t.call(i,e,a,r))?void 0:o}),!!n)};var T=S.some=S.any=function(e,t,i){t||(t=S.identity);var n=!1;return null==e?n:v&&e.some===v?e.some(t,i):($(e,function(e,a,r){return n||(n=t.call(i,e,a,r))?o:void 0}),!!n)};S.contains=S.include=function(e,t){return null!=e&&(w&&e.indexOf===w?-1!=e.indexOf(t):T(e,function(e){return e===t}))},S.invoke=function(e,t){var o=s.call(arguments,2),i=S.isFunction(t);return S.map(e,function(e){return(i?t:e[t]).apply(e,o)})},S.pluck=function(e,t){return S.map(e,S.property(t))},S.where=function(e,t){return S.filter(e,S.matches(t))},S.findWhere=function(e,t){return S.find(e,S.matches(t))},S.max=function(e,t,o){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var i=-1/0,n=-1/0;return $(e,function(e,a,r){var s=t?t.call(o,e,a,r):e;s>n&&(i=e,n=s)}),i},S.min=function(e,t,o){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var i=1/0,n=1/0;return $(e,function(e,a,r){var s=t?t.call(o,e,a,r):e;n>s&&(i=e,n=s)}),i},S.shuffle=function(e){var t,o=0,i=[];return $(e,function(e){t=S.random(o++),i[o-1]=i[t],i[t]=e}),i},S.sample=function(e,t,o){return null==t||o?(e.length!==+e.length&&(e=S.values(e)),e[S.random(e.length-1)]):S.shuffle(e).slice(0,Math.max(0,t))};var _=function(e){return null==e?S.identity:S.isFunction(e)?e:S.property(e)};S.sortBy=function(e,t,o){return t=_(t),S.pluck(S.map(e,function(e,i,n){return{value:e,index:i,criteria:t.call(o,e,i,n)}}).sort(function(e,t){var o=e.criteria,i=t.criteria;if(o!==i){if(o>i||void 0===o)return 1;if(i>o||void 0===i)return-1}return e.index-t.index}),"value")};var D=function(e){return function(t,o,i){var n={};return o=_(o),$(t,function(a,r){var s=o.call(i,a,r,t);e(n,s,a)}),n}};S.groupBy=D(function(e,t,o){S.has(e,t)?e[t].push(o):e[t]=[o]}),S.indexBy=D(function(e,t,o){e[t]=o}),S.countBy=D(function(e,t){S.has(e,t)?e[t]++:e[t]=1}),S.sortedIndex=function(e,t,o,i){for(var n=(o=_(o)).call(i,t),a=0,r=e.length;r>a;){var s=a+r>>>1;o.call(i,e[s])<n?a=s+1:r=s}return a},S.toArray=function(e){return e?S.isArray(e)?s.call(e):e.length===+e.length?S.map(e,S.identity):S.values(e):[]},S.size=function(e){return null==e?0:e.length===+e.length?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,o){return null==e?void 0:null==t||o?e[0]:0>t?[]:s.call(e,0,t)},S.initial=function(e,t,o){return s.call(e,0,e.length-(null==t||o?1:t))},S.last=function(e,t,o){return null==e?void 0:null==t||o?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},S.rest=S.tail=S.drop=function(e,t,o){return s.call(e,null==t||o?1:t)},S.compact=function(e){return S.filter(e,S.identity)};var I=function(e,t,o){return t&&S.every(e,S.isArray)?l.apply(o,e):($(e,function(e){S.isArray(e)||S.isArguments(e)?t?r.apply(o,e):I(e,t,o):o.push(e)}),o)};S.flatten=function(e,t){return I(e,t,[])},S.without=function(e){return S.difference(e,s.call(arguments,1))},S.partition=function(e,t){var o=[],i=[];return $(e,function(e){(t(e)?o:i).push(e)}),[o,i]},S.uniq=S.unique=function(e,t,o,i){S.isFunction(t)&&(i=o,o=t,t=!1);var n=o?S.map(e,o,i):e,a=[],r=[];return $(n,function(o,i){(t?i&&r[r.length-1]===o:S.contains(r,o))||(r.push(o),a.push(e[i]))}),a},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=function(e){var t=s.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.contains(t,e)})})},S.difference=function(e){var t=l.apply(i,s.call(arguments,1));return S.filter(e,function(e){return!S.contains(t,e)})},S.zip=function(){for(var e=S.max(S.pluck(arguments,"length").concat(0)),t=new Array(e),o=0;e>o;o++)t[o]=S.pluck(arguments,""+o);return t},S.object=function(e,t){if(null==e)return{};for(var o={},i=0,n=e.length;n>i;i++)t?o[e[i]]=t[i]:o[e[i][0]]=e[i][1];return o},S.indexOf=function(e,t,o){if(null==e)return-1;var i=0,n=e.length;if(o){if("number"!=typeof o)return e[i=S.sortedIndex(e,t)]===t?i:-1;i=0>o?Math.max(0,n+o):o}if(w&&e.indexOf===w)return e.indexOf(t,o);for(;n>i;i++)if(e[i]===t)return i;return-1},S.lastIndexOf=function(e,t,o){if(null==e)return-1;var i=null!=o;if(y&&e.lastIndexOf===y)return i?e.lastIndexOf(t,o):e.lastIndexOf(t);for(var n=i?o:e.length;n--;)if(e[n]===t)return n;return-1},S.range=function(e,t,o){arguments.length<=1&&(t=e||0,e=0),o=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/o),0),n=0,a=new Array(i);i>n;)a[n++]=e,e+=o;return a};var P=function(){};S.bind=function(e,t){var o,i;if(x&&e.bind===x)return x.apply(e,s.call(arguments,1));if(!S.isFunction(e))throw new TypeError;return o=s.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,o.concat(s.call(arguments)));P.prototype=e.prototype;var n=new P;P.prototype=null;var a=e.apply(n,o.concat(s.call(arguments)));return Object(a)===a?a:n}},S.partial=function(e){var t=s.call(arguments,1);return function(){for(var o=0,i=t.slice(),n=0,a=i.length;a>n;n++)i[n]===S&&(i[n]=arguments[o++]);for(;o<arguments.length;)i.push(arguments[o++]);return e.apply(this,i)}},S.bindAll=function(e){var t=s.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return $(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var o={};return t||(t=S.identity),function(){var i=t.apply(this,arguments);return S.has(o,i)?o[i]:o[i]=e.apply(this,arguments)}},S.delay=function(e,t){var o=s.call(arguments,2);return setTimeout(function(){return e.apply(null,o)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(s.call(arguments,1)))},S.throttle=function(e,t,o){var i,n,a,r=null,s=0;o||(o={});var l=function(){s=!1===o.leading?0:S.now(),r=null,a=e.apply(i,n),i=n=null};return function(){var c=S.now();s||!1!==o.leading||(s=c);var u=t-(c-s);return i=this,n=arguments,0>=u?(clearTimeout(r),r=null,s=c,a=e.apply(i,n),i=n=null):r||!1===o.trailing||(r=setTimeout(l,u)),a}},S.debounce=function(e,t,o){var i,n,a,r,s,l=function(){var c=S.now()-r;t>c?i=setTimeout(l,t-c):(i=null,o||(s=e.apply(a,n),a=n=null))};return function(){a=this,n=arguments,r=S.now();var c=o&&!i;return i||(i=setTimeout(l,t)),c&&(s=e.apply(a,n),a=n=null),s}},S.once=function(e){var t,o=!1;return function(){return o?t:(o=!0,t=e.apply(this,arguments),e=null,t)}},S.wrap=function(e,t){return S.partial(t,e)},S.compose=function(){var e=arguments;return function(){for(var t=arguments,o=e.length-1;o>=0;o--)t=[e[o].apply(this,t)];return t[0]}},S.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},S.keys=function(e){if(!S.isObject(e))return[];if(k)return k(e);var t=[];for(var o in e)S.has(e,o)&&t.push(o);return t},S.values=function(e){for(var t=S.keys(e),o=t.length,i=new Array(o),n=0;o>n;n++)i[n]=e[t[n]];return i},S.pairs=function(e){for(var t=S.keys(e),o=t.length,i=new Array(o),n=0;o>n;n++)i[n]=[t[n],e[t[n]]];return i},S.invert=function(e){for(var t={},o=S.keys(e),i=0,n=o.length;n>i;i++)t[e[o[i]]]=o[i];return t},S.functions=S.methods=function(e){var t=[];for(var o in e)S.isFunction(e[o])&&t.push(o);return t.sort()},S.extend=function(e){return $(s.call(arguments,1),function(t){if(t)for(var o in t)e[o]=t[o]}),e},S.pick=function(e){var t={},o=l.apply(i,s.call(arguments,1));return $(o,function(o){o in e&&(t[o]=e[o])}),t},S.omit=function(e){var t={},o=l.apply(i,s.call(arguments,1));for(var n in e)S.contains(o,n)||(t[n]=e[n]);return t},S.defaults=function(e){return $(s.call(arguments,1),function(t){if(t)for(var o in t)void 0===e[o]&&(e[o]=t[o])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e};var E=function(e,t,o,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof S&&(e=e._wrapped),t instanceof S&&(t=t._wrapped);var n=c.call(e);if(n!=c.call(t))return!1;switch(n){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var a=o.length;a--;)if(o[a]==e)return i[a]==t;var r=e.constructor,s=t.constructor;if(r!==s&&!(S.isFunction(r)&&r instanceof r&&S.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1;o.push(e),i.push(t);var l=0,u=!0;if("[object Array]"==n){if(u=(l=e.length)==t.length)for(;l--&&(u=E(e[l],t[l],o,i)););}else{for(var d in e)if(S.has(e,d)&&(l++,!(u=S.has(t,d)&&E(e[d],t[d],o,i))))break;if(u){for(d in t)if(S.has(t,d)&&!l--)break;u=!l}}return o.pop(),i.pop(),u};S.isEqual=function(e,t){return E(e,t,[],[])},S.isEmpty=function(e){if(null==e)return!0;if(S.isArray(e)||S.isString(e))return 0===e.length;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=b||function(e){return"[object Array]"==c.call(e)},S.isObject=function(e){return e===Object(e)},$(["Arguments","Function","String","Number","Date","RegExp"],function(e){S["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),S.isArguments(arguments)||(S.isArguments=function(e){return!(!e||!S.has(e,"callee"))}),"function"!=typeof/./&&(S.isFunction=function(e){return"function"==typeof e}),S.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},S.isNaN=function(e){return S.isNumber(e)&&e!=+e},S.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==c.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return u.call(e,t)},S.noConflict=function(){return e._=t,this},S.identity=function(e){return e},S.constant=function(e){return function(){return e}},S.property=function(e){return function(t){return t[e]}},S.matches=function(e){return function(t){if(t===e)return!0;for(var o in e)if(e[o]!==t[o])return!1;return!0}},S.times=function(e,t,o){for(var i=Array(Math.max(0,e)),n=0;e>n;n++)i[n]=t.call(o,n);return i},S.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},S.now=Date.now||function(){return(new Date).getTime()};var A={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};A.unescape=S.invert(A.escape);var M={escape:new RegExp("["+S.keys(A.escape).join("")+"]","g"),unescape:new RegExp("("+S.keys(A.unescape).join("|")+")","g")};S.each(["escape","unescape"],function(e){S[e]=function(t){return null==t?"":(""+t).replace(M[e],function(t){return A[e][t]})}}),S.result=function(e,t){if(null!=e){var o=e[t];return S.isFunction(o)?o.call(e):o}},S.mixin=function(e){$(S.functions(e),function(t){var o=S[t]=e[t];S.prototype[t]=function(){var e=[this._wrapped];return r.apply(e,arguments),F.call(this,o.apply(S,e))}})};var z=0;S.uniqueId=function(e){var t=++z+"";return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;S.template=function(e,t,o){var i;o=S.defaults({},o,S.templateSettings);var n=new RegExp([(o.escape||L).source,(o.interpolate||L).source,(o.evaluate||L).source].join("|")+"|$","g"),a=0,r="__p+='";e.replace(n,function(t,o,i,n,s){return r+=e.slice(a,s).replace(R,function(e){return"\\"+O[e]}),o&&(r+="'+\n((__t=("+o+"))==null?'':_.escape(__t))+\n'"),i&&(r+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),n&&(r+="';\n"+n+"\n__p+='"),a=s+t.length,t}),r+="';\n",o.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{i=new Function(o.variable||"obj","_",r)}catch(e){throw e.source=r,e}if(t)return i(t,S);var s=function(e){return i.call(this,e,S)};return s.source="function("+(o.variable||"obj")+"){\n"+r+"}",s},S.chain=function(e){return S(e).chain()};var F=function(e){return this._chain?S(e).chain():e};S.mixin(S),$(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];S.prototype[e]=function(){var o=this._wrapped;return t.apply(o,arguments),"shift"!=e&&"splice"!=e||0!==o.length||delete o[0],F.call(this,o)}}),$(["concat","join","slice"],function(e){var t=i[e];S.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),S.extend(S.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return S})}.call(this),function(e,t,o){var i={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,debug:!0,delay:200,minWidth:0,maxWidth:null,functionInit:function(e,t){},functionBefore:function(e,t){t()},functionReady:function(e,t){},functionAfter:function(e){},hideOnClick:!1,icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,multiple:!1,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,positionTrackerCallback:function(e){"hover"==this.option("trigger")&&this.option("autoClose")&&this.hide()},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};function n(t,o){this.bodyOverflowX,this.callbacks={hide:[],show:[]},this.checkInterval=null,this.Content,this.$el=e(t),this.$elProxy,this.elProxyPosition,this.enabled=!0,this.options=e.extend({},i,o),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(1e5*Math.random()),this.Status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this._init()}function a(t,o){var i=!0;return e.each(t,function(e,n){if(void 0===o[e]||t[e]!==o[e])return i=!1,!1}),i}n.prototype={_init:function(){var t=this;if(o.querySelector){var i=null;void 0===t.$el.data("tooltipster-initialTitle")&&(void 0===(i=t.$el.attr("title"))&&(i=null),t.$el.data("tooltipster-initialTitle",i)),null!==t.options.content?t._content_set(t.options.content):t._content_set(i);var n=t.options.functionInit.call(t.$el,t.$el,t.Content);void 0!==n&&t._content_set(n),t.$el.removeAttr("title").addClass("tooltipstered"),!r&&t.options.iconDesktop||r&&t.options.iconTouch?("string"==typeof t.options.icon?(t.$elProxy=e('<span class="'+t.options.iconTheme+'"></span>'),t.$elProxy.text(t.options.icon)):t.options.iconCloning?t.$elProxy=t.options.icon.clone(!0):t.$elProxy=t.options.icon,t.$elProxy.insertAfter(t.$el)):t.$elProxy=t.$el,"hover"==t.options.trigger?(t.$elProxy.on("mouseenter."+t.namespace,function(){l()&&!t.options.touchDevices||(t.mouseIsOverProxy=!0,t._show())}).on("mouseleave."+t.namespace,function(){l()&&!t.options.touchDevices||(t.mouseIsOverProxy=!1)}),r&&t.options.touchDevices&&t.$elProxy.on("touchstart."+t.namespace,function(){t._showNow()})):"click"==t.options.trigger&&t.$elProxy.on("click."+t.namespace,function(){l()&&!t.options.touchDevices||t._show()})}},_show:function(){var e=this;"shown"!=e.Status&&"appearing"!=e.Status&&(e.options.delay?e.timerShow=setTimeout(function(){("click"==e.options.trigger||"hover"==e.options.trigger&&e.mouseIsOverProxy)&&e._showNow()},e.options.delay):e._showNow())},_showNow:function(o){var i=this;i.options.functionBefore.call(i.$el,i.$el,function(){if(i.enabled&&null!==i.Content){o&&i.callbacks.show.push(o),i.callbacks.hide=[],clearTimeout(i.timerShow),i.timerShow=null,clearTimeout(i.timerHide),i.timerHide=null,i.options.onlyOne&&e(".tooltipstered").not(i.$el).each(function(t,o){var i=e(o),n=i.data("tooltipster-ns");e.each(n,function(e,t){var o=i.data(t),n=o.status(),a=o.option("autoClose");"hidden"!==n&&"disappearing"!==n&&a&&o.hide()})});var n=function(){i.Status="shown",e.each(i.callbacks.show,function(e,t){t.call(i.$el)}),i.callbacks.show=[]};if("hidden"!==i.Status){var a=0;"disappearing"===i.Status?(i.Status="appearing",c()?(i.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+i.options.animation+"-show"),i.options.speed>0&&i.$tooltip.delay(i.options.speed),i.$tooltip.queue(n)):i.$tooltip.stop().fadeIn(n)):"shown"===i.Status&&n()}else{i.Status="appearing";a=i.options.speed;i.bodyOverflowX=e("body").css("overflow-x"),e("body").css("overflow-x","hidden");var s="tooltipster-"+i.options.animation,l="-webkit-transition-duration: "+i.options.speed+"ms; -webkit-animation-duration: "+i.options.speed+"ms; -moz-transition-duration: "+i.options.speed+"ms; -moz-animation-duration: "+i.options.speed+"ms; -o-transition-duration: "+i.options.speed+"ms; -o-animation-duration: "+i.options.speed+"ms; -ms-transition-duration: "+i.options.speed+"ms; -ms-animation-duration: "+i.options.speed+"ms; transition-duration: "+i.options.speed+"ms; animation-duration: "+i.options.speed+"ms;",u=i.options.minWidth?"min-width:"+Math.round(i.options.minWidth)+"px;":"",d=i.options.maxWidth?"max-width:"+Math.round(i.options.maxWidth)+"px;":"",p=i.options.interactive?"pointer-events: auto;":"";if(i.$tooltip=e('<div class="tooltipster-base '+i.options.theme+'" style="'+u+" "+d+" "+p+" "+l+'"><div class="tooltipster-content"></div></div>'),c()&&i.$tooltip.addClass(s),i._content_insert(),i.$tooltip.appendTo("body"),i.reposition(),i.options.functionReady.call(i.$el,i.$el,i.$tooltip),c()?(i.$tooltip.addClass(s+"-show"),i.options.speed>0&&i.$tooltip.delay(i.options.speed),i.$tooltip.queue(n)):i.$tooltip.css("display","none").fadeIn(i.options.speed,n),i._interval_set(),e(t).on("scroll."+i.namespace+" resize."+i.namespace,function(){i.reposition()}),i.options.autoClose)if(e("body").off("."+i.namespace),"hover"==i.options.trigger){if(r&&setTimeout(function(){e("body").on("touchstart."+i.namespace,function(){i.hide()})},0),i.options.interactive){r&&i.$tooltip.on("touchstart."+i.namespace,function(e){e.stopPropagation()});var h=null;i.$elProxy.add(i.$tooltip).on("mouseleave."+i.namespace+"-autoClose",function(){clearTimeout(h),h=setTimeout(function(){i.hide()},i.options.interactiveTolerance)}).on("mouseenter."+i.namespace+"-autoClose",function(){clearTimeout(h)})}else i.$elProxy.on("mouseleave."+i.namespace+"-autoClose",function(){i.hide()});i.options.hideOnClick&&i.$elProxy.on("click."+i.namespace+"-autoClose",function(){i.hide()})}else"click"==i.options.trigger&&(setTimeout(function(){e("body").on("click."+i.namespace+" touchstart."+i.namespace,function(){i.hide()})},0),i.options.interactive&&i.$tooltip.on("click."+i.namespace+" touchstart."+i.namespace,function(e){e.stopPropagation()}))}i.options.timer>0&&(i.timerHide=setTimeout(function(){i.timerHide=null,i.hide()},i.options.timer+a))}})},_interval_set:function(){var t=this;t.checkInterval=setInterval(function(){if(0===e("body").find(t.$el).length||0===e("body").find(t.$elProxy).length||"hidden"==t.Status||0===e("body").find(t.$tooltip).length)"shown"!=t.Status&&"appearing"!=t.Status||t.hide(),t._interval_cancel();else if(t.options.positionTracker){var o=t._repositionInfo(t.$elProxy),i=!1;a(o.dimension,t.elProxyPosition.dimension)&&("fixed"===t.$elProxy.css("position")?a(o.position,t.elProxyPosition.position)&&(i=!0):a(o.offset,t.elProxyPosition.offset)&&(i=!0)),i||(t.reposition(),t.options.positionTrackerCallback.call(t,t.$el))}},200)},_interval_cancel:function(){clearInterval(this.checkInterval),this.checkInterval=null},_content_set:function(e){"object"==typeof e&&null!==e&&this.options.contentCloning&&(e=e.clone(!0)),this.Content=e},_content_insert:function(){var e=this.$tooltip.find(".tooltipster-content");"string"!=typeof this.Content||this.options.contentAsHTML?e.empty().append(this.Content):e.text(this.Content)},_update:function(e){var t=this;t._content_set(e),null!==t.Content?"hidden"!==t.Status&&(t._content_insert(),t.reposition(),t.options.updateAnimation&&(c()?(t.$tooltip.css({width:"","-webkit-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=t.Status&&(t.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==t.Status&&t.$tooltip.css({"-webkit-transition":t.options.speed+"ms","-moz-transition":t.options.speed+"ms","-o-transition":t.options.speed+"ms","-ms-transition":t.options.speed+"ms",transition:t.options.speed+"ms"})},t.options.speed))},t.options.speed)):t.$tooltip.fadeTo(t.options.speed,.5,function(){"hidden"!=t.Status&&t.$tooltip.fadeTo(t.options.speed,1)}))):t.hide()},_repositionInfo:function(e){return{dimension:{height:e.outerHeight(!1),width:e.outerWidth(!1)},offset:e.offset(),position:{left:parseInt(e.css("left")),top:parseInt(e.css("top"))}}},hide:function(o){var i=this;o&&i.callbacks.hide.push(o),i.callbacks.show=[],clearTimeout(i.timerShow),i.timerShow=null,clearTimeout(i.timerHide),i.timerHide=null;var n=function(){e.each(i.callbacks.hide,function(e,t){t.call(i.$el)}),i.callbacks.hide=[]};if("shown"==i.Status||"appearing"==i.Status){i.Status="disappearing";var a=function(){i.Status="hidden","object"==typeof i.Content&&null!==i.Content&&i.Content.detach(),i.$tooltip.remove(),i.$tooltip=null,e(t).off("."+i.namespace),e("body").off("."+i.namespace).css("overflow-x",i.bodyOverflowX),e("body").off("."+i.namespace),i.$elProxy.off("."+i.namespace+"-autoClose"),i.options.functionAfter.call(i.$el,i.$el),n()};c()?(i.$tooltip.clearQueue().removeClass("tooltipster-"+i.options.animation+"-show").addClass("tooltipster-dying"),i.options.speed>0&&i.$tooltip.delay(i.options.speed),i.$tooltip.queue(a)):i.$tooltip.stop().fadeOut(i.options.speed,a)}else"hidden"==i.Status&&n();return i},show:function(e){return this._showNow(e),this},update:function(e){return this.content(e)},content:function(e){return void 0===e?this.Content:(this._update(e),this)},reposition:function(){if(0!==e("body").find(this.$tooltip).length){this.$tooltip.css("width",""),this.elProxyPosition=this._repositionInfo(this.$elProxy);var o=null,i=e(t).width(),n=this.elProxyPosition,a=this.$tooltip.outerWidth(!1),r=(this.$tooltip.innerWidth(),this.$tooltip.outerHeight(!1));if(this.$elProxy.is("area")){var s=this.$elProxy.attr("shape"),l=this.$elProxy.parent().attr("name"),c=e('img[usemap="#'+l+'"]'),u=c.offset().left,d=c.offset().top,p=void 0!==this.$elProxy.attr("coords")?this.$elProxy.attr("coords").split(","):void 0;if("circle"==s){var h=parseInt(p[0]),f=parseInt(p[1]),g=parseInt(p[2]);n.dimension.height=2*g,n.dimension.width=2*g,n.offset.top=d+f-g,n.offset.left=u+h-g}else if("rect"==s){h=parseInt(p[0]),f=parseInt(p[1]);var m=parseInt(p[2]),v=parseInt(p[3]);n.dimension.height=v-f,n.dimension.width=m-h,n.offset.top=d+f,n.offset.left=u+h}else if("poly"==s){for(var w=0,y=0,b=0,k=0,x="even",S=0;S<p.length;S++){var $=parseInt(p[S]);"even"==x?($>b&&(b=$,0===S&&(w=b)),$<w&&(w=$),x="odd"):($>k&&(k=$,1==S&&(y=k)),$<y&&(y=$),x="even")}n.dimension.height=k-y,n.dimension.width=b-w,n.offset.top=d+y,n.offset.left=u+w}else n.dimension.height=c.outerHeight(!1),n.dimension.width=c.outerWidth(!1),n.offset.top=d,n.offset.left=u}var C=0,T=0,_=0,D=parseInt(this.options.offsetY),I=parseInt(this.options.offsetX),P=this.options.position;function E(){var n=e(t).scrollLeft();C-n<0&&(o=C-n,C=n),C+a-n>i&&(o=C-(i+n-a),C=i+n-a)}function A(o,i){n.offset.top-e(t).scrollTop()-r-D-12<0&&i.indexOf("top")>-1&&(P=o),n.offset.top+n.dimension.height+r+12+D>e(t).scrollTop()+e(t).height()&&i.indexOf("bottom")>-1&&(P=o,_=n.offset.top-r-D-12)}if("top"==P){var M=n.offset.left+a-(n.offset.left+n.dimension.width);C=n.offset.left+I-M/2,_=n.offset.top-r-D-12,E(),A("bottom","top")}if("top-left"==P&&(C=n.offset.left+I,_=n.offset.top-r-D-12,E(),A("bottom-left","top-left")),"top-right"==P&&(C=n.offset.left+n.dimension.width+I-a,_=n.offset.top-r-D-12,E(),A("bottom-right","top-right")),"bottom"==P){M=n.offset.left+a-(n.offset.left+n.dimension.width);C=n.offset.left-M/2+I,_=n.offset.top+n.dimension.height+D+12,E(),A("top","bottom")}if("bottom-left"==P&&(C=n.offset.left+I,_=n.offset.top+n.dimension.height+D+12,E(),A("top-left","bottom-left")),"bottom-right"==P&&(C=n.offset.left+n.dimension.width+I-a,_=n.offset.top+n.dimension.height+D+12,E(),A("top-right","bottom-right")),"left"==P){C=n.offset.left-I-a-12,T=n.offset.left+I+n.dimension.width+12;var z=n.offset.top+r-(n.offset.top+n.dimension.height);if(_=n.offset.top-z/2-D,C<0&&T+a>i){var L=2*parseFloat(this.$tooltip.css("border-width")),O=a+C-L;this.$tooltip.css("width",O+"px"),r=this.$tooltip.outerHeight(!1),C=n.offset.left-I-O-12-L,z=n.offset.top+r-(n.offset.top+n.dimension.height),_=n.offset.top-z/2-D}else C<0&&(C=n.offset.left+I+n.dimension.width+12,o="left")}if("right"==P){C=n.offset.left+I+n.dimension.width+12,T=n.offset.left-I-a-12;z=n.offset.top+r-(n.offset.top+n.dimension.height);if(_=n.offset.top-z/2-D,C+a>i&&T<0){L=2*parseFloat(this.$tooltip.css("border-width")),O=i-C-L;this.$tooltip.css("width",O+"px"),r=this.$tooltip.outerHeight(!1),z=n.offset.top+r-(n.offset.top+n.dimension.height),_=n.offset.top-z/2-D}else C+a>i&&(C=n.offset.left-I-a-12,o="right")}if(this.options.arrow){var R="tooltipster-arrow-"+P;if(this.options.arrowColor.length<1)var F=this.$tooltip.css("background-color");else F=this.options.arrowColor;if(o?"left"==o?(R="tooltipster-arrow-right",o=""):"right"==o?(R="tooltipster-arrow-left",o=""):o="left:"+Math.round(o)+"px;":o="","top"==P||"top-left"==P||"top-right"==P)var N=parseFloat(this.$tooltip.css("border-bottom-width")),j=this.$tooltip.css("border-bottom-color");else if("bottom"==P||"bottom-left"==P||"bottom-right"==P)N=parseFloat(this.$tooltip.css("border-top-width")),j=this.$tooltip.css("border-top-color");else if("left"==P)N=parseFloat(this.$tooltip.css("border-right-width")),j=this.$tooltip.css("border-right-color");else if("right"==P)N=parseFloat(this.$tooltip.css("border-left-width")),j=this.$tooltip.css("border-left-color");else N=parseFloat(this.$tooltip.css("border-bottom-width")),j=this.$tooltip.css("border-bottom-color");N>1&&N++;var H="";if(0!==N){var U="",B="border-color: "+j+";";-1!==R.indexOf("bottom")?U="margin-top: -"+Math.round(N)+"px;":-1!==R.indexOf("top")?U="margin-bottom: -"+Math.round(N)+"px;":-1!==R.indexOf("left")?U="margin-right: -"+Math.round(N)+"px;":-1!==R.indexOf("right")&&(U="margin-left: -"+Math.round(N)+"px;"),H='<span class="tooltipster-arrow-border" style="'+U+" "+B+';"></span>'}this.$tooltip.find(".tooltipster-arrow").remove();var W='<div class="'+R+' tooltipster-arrow" style="'+o+'">'+H+'<span style="border-color:'+F+';"></span></div>';this.$tooltip.append(W)}this.$tooltip.css({top:Math.round(_)+"px",left:Math.round(C)+"px"})}return this},enable:function(){return this.enabled=!0,this},disable:function(){return this.hide(),this.enabled=!1,this},destroy:function(){var t=this;t.hide(),t.$el[0]!==t.$elProxy[0]&&t.$elProxy.remove(),t.$el.removeData(t.namespace).off("."+t.namespace);var o=t.$el.data("tooltipster-ns");if(1===o.length){var i=null;"previous"===t.options.restoration?i=t.$el.data("tooltipster-initialTitle"):"current"===t.options.restoration&&(i="string"==typeof t.Content?t.Content:e("<div></div>").append(t.Content).html()),i&&t.$el.attr("title",i),t.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else o=e.grep(o,function(e,o){return e!==t.namespace}),t.$el.data("tooltipster-ns",o);return t},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:void 0},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:void 0},option:function(e,t){return void 0===t?this.options[e]:(this.options[e]=t,this)},status:function(){return this.Status}},e.fn.tooltipster=function(){var t=arguments;if(0===this.length){if("string"==typeof t[0]){var o=!0;switch(t[0]){case"setDefaults":e.extend(i,t[1]);break;default:o=!1}return!!o||this}return this}if("string"==typeof t[0]){var a="#*$~&";return this.each(function(){var o=e(this).data("tooltipster-ns"),i=o?e(this).data(o[0]):null;if(!i)throw new Error("You called Tooltipster's \""+t[0]+'" method on an uninitialized element');if("function"!=typeof i[t[0]])throw new Error('Unknown method .tooltipster("'+t[0]+'")');var n=i[t[0]](t[1],t[2]);if(n!==i)return a=n,!1}),"#*$~&"!==a?a:this}var r=[],s=t[0]&&void 0!==t[0].multiple,l=s&&t[0].multiple||!s&&i.multiple,c=t[0]&&void 0!==t[0].debug,u=c&&t[0].debug||!c&&i.debug;return this.each(function(){var o=!1,i=e(this).data("tooltipster-ns"),a=null;i?l?o=!0:u&&console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.'):o=!0,o&&(a=new n(this,t[0]),i||(i=[]),i.push(a.namespace),e(this).data("tooltipster-ns",i),e(this).data(a.namespace,a)),r.push(a)}),l?r:this};var r=!!("ontouchstart"in t),s=!1;function l(){return!s&&r}function c(){var e=(o.body||o.documentElement).style,t="transition";if("string"==typeof e[t])return!0;v=["Moz","Webkit","Khtml","O","ms"],t=t.charAt(0).toUpperCase()+t.substr(1);for(var i=0;i<v.length;i++)if("string"==typeof e[v[i]+t])return!0;return!1}e("body").one("mousemove",function(){s=!0})}(jQuery,window,document),function(e){var t=function(t){this.origHtmlMargin=parseFloat(e("html").css("margin-top")),this.options=e.extend({},e.smartbanner.defaults,t);var o=navigator.standalone,i=navigator.userAgent;if(this.options.force?this.type=this.options.force:null!=i.match(/Windows Phone 8/i)&&null!==i.match(/Touch/i)?this.type="windows":null!=i.match(/iPhone|iPod/i)||i.match(/iPad/)&&this.options.iOSUniversalApp?null!=i.match(/Safari/i)&&(null!=i.match(/CriOS/i)||window.Number(i.substr(i.indexOf("OS ")+3,3).replace("_","."))<6)&&(this.type="ios"):i.match(/\bSilk\/(.*\bMobile Safari\b)?/)||i.match(/\bKF\w/)||i.match("Kindle Fire")?this.type="kindle":null!=i.match(/Android/i)&&(this.type="android"),this.type&&!o&&!this.getCookie("sb-closed")&&!this.getCookie("sb-installed")){this.scale="auto"==this.options.scale?e(window).width()/window.screen.width:this.options.scale,this.scale<1&&(this.scale=1);var n=e("android"==this.type?'meta[name="google-play-app"]':"ios"==this.type?'meta[name="apple-itunes-app"]':"kindle"==this.type?'meta[name="kindle-fire-app"]':'meta[name="msApplication-ID"]');if(0!=n.length){if("windows"==this.type)this.appId=e('meta[name="msApplication-PackageFamilyName"]').attr("content");else{var a=/app-id=([^\s,]+)/.exec(n.attr("content"));if(!a)return;this.appId=a[1]}this.title=this.options.title?this.options.title:n.data("title")||e("title").text().replace(/\s*[|\-·].*$/,""),this.author=this.options.author?this.options.author:n.data("author")||(e('meta[name="author"]').length?e('meta[name="author"]').attr("content"):window.location.hostname),this.iconUrl=n.data("icon-url"),this.price=n.data("price"),this.create(),this.show(),this.listen()}}};t.prototype={constructor:t,create:function(){var t,o=this.options.url?this.options.url:("windows"==this.type?"ms-windows-store:navigate?appid=":"android"==this.type?"market://details?id=":"kindle"==this.type?"amzn://apps/android?asin=":"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id")+this.appId,i=this.price||this.options.price,n=i?i+" - "+("android"==this.type?this.options.inGooglePlay:"kindle"==this.type?this.options.inAmazonAppStore:"ios"==this.type?this.options.inAppStore:this.options.inWindowsStore):"",a=null===this.options.iconGloss?"ios"==this.type:this.options.iconGloss;"android"==this.type&&this.options.GooglePlayParams&&(o=o+"&referrer="+this.options.GooglePlayParams);var r='<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><a href="#" class="sb-close">&times;</a><span class="sb-icon"></span><div class="sb-info"><strong>'+this.title+"</strong><span>"+this.author+"</span><span>"+n+'</span></div><a href="'+o+'" class="sb-button"><span>'+this.options.button+"</span></a></div></div>";this.options.layer?e(this.options.appendToSelector).append(r):e(this.options.appendToSelector).prepend(r),this.options.icon?t=this.options.icon:this.iconUrl?t=this.iconUrl:e('link[rel="apple-touch-icon-precomposed"]').length>0?(t=e('link[rel="apple-touch-icon-precomposed"]').attr("href"),null===this.options.iconGloss&&(a=!1)):e('link[rel="apple-touch-icon"]').length>0?t=e('link[rel="apple-touch-icon"]').attr("href"):e('meta[name="msApplication-TileImage"]').length>0?t=e('meta[name="msApplication-TileImage"]').attr("content"):e('meta[name="msapplication-TileImage"]').length>0&&(t=e('meta[name="msapplication-TileImage"]').attr("content")),t?(e("#smartbanner .sb-icon").css("background-image","url("+t+")"),a&&e("#smartbanner .sb-icon").addClass("gloss")):e("#smartbanner").addClass("no-icon"),this.bannerHeight=e("#smartbanner").outerHeight()+2,this.scale>1&&(e("#smartbanner").css("top",parseFloat(e("#smartbanner").css("top"))*this.scale).css("height",parseFloat(e("#smartbanner").css("height"))*this.scale).hide(),e("#smartbanner .sb-container").css("-webkit-transform","scale("+this.scale+")").css("-msie-transform","scale("+this.scale+")").css("-moz-transform","scale("+this.scale+")").css("width",e(window).width()/this.scale)),e("#smartbanner").css("position",this.options.layer?"absolute":"static")},listen:function(){e("#smartbanner .sb-close").on("click",e.proxy(this.close,this)),e("#smartbanner .sb-button").on("click",e.proxy(this.install,this))},show:function(t){var o=e("#smartbanner");if(o.stop(),this.options.layer)o.animate({top:0,display:"block"},this.options.speedIn).addClass("shown").show(),e(this.pushSelector).animate({paddingTop:this.origHtmlMargin+this.bannerHeight*this.scale},this.options.speedIn,"swing",t);else if(e.support.transition){o.animate({top:0},this.options.speedIn).addClass("shown");e(this.pushSelector).addClass("sb-animation").one(e.support.transition.end,function(){e("html").removeClass("sb-animation"),t&&t()}).emulateTransitionEnd(this.options.speedIn).css("margin-top",this.origHtmlMargin+this.bannerHeight*this.scale)}else o.slideDown(this.options.speedIn).addClass("shown")},hide:function(t){var o=e("#smartbanner");if(o.stop(),this.options.layer)o.animate({top:-1*this.bannerHeight*this.scale,display:"block"},this.options.speedIn).removeClass("shown"),e(this.pushSelector).animate({paddingTop:this.origHtmlMargin},this.options.speedIn,"swing",t);else if(e.support.transition){"android"!==this.type?o.css("top",-1*this.bannerHeight*this.scale).removeClass("shown"):o.css({display:"none"}).removeClass("shown");e(this.pushSelector).addClass("sb-animation").one(e.support.transition.end,function(){e("html").removeClass("sb-animation"),t&&t()}).emulateTransitionEnd(this.options.speedOut).css("margin-top",this.origHtmlMargin)}else o.slideUp(this.options.speedOut).removeClass("shown")},close:function(e){e.preventDefault(),this.hide(),this.setCookie("sb-closed","true",this.options.daysHidden)},install:function(e){this.options.hideOnInstall&&this.hide(),this.setCookie("sb-installed","true",this.options.daysReminder)},setCookie:function(e,t,o){var i=new Date;i.setDate(i.getDate()+o),t=encodeURI(t)+(null==o?"":"; expires="+i.toUTCString()),document.cookie=e+"="+t+"; path=/;"},getCookie:function(e){var t,o,i,n=document.cookie.split(";");for(t=0;t<n.length;t++)if(o=n[t].substr(0,n[t].indexOf("=")),i=n[t].substr(n[t].indexOf("=")+1),(o=o.replace(/^\s+|\s+$/g,""))==e)return decodeURI(i);return null},switchType:function(){var t=this;this.hide(function(){t.type="android"==t.type?"ios":"android";var o=e("android"==t.type?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]').attr("content");t.appId=/app-id=([^\s,]+)/.exec(o)[1],e("#smartbanner").detach(),t.create(),t.show()})}},e.smartbanner=function(o){var i=e(window),n=i.data("smartbanner"),a="object"==typeof o&&o;n||i.data("smartbanner",n=new t(a)),"string"==typeof o&&n[o]()},e.smartbanner.defaults={title:null,author:null,price:"FREE",appStoreLanguage:"us",inAppStore:"On the App Store",inGooglePlay:"In Google Play",inAmazonAppStore:"In the Amazon Appstore",inWindowsStore:"In the Windows Store",GooglePlayParams:null,icon:null,iconGloss:null,button:"VIEW",url:null,scale:"auto",speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null,hideOnInstall:!0,layer:!1,iOSUniversalApp:!0,appendToSelector:"body",pushSelector:"html"},e.smartbanner.Constructor=t,void 0===e.support.transition&&(e.fn.emulateTransitionEnd=function(t){var o=!1,i=this;e(this).one(e.support.transition.end,function(){o=!0});return setTimeout(function(){o||e(i).trigger(e.support.transition.end)},t),this},e(function(){e.support.transition=function(){var e=document.createElement("smartbanner"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var o in t)if(void 0!==e.style[o])return{end:t[o]};return!1}()}))}(window.jQuery),function(){"use strict";function e(t,i){var n;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=t,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!e.notNeeded(t)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],r=0,s=a.length;r<s;r++)this[a[r]]=l(this[a[r]],this);o&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,o,i){var n=Node.prototype.removeEventListener;"click"===e?n.call(t,e,o.hijacked||o,i):n.call(t,e,o,i)},t.addEventListener=function(e,o,i){var n=Node.prototype.addEventListener;"click"===e?n.call(t,e,o.hijacked||(o.hijacked=function(e){e.propagationStopped||o(e)}),i):n.call(t,e,o,i)}),"function"==typeof t.onclick&&(n=t.onclick,t.addEventListener("click",function(e){n(e)},!1),t.onclick=null)}function l(e,t){return function(){return e.apply(t,arguments)}}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,o=navigator.userAgent.indexOf("Android")>0&&!t,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,n=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),a=i&&/OS [6-7]_\d/.test(navigator.userAgent),r=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(i&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!o;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var o,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],(o=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),o.forwardedTouchEvent=!0,e.dispatchEvent(o)},e.prototype.determineEventType=function(e){return o&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;i&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,o;if(!(t=e.fastClickScrollParent)||!t.contains(e)){o=e;do{if(o.scrollHeight>o.offsetHeight){t=o,e.fastClickScrollParent=o;break}o=o.parentElement}while(o)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,o,a;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),o=e.targetTouches[0],i){if((a=window.getSelection()).rangeCount&&!a.isCollapsed)return!0;if(!n){if(o.identifier&&o.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=o.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=o.pageX,this.touchStartY=o.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],o=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>o||Math.abs(t.pageY-this.touchStartY)>o},e.prototype.onTouchMove=function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,r,s,l,c,u=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,r=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,a&&(c=e.changedTouches[0],(u=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||u).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(s=u.tagName.toLowerCase())){if(t=this.findControl(u)){if(this.focus(u),o)return!1;u=t}}else if(this.needsFocus(u))return e.timeStamp-r>100||i&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,e),i&&"select"===s||(this.targetElement=null,e.preventDefault()),!1);return!(!i||n||!(l=u.fastClickScrollParent)||l.fastClickLastScrollTop===l.scrollTop)||(this.needsClick(u)||(e.preventDefault(),this.sendClick(u,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||((t=this.onMouse(e))||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;o&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,i,n;if(void 0===window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!o)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(r&&(n=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]>=10&&n[2]>=3&&(t=document.querySelector("meta[name=viewport]"))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"none"===e.style.touchAction},e.attach=function(t,o){return new e(t,o)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):void 0!==module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),function(e,t,o){"use strict";var i=t.module("ngRoute",["ng"]).provider("$route",function(){function e(e,o){return t.extend(Object.create(e),o)}var o={};function i(e,t){var o=t.caseInsensitiveMatch,i={originalPath:e,regexp:e},n=i.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(e,t,o,i){var a="?"===i?i:null,r="*"===i?i:null;return n.push({name:o,optional:!!a}),t=t||"",(a?"":t)+"(?:"+(a?t:"")+(r?"(.+?)":"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1"),i.regexp=new RegExp("^"+e+"$",o?"i":""),i}this.when=function(e,n){var a=t.copy(n);if(t.isUndefined(a.reloadOnSearch)&&(a.reloadOnSearch=!0),t.isUndefined(a.caseInsensitiveMatch)&&(a.caseInsensitiveMatch=this.caseInsensitiveMatch),o[e]=t.extend(a,e&&i(e,a)),e){var r="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/";o[r]=t.extend({redirectTo:e},i(r,a))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(i,a,r,s,l,c,u){var d,p,h=!1,f={routes:o,reload:function(){h=!0,i.$evalAsync(function(){g(),m()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw n("norout","Tried updating route when with no current route");e=t.extend({},this.current.params,e),a.path(v(this.current.$$route.originalPath,e)),a.search(e)}};return i.$on("$locationChangeStart",g),i.$on("$locationChangeSuccess",m),f;function g(n){var r,s,l=f.current;t.forEach(o,function(o,i){!s&&(r=function(e,t){var o=t.keys,i={};if(!t.regexp)return null;var n=t.regexp.exec(e);if(!n)return null;for(var a=1,r=n.length;a<r;++a){var s=o[a-1],l=n[a];s&&l&&(i[s.name]=l)}return i}(a.path(),o))&&((s=e(o,{params:t.extend({},a.search(),r),pathParams:r})).$$route=o)}),d=s||o.null&&e(o.null,{params:{},pathParams:{}}),(p=d&&l&&d.$$route===l.$$route&&t.equals(d.pathParams,l.pathParams)&&!d.reloadOnSearch&&!h)||!l&&!d||i.$broadcast("$routeChangeStart",d,l).defaultPrevented&&n&&n.preventDefault()}function m(){var e=f.current,o=d;p?(e.params=o.params,t.copy(e.params,r),i.$broadcast("$routeUpdate",e)):(o||e)&&(h=!1,f.current=o,o&&o.redirectTo&&(t.isString(o.redirectTo)?a.path(v(o.redirectTo,o.params)).search(o.params).replace():a.url(o.redirectTo(o.pathParams,a.path(),a.search())).replace()),s.when(o).then(function(){if(o){var e,i,n=t.extend({},o.resolve);return t.forEach(n,function(e,o){n[o]=t.isString(e)?l.get(e):l.invoke(e,null,null,o)}),t.isDefined(e=o.template)?t.isFunction(e)&&(e=e(o.params)):t.isDefined(i=o.templateUrl)&&(t.isFunction(i)&&(i=i(o.params)),i=u.getTrustedResourceUrl(i),t.isDefined(i)&&(o.loadedTemplateUrl=i,e=c(i))),t.isDefined(e)&&(n.$template=e),s.all(n)}}).then(function(n){o==f.current&&(o&&(o.locals=n,t.copy(o.params,r)),i.$broadcast("$routeChangeSuccess",o,e))},function(t){o==f.current&&i.$broadcast("$routeChangeError",o,e,t)}))}function v(e,o){var i=[];return t.forEach((e||"").split(":"),function(e,t){if(0===t)i.push(e);else{var n=e.match(/(\w+)(?:[?*])?(.*)/),a=n[1];i.push(o[a]),i.push(n[2]||""),delete o[a]}}),i.join("")}}]}),n=t.$$minErr("ngRoute");function a(e,o,i){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(n,a,r,s,l){var c,u,d,p=r.autoscroll,h=r.onload||"";function f(){d&&(i.cancel(d),d=null),c&&(c.$destroy(),c=null),u&&((d=i.leave(u)).then(function(){d=null}),u=null)}function g(){var r=e.current&&e.current.locals,s=r&&r.$template;if(t.isDefined(s)){var d=n.$new(),g=e.current,m=l(d,function(e){i.enter(e,null,u||a).then(function(){!t.isDefined(p)||p&&!n.$eval(p)||o()}),f()});u=m,(c=g.scope=d).$emit("$viewContentLoaded"),c.$eval(h)}else f()}n.$on("$routeChangeSuccess",g),g()}}}function r(e,t,o){return{restrict:"ECA",priority:-400,link:function(i,n){var a=o.current,r=a.locals;n.html(r.$template);var s=e(n.contents());if(a.controller){r.$scope=i;var l=t(a.controller,r);a.controllerAs&&(i[a.controllerAs]=l),n.data("$ngControllerController",l),n.children().data("$ngControllerController",l)}s(i)}}}i.provider("$routeParams",function(){this.$get=function(){return{}}}),i.directive("ngView",a),i.directive("ngView",r),a.$inject=["$route","$anchorScroll","$animate"],r.$inject=["$compile","$controller","$route"]}(window,window.angular),function(e,t,o){"use strict";t.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){return function(e,o,i){var n=i.ngAnimateChildren;t.isString(n)&&0===n.length?o.data("$$ngAnimateChildren",!0):e.$watch(n,function(e){o.data("$$ngAnimateChildren",!!e)})}}).factory("$$animateReflow",["$$rAF","$document",function(e,t){var o=t[0].body;return function(t){return e(function(){o.offsetWidth;t()})}}]).config(["$provide","$animateProvider",function(o,i){var n,a=t.noop,r=t.forEach,s=i.$$selectors,l=t.isArray,c=t.isString,u=t.isObject,d=1,p="$$ngAnimateState",h="$$ngAnimateChildren",f="ng-animate",g={running:!0};function m(e){for(var t=0;t<e.length;t++){var o=e[t];if(o.nodeType==d)return o}}function v(e){return e&&t.element(e)}function w(e){return t.element(m(e))}function y(e,t){return m(e)==m(t)}o.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(e,o,d,b,k,x,S,$,C,T){n=T,k.data(p,g);var _=S.$watch(function(){return C.totalPendingRequests},function(e,t){0===e&&(_(),S.$$postDigest(function(){S.$$postDigest(function(){g.running=!1})}))}),D=0,I=i.classNameFilter(),P=I?function(e){return I.test(e)}:function(){return!0};function E(e,t){var o=e.data(p)||{};return t&&(o.running=!0,o.structural=!0,e.data(p,o)),o.disabled||o.running&&o.structural}function A(e){var t,i=o.defer();return i.promise.$$cancelFn=function(){t&&t()},S.$$postDigest(function(){t=e(function(){i.resolve()})}),i.promise}function M(e){if(u(e))return e.tempClasses&&c(e.tempClasses)&&(e.tempClasses=e.tempClasses.split(/\s+/)),e}function z(e,o,i,n){var c=e[0];if(c){var u,p;n&&(n.to=n.to||{},n.from=n.from||{}),l(i)&&(u=i[0],p=i[1],u?p?i=u+" "+p:(i=u,o="addClass"):(i=p,o="removeClass"));var h="setClass"==o,f=h||"addClass"==o||"removeClass"==o||"animate"==o,g=e.attr("class")+" "+i;if(P(g)){var m=a,v=[],w=[],y=a,k=[],x=[],S=(" "+g).replace(/\s+/g,".");return r(function(e){if(e){var t=[],o={},i=e.substr(1).split(".");(b.transitions||b.animations)&&t.push(d.get(s[""]));for(var n=0;n<i.length;n++){var a=i[n],r=s[a];r&&!o[a]&&(t.push(d.get(r)),o[a]=!0)}return t}}(S),function(e){!$(e,o)&&h&&($(e,"addClass"),$(e,"removeClass"))}),{node:c,event:o,className:i,isClassBased:f,isSetClassOperation:h,applyStyles:function(){n&&e.css(t.extend(n.from||{},n.to||{}))},before:function(e){m=e,C(w,v,function(){m=a,e()})},after:function(e){y=e,C(x,k,function(){y=a,e()})},cancel:function(){v&&(r(v,function(e){(e||a)(!0)}),m(!0)),k&&(r(k,function(e){(e||a)(!0)}),y(!0))}}}}function $(e,t){var o=e[t],i=e["before"+t.charAt(0).toUpperCase()+t.substr(1)];if(o||i)return"leave"==t&&(i=o,o=null),x.push({event:t,fn:o}),w.push({event:t,fn:i}),!0}function C(t,o,s){var l=[];r(t,function(e){e.fn&&l.push(e)});var c=0;r(l,function(t,r){var d=function(){!function(e){if(o){if((o[e]||a)(),++c<l.length)return;o=null}s()}(r)};switch(t.event){case"setClass":o.push(t.fn(e,u,p,d,n));break;case"animate":o.push(t.fn(e,i,n.from,n.to,d));break;case"addClass":o.push(t.fn(e,u||i,d,n));break;case"removeClass":o.push(t.fn(e,p||i,d,n));break;default:o.push(t.fn(e,d,n))}}),o&&0===o.length&&s()}}return{animate:function(e,t,o,i,n){return i=i||"ng-inline-animate",(n=M(n)||{}).from=o?t:null,n.to=o||t,A(function(t){return L("animate",i,w(e),null,null,a,n,t)})},enter:function(o,i,n,r){return r=M(r),o=t.element(o),i=v(i),n=v(n),E(o,!0),e.enter(o,i,n),A(function(e){return L("enter","ng-enter",w(o),i,n,a,r,e)})},leave:function(o,i){return i=M(i),O(o=t.element(o)),E(o,!0),A(function(t){return L("leave","ng-leave",w(o),null,null,function(){e.leave(o)},i,t)})},move:function(o,i,n,r){return r=M(r),o=t.element(o),i=v(i),n=v(n),O(o),E(o,!0),e.move(o,i,n),A(function(e){return L("move","ng-move",w(o),i,n,a,r,e)})},addClass:function(e,t,o){return this.setClass(e,t,[],o)},removeClass:function(e,t,o){return this.setClass(e,[],t,o)},setClass:function(o,i,n,a){a=M(a);if(E(o=w(o=t.element(o))))return e.$$setClassImmediately(o,i,n,a);var s,c=o.data("$$animateClasses"),u=!!c;return c||((c={}).classes={}),s=c.classes,i=l(i)?i:i.split(" "),r(i,function(e){e&&e.length&&(s[e]=!0)}),n=l(n)?n:n.split(" "),r(n,function(e){e&&e.length&&(s[e]=!1)}),u?(a&&c.options&&(c.options=t.extend(c.options||{},a)),c.promise):(o.data("$$animateClasses",c={classes:s,options:a}),c.promise=A(function(t){var i=o.parent(),n=m(o),a=n.parentNode;if(a&&!a.$$NG_REMOVED&&!n.$$NG_REMOVED){var s=o.data("$$animateClasses");o.removeData("$$animateClasses");var l=o.data(p)||{},c=function(e,t,o){var i={};r(o=o||{},function(e,t){r(t.split(" "),function(t){i[t]=e})});var n=Object.create(null);r((e.attr("class")||"").split(/\s+/),function(e){n[e]=!0});var a=[],s=[];return r(t&&t.classes||[],function(e,t){var o=n[t],r=i[t]||{};!1===e?(o||"addClass"==r.event)&&s.push(t):!0===e&&(o&&"removeClass"!=r.event||a.push(t))}),a.length+s.length>0&&[a.join(" "),s.join(" ")]}(o,s,l.active);return c?L("setClass",c,o,i,null,function(){c[0]&&e.$$addClassImmediately(o,c[0]),c[1]&&e.$$removeClassImmediately(o,c[1])},s.options,t):t()}t()}))},cancel:function(e){e.$$cancelFn()},enabled:function(e,t){switch(arguments.length){case 2:if(e)R(t);else{var o=t.data(p)||{};o.disabled=!0,t.data(p,o)}break;case 1:g.disabled=!e;break;default:e=!g.disabled}return!!e}};function L(e,o,i,s,l,c,u,d){var m=a,v=z(i,e,o,u);if(!v)return F(),M(),L(),N(),m;e=v.event,o=v.className;var w=t.element._data(v.node);if(w=w&&w.events,s||(s=l?l.parent():i.parent()),function(e,o){if(g.disabled)return!0;if(y(e,k))return g.running;var i,n,a;do{if(0===o.length)break;var r=y(o,k),s=r?g:o.data(p)||{};if(s.disabled)return!0;if(r&&(a=!0),!1!==i){var l=o.data(h);t.isDefined(l)&&(i=l)}n=n||s.running||s.last&&!s.last.isClassBased}while(o=o.parent());return!a||!i&&n}(i,s))return F(),M(),L(),N(),m;var b=i.data(p)||{},S=b.active||{},$=b.totalActive||0,C=b.last,T=!1;if($>0){var _=[];if(v.isClassBased){if("setClass"==C.event)_.push(C),R(i,o);else if(S[o]){var I=S[o];I.event==e?T=!0:(_.push(I),R(i,o))}}else if("leave"==e&&S["ng-leave"])T=!0;else{for(var P in S)_.push(S[P]);b={},R(i,!0)}_.length>0&&r(_,function(e){e.cancel()})}if(!v.isClassBased||v.isSetClassOperation||"animate"==e||T||(T="addClass"==e==i.hasClass(o)),T)return F(),M(),L(),O(),m;S=b.active||{},$=b.totalActive||0,"leave"==e&&i.one("$destroy",function(e){var o=t.element(this),i=o.data(p);if(i){var n=i.active["ng-leave"];n&&(n.cancel(),R(o,"ng-leave"))}}),n.addClass(i,f),u&&u.tempClasses&&r(u.tempClasses,function(e){n.addClass(i,e)});var E=D++;return $++,S[o]=v,i.data(p,{last:v,active:S,index:E,totalActive:$}),M(),v.before(function(t){var n=i.data(p);t=t||!n||!n.active[o]||v.isClassBased&&n.active[o].event!=e,F(),!0===t?N():(L(),v.after(N))}),v.cancel;function A(t){var n="$animate:"+t;w&&w[n]&&w[n].length>0&&x(function(){i.triggerHandler(n,{event:e,className:o})})}function M(){A("before")}function L(){A("after")}function O(){A("close"),d()}function F(){F.hasBeenRun||(F.hasBeenRun=!0,c())}function N(){if(!N.hasBeenRun){v&&v.applyStyles(),N.hasBeenRun=!0,u&&u.tempClasses&&r(u.tempClasses,function(e){n.removeClass(i,e)});var e=i.data(p);e&&(v&&v.isClassBased?R(i,o):(x(function(){var e=i.data(p)||{};E==e.index&&R(i,o)}),i.data(p,e))),O()}}}function O(e){var o=m(e);if(o){var i=t.isFunction(o.getElementsByClassName)?o.getElementsByClassName(f):o.querySelectorAll("."+f);r(i,function(e){var o=(e=t.element(e)).data(p);o&&o.active&&r(o.active,function(e){e.cancel()})})}}function R(e,t){if(y(e,k))g.disabled||(g.running=!1,g.structural=!1);else if(t){var o=e.data(p)||{},i=!0===t;!i&&o.active&&o.active[t]&&(o.totalActive--,delete o.active[t]),!i&&o.totalActive||(n.removeClass(e,f),e.removeData(p))}}}]),i.register("",["$window","$sniffer","$timeout","$$animateReflow",function(o,i,s,u){var p,h,f,g,v="";void 0===e.ontransitionend&&void 0!==e.onwebkittransitionend?(v="-webkit-",p="WebkitTransition",h="webkitTransitionEnd transitionend"):(p="transition",h="transitionend"),void 0===e.onanimationend&&void 0!==e.onwebkitanimationend?(v="-webkit-",f="WebkitAnimation",g="webkitAnimationEnd animationend"):(f="animation",g="animationend");var w,y="Duration",b="Property",k="Delay",x="IterationCount",S="PlayState",$="$$ngAnimateKey",C="$$ngAnimateCSS3Data",T=3,_=1.5,D=1e3,I={},P=0,E=[];function A(){w||(w=u(function(){E=[],w=null,I={}}))}function M(e,t){w&&w(),E.push(t),w=u(function(){r(E,function(e){e()}),E=[],w=null,I={}})}var z=null,L=0,O=[];function R(e,o){var i=m(e);e=t.element(i),O.push(e);var n=Date.now()+o;n<=L||(s.cancel(z),L=n,z=s(function(){r(O,function(e){var t=e.data(C);t&&r(t.closeAnimationFns,function(e){e()})}),O=[]},o,!1))}function F(e,t){var i=t?I[t]:null;if(!i){var n=0,a=0,s=0,l=0;r(e,function(e){if(e.nodeType==d){var t=o.getComputedStyle(e)||{},i=t[p+y];n=Math.max(N(i),n);var r=t[p+k];a=Math.max(N(r),a);t[f+k];l=Math.max(N(t[f+k]),l);var c=N(t[f+y]);c>0&&(c*=parseInt(t[f+x],10)||1),s=Math.max(c,s)}}),i={total:0,transitionDelay:a,transitionDuration:n,animationDelay:l,animationDuration:s},t&&(I[t]=i)}return i}function N(e){var t=0,o=c(e)?e.split(/\s*,\s*/):[];return r(o,function(e){t=Math.max(parseFloat(e)||0,t)}),t}function j(e,t,o,i){var a=["ng-enter","ng-leave","ng-move"].indexOf(o)>=0,r=function(e){var t=e.parent(),o=t.data($);return o||(t.data($,++P),o=P),o+"-"+m(e).getAttribute("class")}(t),s=r+" "+o,l=I[s]?++I[s].total:0,c={};if(l>0){var u=o+"-stagger",d=r+" "+u,p=!I[d];p&&n.addClass(t,u),c=F(t,d),p&&n.removeClass(t,u)}n.addClass(t,o);var h=t.data(C)||{},f=F(t,s),g=f.transitionDuration,v=f.animationDuration;if(a&&0===g&&0===v)return n.removeClass(t,o),!1;var w=i||a&&g>0,y=v>0&&c.animationDelay>0&&0===c.animationDuration,b=h.closeAnimationFns||[];t.data(C,{stagger:c,cacheKey:s,running:h.running||0,itemIndex:l,blockTransition:w,closeAnimationFns:b});var k=m(t);return w&&(H(k,!0),i&&t.css(i)),y&&U(k,!0),!0}function H(e,t){e.style[p+b]=t?"none":""}function U(e,t){e.style[f+S]=t?"paused":""}function B(e,t,o,i){if(j(0,t,o,i))return function(e){e&&V(t,o)}}function W(e,t,o,i,a){if(t.data(C))return function(e,t,o,i,a){var l=m(t),c=t.data(C);if(-1!=l.getAttribute("class").indexOf(o)&&c){var u="",d="";r(o.split(" "),function(e,t){var o=(t>0?" ":"")+e;u+=o+"-active",d+=o+"-pending"});var p=[],f=c.itemIndex,w=c.stagger,y=0;if(f>0){var b=0;w.transitionDelay>0&&0===w.transitionDuration&&(b=w.transitionDelay*f);var k=0;w.animationDelay>0&&0===w.animationDuration&&(k=w.animationDelay*f,p.push(v+"animation-play-state")),y=Math.round(100*Math.max(b,k))/100}y||(n.addClass(t,u),c.blockTransition&&H(l,!1));var x=c.cacheKey+" "+u,S=F(t,x),$=Math.max(S.transitionDuration,S.animationDuration);if(0===$)return n.removeClass(t,u),V(t,o),void i();!y&&a&&Object.keys(a).length>0&&(S.transitionDuration||(t.css("transition",S.animationDuration+"s linear all"),p.push("transition")),t.css(a));var I=Math.max(S.transitionDelay,S.animationDelay),P=I*D;if(p.length>0){var E=l.getAttribute("style")||"";";"!==E.charAt(E.length-1)&&(E+=";"),l.setAttribute("style",E+" ")}var A,M=Date.now(),z=g+" "+h,L=(y+(I+$)*_)*D;return y>0&&(n.addClass(t,d),A=s(function(){A=null,S.transitionDuration>0&&H(l,!1),S.animationDuration>0&&U(l,!1),n.addClass(t,u),n.removeClass(t,d),a&&(0===S.transitionDuration&&t.css("transition",S.animationDuration+"s linear all"),t.css(a),p.push("transition"))},y*D,!1)),t.on(z,N),c.closeAnimationFns.push(function(){O(),i()}),c.running++,R(t,L),O}function O(){t.off(z,N),n.removeClass(t,u),n.removeClass(t,d),A&&s.cancel(A),V(t,o);var e=m(t);for(var i in p)e.style.removeProperty(p[i])}function N(e){e.stopPropagation();var t=e.originalEvent||e,o=t.$manualTimeStamp||t.timeStamp||Date.now(),n=parseFloat(t.elapsedTime.toFixed(T));Math.max(o-M,0)>=P&&n>=$&&i()}i()}(0,t,o,i,a);V(t,o),i()}function q(e,t,o,i,n){var r=B(0,t,o,n.from);if(!r)return A(),void i();var s=r;return M(0,function(){s=W(0,t,o,i,n.to)}),function(e){(s||a)(e)}}function V(e,t){n.removeClass(e,t);var o=e.data(C);o&&(o.running&&o.running--,o.running&&0!==o.running||e.removeData(C))}return{animate:function(e,t,o,i,n,a){return(a=a||{}).from=o,a.to=i,q(0,e,t,n,a)},enter:function(e,t,o){return q(0,e,"ng-enter",t,o=o||{})},leave:function(e,t,o){return q(0,e,"ng-leave",t,o=o||{})},move:function(e,t,o){return q(0,e,"ng-move",t,o=o||{})},beforeSetClass:function(e,t,o,i,n){n=n||{};var a=B(0,e,J(o,"-remove")+" "+J(t,"-add"),n.from);if(a)return M(0,i),a;A(),i()},beforeAddClass:function(e,t,o,i){i=i||{};var n=B(0,e,J(t,"-add"),i.from);if(n)return M(0,o),n;A(),o()},beforeRemoveClass:function(e,t,o,i){i=i||{};var n=B(0,e,J(t,"-remove"),i.from);if(n)return M(0,o),n;A(),o()},setClass:function(e,t,o,i,n){return n=n||{},W(0,e,(o=J(o,"-remove"))+" "+(t=J(t,"-add")),i,n.to)},addClass:function(e,t,o,i){return i=i||{},W(0,e,J(t,"-add"),o,i.to)},removeClass:function(e,t,o,i){return i=i||{},W(0,e,J(t,"-remove"),o,i.to)}};function J(e,t){var o="";return e=l(e)?e:e.split(/\s+/),r(e,function(e,i){e&&e.length>0&&(o+=(i>0?" ":"")+e+t)}),o}}])}])}(window,window.angular),function(e,t,o){"use strict";var i=t.$$minErr("$sanitize");var n=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,a=/^<\/\s*([\w:-]+)[^>]*>/,r=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,s=/^</,l=/^<\//,c=/<!--(.*?)-->/g,u=/<!DOCTYPE([^>]*?)>/i,d=/<!\[CDATA\[(.*?)]]>/g,p=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=/([^\#-~| |!])/g,f=_("area,br,col,hr,img,wbr"),g=_("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),m=_("rp,rt"),v=t.extend({},m,g),w=t.extend({},g,_("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),y=t.extend({},m,_("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),b=_("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),k=_("script,style"),x=t.extend({},f,w,y,v,b),S=_("background,cite,href,longdesc,src,usemap,xlink:href"),$=_("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),C=_("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),T=t.extend({},S,C,$);function _(e){var t,o={},i=e.split(",");for(t=0;t<i.length;t++)o[i[t]]=!0;return o}var D=document.createElement("pre"),I=/^(\s*)([\s\S]*?)(\s*)$/;function P(e){if(!e)return"";var t=I.exec(e),o=t[1],i=t[3],n=t[2];return n&&(D.innerHTML=n.replace(/</g,"&lt;"),n="textContent"in D?D.textContent:D.innerText),o+n+i}function E(e){return e.replace(/&/g,"&amp;").replace(p,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(h,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function A(e,o){var i=!1,n=t.bind(e,e.push);return{start:function(e,a,r){e=t.lowercase(e),!i&&k[e]&&(i=e),i||!0!==x[e]||(n("<"),n(e),t.forEach(a,function(i,a){var r=t.lowercase(a),s="img"===e&&"src"===r||"background"===r;!0!==T[r]||!0===S[r]&&!o(i,s)||(n(" "),n(a),n('="'),n(E(i)),n('"'))}),n(r?"/>":">"))},end:function(e){e=t.lowercase(e),i||!0!==x[e]||(n("</"),n(e),n(">")),e==i&&(i=!1)},chars:function(e){i||n(E(e))}}}t.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(e){return function(o){var p=[];return function(e,o){"string"!=typeof e&&(e=null===e||void 0===e?"":""+e);var p,h,g,m,b=[],x=e;for(b.last=function(){return b[b.length-1]};e;){if(m="",h=!0,b.last()&&k[b.last()]?(e=e.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+b.last()+"[^>]*>","i"),function(e,t){return t=t.replace(c,"$1").replace(d,"$1"),o.chars&&o.chars(P(t)),""}),$("",b.last())):(0===e.indexOf("\x3c!--")?(p=e.indexOf("--",4))>=0&&e.lastIndexOf("--\x3e",p)===p&&(o.comment&&o.comment(e.substring(4,p)),e=e.substring(p+3),h=!1):u.test(e)?(g=e.match(u))&&(e=e.replace(g[0],""),h=!1):l.test(e)?(g=e.match(a))&&(e=e.substring(g[0].length),g[0].replace(a,$),h=!1):s.test(e)&&((g=e.match(n))?(g[4]&&(e=e.substring(g[0].length),g[0].replace(n,S)),h=!1):(m+="<",e=e.substring(1))),h&&(p=e.indexOf("<"),m+=p<0?e:e.substring(0,p),e=p<0?"":e.substring(p),o.chars&&o.chars(P(m)))),e==x)throw i("badparse","The sanitizer was unable to parse the following block of html: {0}",e);x=e}function S(e,i,n,a){if(i=t.lowercase(i),w[i])for(;b.last()&&y[b.last()];)$("",b.last());v[i]&&b.last()==i&&$("",i),(a=f[i]||!!a)||b.push(i);var s={};n.replace(r,function(e,t,o,i,n){var a=o||i||n||"";s[t]=P(a)}),o.start&&o.start(i,s,a)}function $(e,i){var n,a=0;if(i=t.lowercase(i))for(a=b.length-1;a>=0&&b[a]!=i;a--);if(a>=0){for(n=b.length-1;n>=a;n--)o.end&&o.end(b[n]);b.length=a}}$()}(o,A(p,function(t,o){return!/^unsafe/.test(e(t,o))})),p.join("")}}]}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var o=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/,i=/^mailto:/;return function(n,a){if(!n)return n;for(var r,s,l,c=n,u=[];r=c.match(o);)s=r[0],r[2]||r[4]||(s=(r[3]?"http://":"mailto:")+s),l=r.index,d(c.substr(0,l)),p(s,r[0].replace(i,"")),c=c.substring(l+r[0].length);return d(c),e(u.join(""));function d(e){var o,i;e&&u.push((o=e,A(i=[],t.noop).chars(o),i.join("")))}function p(e,o){u.push("<a "),t.isDefined(a)&&u.push('target="',a,'" '),u.push('href="',e.replace(/"/g,"&quot;"),'">'),d(o),u.push("</a>")}}}])}(window,window.angular),function(e,t,o){"use strict";var i=t.module("ngTouch",[]);function n(e,o,n){i.directive(e,["$parse","$swipe",function(i,a){var r=75,s=.3,l=30;return function(c,u,d){var p,h,f=i(d[e]);var g=["touch"];t.isDefined(d.ngSwipeDisableMouse)||g.push("mouse"),a.bind(u,{start:function(e,t){p=e,h=!0},cancel:function(e){h=!1},end:function(e,t){(function(e){if(!p)return!1;var t=Math.abs(e.y-p.y),i=(e.x-p.x)*o;return h&&t<r&&i>0&&i>l&&t/i<s})(e)&&c.$apply(function(){u.triggerHandler(n),f(c,{$event:t})})}},g)}}])}i.factory("$swipe",[function(){var e={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};function o(e){var t=e.touches&&e.touches.length?e.touches:[e],o=e.changedTouches&&e.changedTouches[0]||e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]||t[0].originalEvent||t[0];return{x:o.clientX,y:o.clientY}}function i(o,i){var n=[];return t.forEach(o,function(t){var o=e[t][i];o&&n.push(o)}),n.join(" ")}return{bind:function(e,t,n){var a,r,s,l,c=!1;n=n||["mouse","touch"],e.on(i(n,"start"),function(e){s=o(e),c=!0,a=0,r=0,l=s,t.start&&t.start(s,e)});var u=i(n,"cancel");u&&e.on(u,function(e){c=!1,t.cancel&&t.cancel(e)}),e.on(i(n,"move"),function(e){if(c&&s){var i=o(e);if(a+=Math.abs(i.x-l.x),r+=Math.abs(i.y-l.y),l=i,!(a<10&&r<10))return r>a?(c=!1,void(t.cancel&&t.cancel(e))):(e.preventDefault(),void(t.move&&t.move(i,e)))}}),e.on(i(n,"end"),function(e){c&&(c=!1,t.end&&t.end(o(e),e))})}}}]),i.config(["$provide",function(e){e.decorator("ngClickDirective",["$delegate",function(e){return e.shift(),e}])}]),i.directive("ngClick",["$parse","$timeout","$rootElement",function(e,o,i){var n,a,r,s=2500,l=25,c="ng-click-active";function u(e,t,o){for(var i=0;i<e.length;i+=2)if(n=e[i],a=e[i+1],r=t,s=o,Math.abs(n-r)<l&&Math.abs(a-s)<l)return e.splice(i,i+2),!0;var n,a,r,s;return!1}function d(e){if(!(Date.now()-n>s)){var t=e.touches&&e.touches.length?e.touches:[e],o=t[0].clientX,i=t[0].clientY;o<1&&i<1||r&&r[0]===o&&r[1]===i||(r&&(r=null),"label"===e.target.tagName.toLowerCase()&&(r=[o,i]),u(a,o,i)||(e.stopPropagation(),e.preventDefault(),e.target&&e.target.blur()))}}function p(e){var t=e.touches&&e.touches.length?e.touches:[e],i=t[0].clientX,n=t[0].clientY;a.push(i,n),o(function(){for(var e=0;e<a.length;e+=2)if(a[e]==i&&a[e+1]==n)return void a.splice(e,e+2)},s,!1)}return function(o,r,s){var l,h,f,g,m=e(s.ngClick),v=!1;function w(){v=!1,r.removeClass(c)}r.on("touchstart",function(e){v=!0,3==(l=e.target?e.target:e.srcElement).nodeType&&(l=l.parentNode),r.addClass(c),h=Date.now();var t=e.touches&&e.touches.length?e.touches:[e],o=t[0].originalEvent||t[0];f=o.clientX,g=o.clientY}),r.on("touchmove",function(e){w()}),r.on("touchcancel",function(e){w()}),r.on("touchend",function(e){var o=Date.now()-h,c=e.changedTouches&&e.changedTouches.length?e.changedTouches:e.touches&&e.touches.length?e.touches:[e],m=c[0].originalEvent||c[0],y=m.clientX,b=m.clientY,k=Math.sqrt(Math.pow(y-f,2)+Math.pow(b-g,2));v&&o<750&&k<12&&(!function(e,t){a||(i[0].addEventListener("click",d,!0),i[0].addEventListener("touchstart",p,!0),a=[]),n=Date.now(),u(a,e,t)}(y,b),l&&l.blur(),t.isDefined(s.disabled)&&!1!==s.disabled||r.triggerHandler("click",[e])),w()}),r.onclick=function(e){},r.on("click",function(e,t){o.$apply(function(){m(o,{$event:t||e})})}),r.on("mousedown",function(e){r.addClass(c)}),r.on("mousemove mouseup",function(e){r.removeClass(c)})}}]),n("ngSwipeLeft",-1,"swipeleft"),n("ngSwipeRight",1,"swiperight")}(window,window.angular),angular.module("ivpusic.cookie",["ipCookie"]),angular.module("ipCookie",["ng"]).factory("ipCookie",["$document",function(e){"use strict";return function(){function t(t,o,i){var n,a,r,s,l,c,u,d,p;if(i=i||{},void 0!==o)return o="object"==typeof o?JSON.stringify(o):o+"","number"==typeof i.expires&&(p=i.expires,i.expires=new Date,-1===p?i.expires=new Date("Thu, 01 Jan 1970 00:00:00 GMT"):void 0!==i.expirationUnit?"hours"===i.expirationUnit?i.expires.setHours(i.expires.getHours()+p):"minutes"===i.expirationUnit?i.expires.setMinutes(i.expires.getMinutes()+p):"seconds"===i.expirationUnit?i.expires.setSeconds(i.expires.getSeconds()+p):i.expires.setDate(i.expires.getDate()+p):i.expires.setDate(i.expires.getDate()+p)),e[0].cookie=[encodeURIComponent(t),"=",encodeURIComponent(o),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("");for(a=[],(d=e[0].cookie)&&(a=d.split("; ")),n={},u=!1,r=0;a.length>r;++r)if(a[r]&&(l=(s=a[r]).indexOf("="),c=s.substring(0,l),o=decodeURIComponent(s.substring(l+1)),void 0===t||t===c)){try{n[c]=JSON.parse(o)}catch(e){n[c]=o}if(t===c)return n[c];u=!0}return u&&void 0===t?n:void 0}return t.remove=function(e,o){var i=void 0!==t(e);return i&&(o||(o={}),o.expires=-1,t(e,"",o)),i},t}()}]),function(e,t,o){"use strict";var i,n={},a={sdk:!1,ready:!1};t.module("facebook",[]).value("settings",n).value("flags",a).provider("Facebook",[function(){n.appId=null,this.setAppId=function(e){n.appId=e},this.getAppId=function(){return n.appId},n.locale="en_US",this.setLocale=function(e){n.locale=e},this.getLocale=function(){return n.locale},n.status=!0,this.setStatus=function(e){n.status=e},this.getStatus=function(){return n.status},n.channelUrl=null,this.setChannel=function(e){n.channelUrl=e},this.getChannel=function(){return n.channelUrl},n.cookie=!0,this.setCookie=function(e){n.cookie=e},this.getCookie=function(){return n.cookie},n.xfbml=!0,this.setXfbml=function(e){n.xfbml=e},this.getXfbml=function(){return n.xfbml},this.setAuthResponse=function(e){n.authResponse=e||!0},this.getAuthResponse=function(){return n.authResponse},n.frictionlessRequests=!1,this.setFrictionlessRequests=function(e){n.frictionlessRequests=e},this.getFrictionlessRequests=function(){return n.frictionlessRequests},n.hideFlashCallback=null,this.setHideFlashCallback=function(e){n.hideFlashCallback=e||null},this.getHideFlashCallback=function(){return n.hideFlashCallback},this.setInitCustomOption=function(e,o){return!!t.isString(e)&&(n[e]=o,n[e])},this.getInitOption=function(e){return!(!t.isString(e)||!n.hasOwnProperty(e))&&n[e]},n.loadSDK=!0,this.setLoadSDK=function(e){n.loadSDK=!!e},this.getLoadSDK=function(){return n.loadSDK},n.version="v2.0",this.setSdkVersion=function(e){n.version=e},this.getSdkVersion=function(){return n.version},this.init=function(e,o){t.isString(e)&&(n.appId=e||n.appId),t.isObject(e)&&t.extend(n,e),t.isDefined(o)&&(n.loadSDK=!!o)},this.$get=["$q","$rootScope","$timeout","$window",function(e,o,r,s){function l(){this.appId=n.appId}return l.prototype.isReady=function(){return a.ready},l.prototype.login=function(){var o,i,n=e.defer(),a=Array.prototype.slice.call(arguments);return t.forEach(a,function(e,n){t.isFunction(e)&&(o=e,i=n)}),t.isFunction(o)&&t.isNumber(i)&&a.splice(i,1,function(e){r(function(){t.isUndefined(e.error)?n.resolve(e):n.reject(e),t.isFunction(o)&&o(e)})}),this.isReady()?s.FB.login.apply(s.FB,a):r(function(){n.reject("Facebook.login() called before Facebook SDK has loaded.")}),n.promise},t.forEach(["logout","api","ui","getLoginStatus"],function(o){l.prototype[o]=function(){var n,a,l=e.defer(),c=Array.prototype.slice.call(arguments);return t.forEach(c,function(e,o){t.isFunction(e)&&(n=e,a=o)}),t.isFunction(n)&&t.isNumber(a)&&c.splice(a,1,function(e){r(function(){e&&void 0===e.error?l.resolve(e):l.reject(e),t.isFunction(n)&&n(e)})}),r(function(){i.promise.then(function(){s.FB[o].apply(FB,c)},function(){throw"Facebook API could not be initialized properly"})}),l.promise}}),l.prototype.parseXFBML=function(){var t=e.defer();return r(function(){i.promise.then(function(){s.FB.XFBML.parse(),t.resolve()},function(){throw"Facebook API could not be initialized properly"})}),t.promise},l.prototype.subscribe=function(){var o,n,a=e.defer(),l=Array.prototype.slice.call(arguments);return t.forEach(l,function(e,i){t.isFunction(e)&&(o=e,n=i)}),t.isFunction(o)&&t.isNumber(n)&&l.splice(n,1,function(e){r(function(){e&&void 0===e.error?a.resolve(e):a.reject(e),t.isFunction(o)&&o(e)})}),r(function(){i.promise.then(function(){s.FB.Event.subscribe.apply(FB,l)},function(){throw"Facebook API could not be initialized properly"})}),a.promise},l.prototype.unsubscribe=function(){var o,n,a=e.defer(),l=Array.prototype.slice.call(arguments);return t.forEach(l,function(e,i){t.isFunction(e)&&(o=e,n=i)}),t.isFunction(o)&&t.isNumber(n)&&l.splice(n,1,function(e){r(function(){e&&void 0===e.error?a.resolve(e):a.reject(e),t.isFunction(o)&&o(e)})}),r(function(){i.promise.then(function(){s.FB.Event.unsubscribe.apply(FB,l)},function(){throw"Facebook API could not be initialized properly"})}),a.promise},new l}]}]).run(["$rootScope","$q","$window","$timeout",function(e,o,r,s){i=o.defer();var l,c,u,d=n.loadSDK;delete n.loadSDK,r.fbAsyncInit=function(){s(function(){if(!n.appId)throw"Missing appId setting.";FB.init(n),a.ready=!0,t.forEach({"auth.login":"login","auth.logout":"logout","auth.prompt":"prompt","auth.sessionChange":"sessionChange","auth.statusChange":"statusChange","auth.authResponseChange":"authResponseChange","xfbml.render":"xfbmlRender","edge.create":"like","edge.remove":"unlike","comment.create":"comment","comment.remove":"uncomment"},function(t,o){FB.Event.subscribe(o,function(o){s(function(){e.$broadcast("Facebook:"+t,o)})})}),e.$broadcast("Facebook:load"),i.resolve(FB)})},(l=document.getElementById("fb-root"))||((l=document.createElement("div")).id="fb-root",document.body.insertBefore(l,document.body.childNodes[0])),d&&(c="//connect.facebook.net/"+n.locale+"/sdk.js",(u=document.createElement("script")).id="facebook-jssdk",u.async=!0,-1!==["file","file:"].indexOf(r.location.protocol)&&(c="https:"+c),u.src=c,u.onload=function(){a.sdk=!0},document.getElementsByTagName("head")[0].appendChild(u))}])}(window,angular),function(e){function t(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function o(e,t){return 100*t/(e[1]-e[0])}function i(e,t){for(var o=1;e>=t[o];)o+=1;return o}function n(e,i,n,a){for(var r in this.xPct=[],this.xVal=[],this.xSteps=[a||!1],this.xNumSteps=[!1],this.snap=i,this.direction=n,e)if(e.hasOwnProperty(r)){if(i=r,a=void 0,"number"==typeof(n=e[r])&&(n=[n]),"[object Array]"!==Object.prototype.toString.call(n))throw Error("noUiSlider: 'range' contains invalid value.");if(!t(a="min"===i?0:"max"===i?100:parseFloat(i))||!t(n[0]))throw Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(a),this.xVal.push(n[0]),a?this.xSteps.push(!isNaN(n[1])&&n[1]):isNaN(n[1])||(this.xSteps[0]=n[1])}for(r in this.xNumSteps=this.xSteps.slice(0),this.xNumSteps)this.xNumSteps.hasOwnProperty(r)&&(e=Number(r),(i=this.xNumSteps[r])&&(this.xSteps[e]=o([this.xVal[e],this.xVal[e+1]],i)/(100/(this.xPct[e+1]-this.xPct[e]))))}n.prototype.getMargin=function(e){return 2===this.xPct.length&&o(this.xVal,e)},n.prototype.toStepping=function(e){var t=this.xVal,n=this.xPct;if(e>=t.slice(-1)[0])e=100;else{var a,r,s=i(e,t);a=t[s-1],r=t[s],t=n[s-1],n=n[s],e=t+(e=o(a=[a,r],0>a[0]?e+Math.abs(a[0]):e-a[0]))/(100/(n-t))}return this.direction&&(e=100-e),e},n.prototype.fromStepping=function(e){var t;this.direction&&(e=100-e);var o=this.xVal;if(t=this.xPct,100<=e)t=o.slice(-1)[0];else{var n,a,r=i(e,t);n=o[r-1],a=o[r],o=t[r-1],n=[n,a],t=100/(t[r]-o)*(e-o)*(n[1]-n[0])/100+n[0]}return e=Math.pow(10,7),Number((Math.round(t*e)/e).toFixed(7))},n.prototype.getStep=function(e){this.direction&&(e=100-e);var t=this.xPct,o=this.xSteps,n=this.snap;if(100!==e){var a=i(e,t);n?e=e-(o=t[a-1])>((t=t[a])-o)/2?t:o:(o[a-1]?(n=t[a-1],o=o[a-1],t=n+(t=Math.round((e-t[a-1])/o)*o)):t=e,e=t)}return this.direction&&(e=100-e),e},n.prototype.getApplicableStep=function(e){var t=i(e,this.xPct);return e=100===e?2:1,[this.xNumSteps[t-2],this.xVal[t-e],this.xNumSteps[t-e]]},n.prototype.convert=function(e){return this.getStep(this.toStepping(e))},e.noUiSlider={Spectrum:n}}(window.jQuery||window.Zepto),function(e){function t(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function o(e,o){if(!t(o))throw Error("noUiSlider: 'step' is not numeric.");e.singleStep=o}function i(t,o){if("object"!=typeof o||e.isArray(o))throw Error("noUiSlider: 'range' is not an object.");if(void 0===o.min||void 0===o.max)throw Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new e.noUiSlider.Spectrum(o,t.snap,t.dir,t.singleStep)}function n(t,o){var i=o;if(o=e.isArray(i)?i:[i],!e.isArray(o)||!o.length||2<o.length)throw Error("noUiSlider: 'start' option is incorrect.");t.handles=o.length,t.start=o}function a(e,t){if(e.snap=t,"boolean"!=typeof t)throw Error("noUiSlider: 'snap' option must be a boolean.")}function r(e,t){if(e.animate=t,"boolean"!=typeof t)throw Error("noUiSlider: 'animate' option must be a boolean.")}function s(e,t){if("lower"===t&&1===e.handles)e.connect=1;else if("upper"===t&&1===e.handles)e.connect=2;else if(!0===t&&2===e.handles)e.connect=3;else{if(!1!==t)throw Error("noUiSlider: 'connect' option doesn't match handle count.");e.connect=0}}function l(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw Error("noUiSlider: 'orientation' option is invalid.")}}function c(e,o){if(!t(o))throw Error("noUiSlider: 'margin' option must be numeric.");if(e.margin=e.spectrum.getMargin(o),!e.margin)throw Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function u(e,o){if(!t(o))throw Error("noUiSlider: 'limit' option must be numeric.");if(e.limit=e.spectrum.getMargin(o),!e.limit)throw Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function d(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1,e.connect=[0,2,1,3][e.connect];break;default:throw Error("noUiSlider: 'direction' option was not recognized.")}}function p(e,t){if("string"!=typeof t)throw Error("noUiSlider: 'behaviour' must be a string containing options.");var o=0<=t.indexOf("tap"),i=0<=t.indexOf("drag"),n=0<=t.indexOf("fixed"),a=0<=t.indexOf("snap");e.events={tap:o||a,drag:i,fixed:n,snap:a}}function h(e,t){if(e.format=t,"function"==typeof t.to&&"function"==typeof t.from)return!0;throw Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}var f={to:function(e){return e.toFixed(2)},from:Number};e.noUiSlider.testOptions=function(t){var g,m={margin:0,limit:0,animate:!0,format:f};return g={step:{r:!1,t:o},start:{r:!0,t:n},connect:{r:!0,t:s},direction:{r:!0,t:d},snap:{r:!1,t:a},animate:{r:!1,t:r},range:{r:!0,t:i},orientation:{r:!1,t:l},margin:{r:!1,t:c},limit:{r:!1,t:u},behaviour:{r:!0,t:p},format:{r:!1,t:h}},t=e.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},t),e.each(g,function(e,o){if(void 0===t[e]){if(o.r)throw Error("noUiSlider: '"+e+"' is required.");return!0}o.t(m,t[e])}),m.style=m.ort?"top":"left",m}}(window.jQuery||window.Zepto),function(e){function t(e){return Math.max(Math.min(e,100),0)}function o(e,t,o){e.addClass(t),setTimeout(function(){e.removeClass(t)},o)}function i(t,o){var i=e("<div><div/></div>").addClass(p[2]),n=["-lower","-upper"];return t&&n.reverse(),i.children().addClass(p[3]+" "+p[3]+n[o]),i}function n(e,t,o){var n,a=[];for(n=0;n<e;n+=1)a.push(i(t,n).appendTo(o));return a}function a(i,a,r){function s(){return b[["width","height"][a.ort]]()}function l(e){var t,o=[x.val()];for(t=0;t<e.length;t+=1)x.trigger(e[t],o)}function u(e){return 1===e.length?e[0]:a.dir?e.reverse():e}function h(t){var o=e.inArray(t,T);x[0].linkAPI&&x[0].linkAPI[t]&&x[0].linkAPI[t].change(C[o],k[o].children(),x)}function f(e,o,i){var n=e[0]!==k[0][0]?1:0,r=S[0]+a.margin,s=S[1]-a.margin,l=S[0]+a.limit,c=S[1]-a.limit;return 1<k.length&&(o=n?Math.max(o,r):Math.min(o,s)),!1!==i&&a.limit&&1<k.length&&(o=n?Math.min(o,l):Math.max(o,c)),o=$.getStep(o),(o=t(parseFloat(o.toFixed(7))))!==S[n]&&(e.css(a.style,o+"%"),e.is(":first-child")&&e.toggleClass(p[17],50<o),S[n]=o,C[n]=$.fromStepping(o),h(T[n]),!0)}function g(e,t,o,i){return e=e.replace(/\s/g,".nui ")+".nui",t.on(e,function(e){if(x.attr("disabled")||x.hasClass(p[14]))return!1;e.preventDefault();var t,n,r=0===e.type.indexOf("touch"),s=0===e.type.indexOf("mouse"),l=0===e.type.indexOf("pointer"),c=e;0===e.type.indexOf("MSPointer")&&(l=!0),e.originalEvent&&(e=e.originalEvent),r&&(t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY),(s||l)&&(l||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),t=e.clientX+window.pageXOffset,n=e.clientY+window.pageYOffset),c.points=[t,n],c.cursor=s,(e=c).calcPoint=e.points[a.ort],o(e,i)})}function m(e,o){var i,n=o.handles||k,a=!1,r=(a=100*(e.calcPoint-o.start)/s(),n[0][0]!==k[0][0]?1:0),c=o.positions;i=a+c[0],a+=c[1],1<n.length?(0>i&&(a+=Math.abs(i)),100<a&&(i-=a-100),i=[t(i),t(a)]):i=[i,a],a=f(n[0],i[r],1===n.length),1<n.length&&(a=f(n[1],i[r?0:1],!1)||a),a&&l(["slide"])}function v(t){e("."+p[15]).removeClass(p[15]),t.cursor&&e("body").css("cursor","").off(".nui"),c.off(".nui"),x.removeClass(p[12]),l(["set","change"])}function w(t,o){1===o.handles.length&&o.handles[0].children().addClass(p[15]),t.stopPropagation(),g(d.move,c,m,{start:t.calcPoint,handles:o.handles,positions:[S[0],S[k.length-1]]}),g(d.end,c,v,null),t.cursor&&(e("body").css("cursor",e(t.target).css("cursor")),1<k.length&&x.addClass(p[12]),e("body").on("selectstart.nui",!1))}function y(t){var i=t.calcPoint,n=0;t.stopPropagation(),e.each(k,function(){n+=this.offset()[a.style]}),n=i<n/2||1===k.length?0:1,i=100*(i-=b.offset()[a.style])/s(),a.events.snap||o(x,p[14],300),f(k[n],i),l(["slide","set","change"]),a.events.snap&&w(t,{handles:[k[n]]})}var b,k,x=e(i),S=[-1,-1],$=a.spectrum,C=[],T=["lower","upper"].slice(0,a.handles);if(a.dir&&T.reverse(),i.LinkUpdate=h,i.LinkConfirm=function(t,o){var i=e.inArray(t,T);return o&&o.appendTo(k[i].children()),a.dir&&(i=1===i?0:1),function(e){return function(t,o){x.val([e?null:o,e?o:null],!0)}}(i)},i.LinkDefaultFormatter=a.format,i.LinkDefaultFlag="lower",i.reappend=function(){var e,t;for(e=0;e<T.length;e+=1)this.linkAPI&&this.linkAPI[t=T[e]]&&this.linkAPI[t].reconfirm(t)},x.hasClass(p[0]))throw Error("Slider was already initialized.");b=function(t,o,i){return i.addClass([p[0],p[8+t],p[4+o]].join(" ")),e("<div/>").appendTo(i).addClass(p[1])}(a.dir,a.ort,x),k=n(a.handles,a.dir,b),function(e,t,o){switch(e){case 1:t.addClass(p[7]),o[0].addClass(p[6]);break;case 3:o[1].addClass(p[6]);case 2:o[0].addClass(p[7]);case 0:t.addClass(p[6])}}(a.connect,x,k),function(e){var t;if(!e.fixed)for(t=0;t<k.length;t+=1)g(d.start,k[t].children(),w,{handles:[k[t]]});e.tap&&g(d.start,b,y,{handles:k}),e.drag&&(t=b.find("."+p[7]).addClass(p[10]),e.fixed&&(t=t.add(b.children().not(t).children())),g(d.start,t,w,{handles:k}))}(a.events),i.vSet=function(t){if(x[0].LinkIsEmitting)return this;var i,n,r,s;for(t=e.isArray(t)?t:[t],a.dir&&1<a.handles&&t.reverse(),a.animate&&-1!==S[0]&&o(x,p[14],300),i=1<k.length?3:1,1===t.length&&(i=1),a.limit&&(i+=1),n=0;n<i;n+=1)null!==(s=t[r=n%2])&&!1!==s&&("number"==typeof s&&(s=String(s)),(!1===(s=a.format.from(s))||isNaN(s)||!1===f(k[r],$.toStepping(s),n===3-a.dir))&&h(T[r]));return l(["set"]),this},i.vGet=function(){var e,t=[];for(e=0;e<a.handles;e+=1)t[e]=a.format.to(C[e]);return u(t)},i.destroy=function(){return e(this).off(".nui").removeClass(p.join(" ")).empty(),delete this.LinkUpdate,delete this.LinkConfirm,delete this.LinkDefaultFormatter,delete this.LinkDefaultFlag,delete this.reappend,delete this.vGet,delete this.vSet,delete this.getCurrentStep,delete this.getInfo,delete this.destroy,r},i.getCurrentStep=function(){return u(e.map(S,function(e,t){var o=$.getApplicableStep(e);return[[C[t]-o[2]>=o[1]?o[2]:o[0],o[2]]]}))},i.getInfo=function(){return[$,a.style,a.ort]},x.val(a.start)}function r(t){if(!this.length)throw Error("noUiSlider: Can't initialize slider on empty selection.");var o=e.noUiSlider.testOptions(t,this);return this.each(function(){a(this,o,t)})}function s(t){return this.each(function(){if(this.destroy){var o=e(this).val(),i=this.destroy(),n=e.extend({},i,t);e(this).noUiSlider(n),this.reappend(),i.start===n.start&&e(this).val(o)}else e(this).noUiSlider(t)})}function l(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}var c=e(document),u=e.fn.val,d=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},p="noUi-target noUi-base noUi-origin noUi-handle noUi-horizontal noUi-vertical noUi-background noUi-connect noUi-ltr noUi-rtl noUi-dragable  noUi-state-drag  noUi-state-tap noUi-active  noUi-stacking".split(" ");e.fn.val=function(){var t=arguments,o=e(this[0]);return arguments.length?this.each(function(){(e(this).hasClass(p[0])?l:u).apply(e(this),t)}):(o.hasClass(p[0])?l:u).call(o)},e.fn.noUiSlider=function(e,t){return(t?s:r).call(this,e)}}(window.jQuery||window.Zepto);var analytics=new Analytics,startTime=(new Date).getTime(),loadedContent=!1,trackJsInfo=function(e,t){var o=Array.prototype.slice.call(arguments,1);e&&e.trackJs&&e.trackJs.console.info.apply(this,o)};function isLocalStorageNameSupported(){try{var e=window.localStorage;return e.setItem("test","1"),e.removeItem("test"),!0}catch(e){return location.href="/support/need-cookies",!1}}if(1==isLocalStorageNameSupported()){var modulesToLoad=["ngRoute","ngSanitize","ngTouch","ngAnimate","ipCookie"];"undefined"!=typeof DONT_LOAD_FACEBOOK&&DONT_LOAD_FACEBOOK||modulesToLoad.push("facebook");var module=angular.module("wikiwand",modulesToLoad,["$rootScopeProvider",function(e){e.digestTtl(10)}]);module.directive("selectOnClick",["$window",function(e){return{restrict:"A",link:function(t,o,i){o.on("focus",function(){e.getSelection().toString()||this.setSelectionRange(0,this.value.length)}),o.on("blur",function(){})}}}]),module.config(["$routeProvider","$sceDelegateProvider","$locationProvider",function(e,t,o){o.html5Mode({enabled:!1}),t.resourceUrlWhitelist(["self",new RegExp("^https://s3.amazonaws.com/ww-article-cache-1/.+$"),new RegExp("^http://s3.amazonaws.com/ww-article-cache-1/.+$"),new RegExp("^https://s3.amazonaws.com/ww-article-cache-stage/.+$"),new RegExp("^http://s3.amazonaws.com/ww-article-cache-stage/.+$"),new RegExp("^http://d30ohmzj0cjdlk.cloudfront.net/.+$"),new RegExp("^https://d30ohmzj0cjdlk.cloudfront.net/.+$"),new RegExp("^http://db0nus869y26v.cloudfront.net/.+$"),new RegExp("^https://db0nus869y26v.cloudfront.net/.+$"),new RegExp("^https://www.youtube-nocookie.com/.+$")])}]),module.config(["$routeProvider",function(e){e.when("/view1xyz",{templateUrl:"partials/partial1.html",controller:"MyCtrl1"}),e.when("/view2xyz",{templateUrl:"partials/partial2.html",controller:"MyCtrl2"}),e.otherwise({controller:"MyCtrl2"})}]).config(["$provide",function(e){e.decorator("$exceptionHandler",["$delegate","$window",function(e,t){return function(o,i){e(o,i);var n=(new Date).getTime()-startTime;if(console.log("error elapsed from start",n),$(".report_popup:eq(0)").is(":visible")&&($("#body_wrapp").remove(),$("#error_message").show(),setTimeout(function(){analytics.gaEvent("error-message","user-saw-message","ok")},1e3)),"undefined"==typeof dontReport){var a={};try{a.message=o.message}catch(e){a.message="none"}try{a.stack=o.stack,a.miniStack=o.stack.split("\n"),a.miniStackString=a.miniStack.join(" |"),a.miniStackString=a.miniStackString.replace(/http:[^ \)]+/g,"#"),a.miniStackString=a.miniStackString.replace(/at\s/g,"@"),a.miniStackString=a.miniStackString.replace(/\s+/g,""),a.miniStackString=a.miniStackString.substr(0,499)}catch(e){a.stack="none"}try{a.articleData=articleData}catch(e){a.articleData="none"}try{a.serverData=serverData}catch(e){a.serverData="none"}try{a.errorUrl=window.location.href}catch(e){a.errorUrl="none"}if(serverData.agent.iOSWebView&&(console.error(o.message),"production"!==serverData.config.environment&&alert(o.message)),console.info("stack trace "+JSON.stringify(a.stack)),console.log("underscore function is ",typeof _),console.log("jquery function is ",typeof $),"string"==typeof _&&console.log("["+_+"]"),"string"==typeof $&&console.log("["+$+"]"),t.trackJs&&t.trackJs.track(o),serverData&&-1!=serverData.agent.string.indexOf("Opera Mini"))alert("Sorry. Opera mini is not HTML5 compatible");else{try{$.ajax({type:"POST",url:"../api/javascript-errors",contentType:"application/json",data:angular.toJson(a)})}catch(e){console.log("error reporting message")}analytics.gaEvent("clientSide error , -",a.errorUrl,a.message),analytics.gaEvent("clientSide error 1",a.errorUrl,a.message),analytics.gaEvent("clientSide error 2",a.errorUrl,a.miniStackString)}}else console.log("don't report")}}])}])}(app=angular.module("wikiwand")).service("WikipediaApi",["$http","$log",function(e,t){var o={callApi:function(o,i,n){if(o.format="json",o.callback="JSON_CALLBACK",!i.apiLanguage)return n("Wikipedia API: must provide an 'apiLanguage' option to callApi");if(!o.action)return n("Wikipedia API: must provide an 'action' parameter to callApi");var a=[];for(var r in o){var s=o[r];"object"==typeof s&&(s=s.join("|")),a.push(r+"="+s)}var l=i.apiLanguage;"zh-"===l.substr(0,3)&&$.inArray(l,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])>=0&&(l="zh");var c="https://"+l+".wikipedia.org/w/api.php?"+a.join("&");i.dbg&&console.log("Wikipedia API Call: ",c),e({method:"JSONP",url:c,cache:!0,timeout:3e3,responseType:"json"}).success(function(e,i,a,r,s){if(e.error)return t.error("Wikipedia API: warning: "+JSON.stringify(e.warning)),n("Wikipedia API: error: "+JSON.stringify(e.error));e.warning&&t.warn("Wikipedia API: warning: "+JSON.stringify(e.warning));var l=e[o.action];return n(null,l,c,e.continue)}).error(function(e,o,i,a,r){return t.error("Wikipedia API: request failed: "+r),n("Wikipedia API: request failed: "+r)})}};return o}]),app.filter("reverse",function(){return function(e){return e.slice().reverse()}}),(app=angular.module("wikiwand")).service("GalleryHelper",["$http","$log",function(e,t){var o={getClickedThumbnailIndex:function(e){var o=e.currentTarget.querySelector("img:nth-child(1)"),i=$(o).data("index");return void 0===i?(t.warn("This image is not in the gallery"),-1):(console.log("Open image with index ",i),i)},loadImagesFromArticleToArray:function(e){o.findStrayImages();var t=[];return e.find(".image_wrapper > .img_container img:nth-child(1):visible").each(function(){var e=$(this);o.addItemModelFromThumb(e,t)}),t},findStrayImages:function(){$(".image.int-link").length>0&&("production"!==serverData.config.environment&&$(".image.int-link").css("border","solid 5px red"),t.warn("Found stray pictures",$(".image.int-link")))},addItemModelFromThumb:function(e,t){var o={thumb:{}};o.thumb.src=e.attr("data-original"),o.thumb.w=parseInt(e.attr("data-w")),o.thumb.h=parseInt(e.attr("data-h")),o.urlString="url("+o.thumb.src+")",o.fromEnglishWikipedia=void 0!==e.attr("data-from-english"),o.bucket={},o.bucket.src="",o.bucket.loaded=!1,o.original={},o.original.realOriginalSrc=e.attr("data-href"),o.original.src=o.thumb.src,o.original.w=parseInt(e.attr("data-fw")),o.original.h=parseInt(e.attr("data-fh")),o.info={},o.info.fetched=!1,o.info.type=e.attr("data-media-type")||"image",o.info.payload=e.attr("data-payload");var i=e.attr("data-href");if(o.wikipediaPageFullUrl=i,o.wikipediaPageFullUrl="https://"+articleData.langCodeUrl+".wikipedia.org"+o.wikipediaPageFullUrl,o.wikipediaPage=i,o.wikipediaPage)if("/wiki/"===o.wikipediaPage.substr(0,6)){o.wikipediaPage=o.wikipediaPage.substr(6);try{o.wikipediaPageTitle=decodeURI(o.wikipediaPage.replace(/_/g," "))}catch(e){return}}else if("/w/index.php?title="===o.wikipediaPage.substr(0,19)){o.wikipediaPage=o.wikipediaPage.substr(19),o.wikipediaPage=o.wikipediaPage.split("&")[0];try{o.wikipediaPageTitle=decodeURI(o.wikipediaPage.replace(/_/g," "))}catch(e){return}}var n=e.parent().siblings(".caption").html()||"";o.title=n.trim(),o.titleTxt=n.replace(/(<([^>]+)>)/gi,"").replace(/"/g,"&quot"),o.index=t.length,o.original.w&&o.original.h&&o.wikipediaPage?(e.data("index",o.index),t.push(o)):"production"!==serverData.config.environment&&e.css("border","solid 5px #0e0")}};return o}]);var galleryControllerParams=["$rootScope","$scope","$timeout","$log","$sce","$sanitize","$window","Utilities","WikipediaApi","GalleryHelper",function(e,t,o,i,n,a,r,s,l,c){var u=this;function d(){s.isTouchDevice()||o(function(){angular.element(".img_enlarge").removeClass("loading")},500),t.galleryActive=!0,o(function(){$("#gallery_thumbs_scroll").getNiceScroll().resize(),u.alignFilmStrip()},10)}u.widthBuckets=[320,640,800,1024,1280,1920,2560,2880],t.fullScreenActive=!1,t.galleryActive=!1,angular.element(document).ready(function(){$(document).keydown(function(e){if(t.galleryActive){if(27===e.keyCode)t.closeGallery();else if(37===e.keyCode||38==e.keyCode||8===e.keyCode){e.preventDefault(),e.stopPropagation();var o=t.current.index-1;u.setActiveItemByIndex(o)}else if(39===e.keyCode||40==e.keyCode||32===e.keyCode){e.preventDefault(),e.stopPropagation();o=t.current.index+1;u.setActiveItemByIndex(o)}else if(33===e.keyCode){e.preventDefault(),e.stopPropagation();o=Math.max(t.current.index-5,0);u.setActiveItemByIndex(o)}else if(34===e.keyCode){e.preventDefault(),e.stopPropagation();o=Math.min(t.current.index+5,t.items.length-1);u.setActiveItemByIndex(o)}else if(36===e.keyCode){e.preventDefault(),e.stopPropagation();o=0;u.setActiveItemByIndex(o)}else if(35===e.keyCode){e.preventDefault(),e.stopPropagation();o=t.items.length-1;u.setActiveItemByIndex(o)}t.$apply()}})}),e.galleryOpen=function(e){t.items||(t.items=c.loadImagesFromArticleToArray($("#content"))),o(function(){u.initializeGalleryUi()},0);var i=c.getClickedThumbnailIndex(e);-1!=i&&(u.setActiveItemByIndex(i),s.isTouchDevice()?d():(angular.element(".img_enlarge").removeClass("loading"),angular.element(e.currentTarget).find(".img_enlarge").addClass("loading")))},screenfull.enabled&&document.addEventListener(screenfull.raw.fullscreenchange,function(){t.fullScreenActive=screenfull.isFullscreen}),t.galleryFull=!1,t.toggleFullScreen=function(){if(t.fullScreenActive=!t.fullScreenActive,screenfull.enabled){$("#gallery")[0];t.fullScreenActive?(screenfull.request(),t.galleryFull=!0):(screenfull.exit(),t.galleryFull=!1)}},t.closeGallery=function(){t.galleryFull=!1,$("#gallery .payload_container").empty(),t.galleryActive=!1,screenfull.enabled&&t.fullScreenActive&&screenfull.exit()},u.initializeGalleryUi=function(){s.isTouchDevice()?$("#full_screen").hide():(trackJsInfo(r,"nice scroll problem?"),trackJsInfo(r,"gallery_thumbs_scroll ",$("#gallery_thumbs_scroll")[0]),window.niceScroll||trackJsInfo(r,"niceScroll is not defined !"),$("#gallery_thumbs_scroll").niceScroll().hide()),$("#gallery_info_wrap > ul li").on("click",function(){$(this).hasClass("open")?$(this).removeClass("open").find("ul").hide():$(this).addClass("open").find("ul").show()}),setTimeout(function(){var e=$("#gallery_thumbs > li").outerWidth()*($("#gallery_thumbs > li").length+7);$("#gallery_thumbs").css("width",e)},0)},u.getNextBucketWithMinWidth=function(e){for(var t=0;t<u.widthBuckets.length;t++){var o=u.widthBuckets[t];if(o>=e)return o}return o},u.getImageDimensions=function(e){var t,o,i=$(window).width(),n=$(window).height(),a=e.original.w,r=e.original.h,s=r/a;s<n/i?(t=Math.min(i,a),o=Math.round(t*s)):(o=Math.min(n,r),t=Math.round(o/s));var l=u.getNextBucketWithMinWidth(t);return{display:{w:t,h:o},request:{w:l,h:Math.round(l*s)}}},u.setActiveItemByIndex=function(e){e>=t.items.length?i.warn("Thumbnail index too large: ",e):e<0?i.warn("Thumbnail index too small: ",e):u.setActiveItem(t.items[e])},u.listenToImageLoad=function(e,o){e.attr("src")!=o.bucket.src&&(t.galleryActive?e.attr("src",o.bucket.src):e.attr("src",o.bucket.src+"?"+(new Date).getTime())),console.log("listen to image load"),e.load(function(e){console.log("loaded"),o.bucket.loaded=!0,s.isTouchDevice()||!1===t.galleryActive&&d(),t.$apply()})},u.setActiveItem=function(e){if(e){var o=$(".gallery_main.bucket");o.attr("src",""),e.info.payload?(s.isTouchDevice()||!1===t.galleryActive&&d(),e.bucket.loaded=!0,$("#gallery .payload_container").html(e.info.payload),setTimeout(function(){var e=$("#gallery .payload_container video").get(0);"function"==typeof e.play&&e.play()},0)):(e.bucket.loaded=!1,$("#gallery .payload_container").empty(),u.listenToImageLoad(o,e));var i=e.index-1;i<0&&(i=0);for(var n=[];n.length<4&&i<t.items.length;){var a=t.items[i];i++,a.info.fetched||"image"===a.info.type&&(a.fromEnglishWikipedia?u.getImageInfoFromApi("en",a,function(){}):i<=e.index+3&&n.push(a))}if(n.length>0)for(var r=0;r<n.length;r++)u.getImageInfoFromApi(articleData.langCodeUrl,n[r],function(){});t.current&&(t.current.active=!1),e.active=!0,t.current=e,u.alignFilmStrip()}},u.alignFilmStrip=function(){if(console.log("align film strip"),$("#gallery_thumbs li").eq(t.current.index)&&$("#gallery_thumbs li").eq(t.current.index).position()){var e=Math.round($("#gallery_thumbs_con").width()),o=Math.round($("#gallery_thumbs li").eq(t.current.index).width()),i=Math.round($("#gallery_thumbs li").eq(t.current.index).position().left),n=Math.round(i+o/2-e/2);$("#gallery_thumbs_scroll").scrollLeft(n)}},u.getImageInfoFromApi=function(e,o,a){var r=u.getImageDimensions(o).request.w,s=[o],c=_.pluck(s,"wikipediaPageTitle"),d=_.pluck(s,"thumb"),p={action:"query",prop:"imageinfo",titles:c,iiprop:["timestamp","user","url","size","mime","mediatype","extmetadata"],iiurlwidth:r,iiextmetadatafilter:["DateTime","DateTimeOriginal","ImageDescription","License","LicenseShortName","UsageTerms","LicenseUrl","Credit","Artist","Permission","GPSLatitude","GPSLongitude"]};l.callApi(p,{apiLanguage:e},function(e,o){if(!o)return console.log("No results for API call: ",p),a();var r,l=o.pages,c=function(e,t){if(e){var o=e[t];return o?o.value:void 0}},h=0;for(var f in l){var g=d[h];h++;var m=l[f],v=(m.imageinfo&&m.imageinfo.length)>0?m.imageinfo[0]:{thumburl:g.src,thumbwidth:g.w,thumbheight:g.h,user:"",timestamp:"",mediatype:"BITMAP",width:g.w,height:g.h,size:1e5,mime:"image/jpeg"},w=null;for(var y in s){console.log(s[y].wikipediaPageTitle);try{if(decodeURIComponent(s[y].wikipediaPageTitle)===m.title){w=s[y];break}}catch(e){console.log("exception retreiving data from api"),w=null}}if(w){w.bucket.src=v.thumburl,w.bucket.w=v.thumbwidth,w.bucket.h=v.thumbheight,(new Image).src=w.bucket.src;var b=v.extmetadata;w.info.fetched=!0,w.info.uploadUser=v.user,w.info.uploadDate=new Date(v.timestamp),w.info.mediatype=v.mediatype,w.info.dateRaw=c(b,"DateTime"),w.info.date=w.info.dateRaw?new Date(w.info.dateRaw):null,w.info.date&&isNaN(w.info.date.getTime())&&(w.info.date=w.info.dateRaw),w.info.dateOriginalRaw=c(b,"DateTimeOriginal"),w.info.dateOriginal=(r=w.info.dateOriginalRaw)?r.replace(/(<([^>]+)>)/gi,""):r,w.info.dateOriginal&&!w.info.dateOriginal.match(/[1-9]/)&&(w.info.dateOriginal=null),w.info.description=c(b,"ImageDescription"),w.info.descriptionSafe=n.trustAsHtml(w.info.description),w.info.gps={lat:c(b,"GPSLatitude"),long:c(b,"GPSLongitude")};var k="unknown";"True"===c(b,"Copyrighted")&&(k="yes"),"False"===c(b,"Copyrighted")&&(k="no"),w.info.license={detected:c(b,"License"),name:c(b,"LicenseShortName"),usageTerms:c(b,"UsageTerms"),url:c(b,"LicenseUrl"),permission:c(b,"Permission"),credit:c(b,"Credit"),artist:c(b,"Artist"),copyrightForPublicDomainImages:k},w.original.url=v.url,w.original.w=v.width,w.original.h=v.height,w.original.size=v.size,w.original.mime=v.mime}else i.debug("No item found for API result:",m),i.debug("List of all items scanned: ",s)}var x=$(".gallery_main.bucket");u.listenToImageLoad(x,t.current),a()})},t.onThumbClick=function(e,t){u.setActiveItem(t)},t.onNextClick=function(e,o){var i=t.current.index+1;u.setActiveItemByIndex(i)},t.onPrevClick=function(e,o){var i=t.current.index-1;u.setActiveItemByIndex(i)}}];(app=angular.module("wikiwand")).controller("GalleryController",galleryControllerParams);var app=angular.module("wikiwand"),UserVoice=null;analytics.gaInitialize("wikiwand"),app.controller("ShellController",["$window","$scope","$timeout","$q","ipCookie","Utilities","ActivationServiceRev2","userPreferences","$http","$rootScope","TestingService","MapHelper","userService",function(e,t,o,i,n,a,r,s,l,c,u,d,p){var h=articleData&&"string"==typeof articleData.rawArticlePath;c.hideToolbar=!!h,c.hideTOC=!0,c.hideCoverImageLandscape=!0,c.precache_from_extension=precache_from_extension;var f=this;window.jQuery||trackJsInfo(e,"jQuery not loaded properly");t.doc={title:document.title},t.win={location:{href:window.location.href}},c.menuOpen=!1,articleData?(articleData.cache&&articleData.cache.key&&n("lastView",articleData.cache.key,{path:"/"}),articleData.mainImage&&articleData.mainImage.full&&["urlDesktop","urlMobile","originalUrl"].forEach(function(e){articleData.mainImage.full[e]=articleData.mainImage.full[e].replace("http://","//")}),c.articleData=articleData):c.articleData={},s.updatePageStyle("init"),c.btnHover=!1,c.canvasSupported=a.isCanvasSupported(),c.touchDevices=a.isTouchDevice(),d.getMapImage(),t.initializeShellController=function(){if(1==precache_from_extension)return $("#imagePlaceHolder").css({width:"100%",height:"auto",top:"0px",left:"0px",opacity:1}),void(c.tocShow=!1);if(trackJsInfo(e,"init activation service"),r.loadState(),trackJsInfo(e,"init testing service"),u.initializeTests(),trackJsInfo(e,"init mon service"),t.hideGlobalNotice=function(){t.showGlobalNotice=!1,n("wikiwand.dont_show_global_notice","1",{path:"/",expires:1})},serverData&&serverData.settings&&serverData.settings.msg_to_all_users){var i=serverData.settings.msg_to_all_users;1==i.show&&i.text.length>3&&!n("wikiwand.dont_show_global_notice")&&(t.globalNoticeText=i.text,t.showGlobalNotice=!0)}$(document).ready(function(){if("wikiwand"==serverData.layout){var e={daysHidden:1,daysReminder:1,title:"Wikiwand for iPhone",author:"Wikiwand",iOSUniversalApp:!1};!1,$.smartbanner(e)}else"false"==serverData.showTOC?c.tocShow=!1:c.tocShow=!0}),$(window).load(function(){setTimeout(f.loadLast,3e3),1==loadedFromCache&&o(function(){f.testWikipediaRevision()},5e3),o(function(){f.testWikipediaRevision()},6e5)})},c.pressedTellAFriendLink=function(e,t){t||(t="undefined"),analytics.gaVirtualPageView("virtualpageview/invites/sent-"+t+"/"+e),analytics.gaVirtualPageView("virtualpageview/invites/sent-"+t),analytics.gaVirtualPageView("virtualpageview/invites/sent"),analytics.gaEvent("activation","sent referral",e)},c.$on("prefetchArticle",function(e,t){f.prefetch(t[0])}),c.$on("precacheArticle",function(e,t){f.precache(t[0])}),c.clickedOutside=function(){t.$broadcast("closePopups",[]);try{$("#main_menu .menu-tooltip").tooltipster("enable"),$(".disambig-wrapper").length>0&&a.isTouchDevice()&&$(".disambig-wrapper").tooltipster("hide")}catch(e){console.log("tooltipster not ready")}},c.clickedAnywhere=function(e){1===e.which&&t.$broadcast("clickedAnywhere",[])},c.reloadArticle=function(){analytics.gaEvent("debug","reloading page","reloadArticle"),setTimeout(function(){e.location.reload()},1e3)},c.loadGplusScript=function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/platform.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},c.extensionPopup=function(e){r.extensionPopup(e)},c.activationHover=function(e){a.isTouchDevice()||(t.btnHover="enter"===e)},c.reportClick=function(e){analytics.gaVirtualPageView("virtualpageview/reportClick/"+e)},c.userClick=function(e,t,o){e&&(o?analytics.gaVirtualPageView("virtualpageview/userClick/"+t+"/"+o):analytics.gaVirtualPageView("virtualpageview/userClick/"+t))},c.report=function(e){analytics.gaVirtualPageView("virtualpageview/"+e)},c.reportTomer=function(){var e="virtualpageview/article-promo-TIGER-STYLE/install-click-text/"+reportText;analytics.gaVirtualPageView(e)},c.activationButtonClicked=function(e){r.activationButtonClicked(e)},c.new_visitor_notice=function(){r.new_visitor_fold_clicked()},c.reportImage=function(t,o,i){trackJsInfo(e,"reportImage"),console.log("report cover image"),analytics.gaEvent("report-"+o,articleData.cache.canonical,i);var n=s.getPref("lstrpt");s.getPref("joined")||s.setPref("joined",(new Date).getTime());var a={lstrpt:n,joined:s.getPref("joined"),type:o,articleData:articleData,url:i},r=JSON.stringify(a),u=l({method:"post",url:"/api/reportImage",data:r});c.showReportCoverImageText1=!1,c.showReportCoverImageText2=!0,u.success(function(e){s.setPref("lstrpt",(new Date).getTime()),console.log("success reporting image",i)}),u.error(function(){})},c.suggestImage=function(t,o,i){trackJsInfo(e,"suggestImage"),console.log("suggest cover image",i),analytics.gaEvent("report-"+o,articleData.cache.canonical,i);var n={lstrpt:s.getPref("lstrpt"),joined:s.getPref("joined"),type:o,articleData:articleData,url:i},a=JSON.stringify(n);c.showSuggestImageText1=!1,c.showSuggestImageText2=!0;var r=l({method:"post",url:"/api/reportImage",data:a});r.success(function(e){s.setPref("lstrpt",(new Date).getTime()),console.log("success reporting image")}),r.error(function(){c.showSuggestImageText1=!1,c.showSuggestImageText2=!0})},f.recache=function(){trackJsInfo(e,"recache"),articleData.rawArticlePath=articleData.rawArticlePath.split("#")[0];var i="/"+articleData.langCodeUrl+"/"+articleData.rawArticlePath+"?recache=1&callback=JSON_CALLBACK&cachedate="+articleData.cache.cacheDate+"&hash="+articleData.cache.hash;try{l.jsonp(i).success(function(e){if(e.success){if(e.newArticleData){if(e.newArticleData.cache.wikiRevision==articleData.cache.wikiRevision)return void console.log("Edits were made but not yet approved");t.differenceMinutes<120&&o(function(){t.showRefreshNotice=!0},2e4)}}else console.log("not recaching ",e)}).error(function(e,t,o,i){console.log("response ",e),console.log("caught problem parsing recache response")})}catch(t){console.log("caught problem parsing recache response exception"),e.trackJs&&e.trackJs.track(t)}},f.precache=function(t){trackJsInfo(e,"precache");var o=(t=t.split("#")[0])+"?precache=1&prefetch=1&callback=JSON_CALLBACK";l.jsonp(o).success(function(e){e.success?console.log("successfully cached article "):console.log("failed precache",e)}).error(function(e,t,o,i){})},f.prefetch=function(t){trackJsInfo(e,"prefetch");var o=(t=t.split("#")[0])+"?precache=1&prefetch=1&callback=JSON_CALLBACK";console.log("issuing prefetch request ",o),l.jsonp(o).success(function(e){e.success?(e.CDNFileUrl?f.prefetchSingleFile(e.CDNFileUrl):e.S3FileUrl&&f.prefetchSingleFile(e.S3FileUrl),e.fullUrl&&f.prefetchSingleFile(e.fullUrl),e.wikiwandUrl&&f.prefetchSingleFile(e.wikiwandUrl)):e.redirect?(console.log("redirect to ",e.redirect),f.prefetch(e.redirect)):console.log("not prefetching ",e)}).error(function(e,t,o,i){console.log("error ",e,t,o,i)})},f.prefetchSingleFile=function(t){trackJsInfo(e,"prefetchSingleFile"),t=t.replace("https://","//").replace("http://","//"),l({method:"GET",url:t}).success(function(e,t,o,i){console.log("downloaded file (prefetch)")}).error(function(e,t,o,i){console.warn("Failed to download a file (pre-fetching). This is not a critical issue, but doesaffect loading speed. If you are using an extension which forces the use of https, you might want to go to https://www.wikiwand.com where everything will run smoother.")})},f.testWikipediaRevision=function(){if(articleData&&articleData.title&&articleData.cache&&!articleData.pageIsComparison){var o=(new Date).getTime();t.differenceMinutes=(o-articleData.cache.cacheDate)/6e4;var i=articleData.langCodeUrl;"zh-"===i.substr(0,3)&&$.inArray(i,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])>=0&&(i="zh");var n="https://"+i+".wikipedia.org/w/api.php?action=query&prop=revisions&format=json&rvprop=ids%7Cflags%7Ctimestamp&rvlimit=1&titles="+encodeURIComponent(decodeURIComponent(articleData.rawArticlePath))+"&redirects=1&continue=&callback=JSON_CALLBACK";try{l.jsonp(n).success(function(o){if(o&&o.query&&o.query.pages){var i=o.query.pages;for(var n in void 0!==o.warnings&&e.trackJs&&e.trackJs.track("revision: got warnings from API"),("object"!=typeof i||i&&0==i.length)&&e.trackJs&&e.trackJs.track("revision: no pages in Wikipedia API response"),i){var a=i[n];for(var r in("object"!=typeof a.revisions||a.revisions&&0==a.revisions.length)&&(void 0!==a.missing?-1==articleData.rawArticlePath.indexOf(":")&&(t.showDeletedNotice=!0):e.trackJs&&e.trackJs.track("revision: no page.revisions in Wikipedia API response")),a.revisions){var s=a.revisions[r];try{if(void 0!==s.revid){if(s.revid.toString()!=articleData.cache.wikiRevision)return f.recache()}else e.trackJs&&e.trackJs.track("revision: no revid in Wikipedia API response")}catch(t){e.trackJs&&e.trackJs.track("revision: exception parsing wikipedia revision")}break}break}}}).error(function(t,o,i,n){trackJsInfo(e,"error issuing wikipedia request:"),trackJsInfo(e,"data:",JSON.stringify(t)),trackJsInfo(e,"status:",JSON.stringify(o)),trackJsInfo(e,"headers:",JSON.stringify(i)),trackJsInfo(e,"config:",JSON.stringify(n))})}catch(t){trackJsInfo(e,"problem with making api call to wikipedia"),e.trackJs&&e.trackJs.track(t)}}else console.log("not an article")},c.loadUserVoice=function(){UserVoice?console.log("already have userVoice"):(console.log("loading uservoice"),UserVoice=window.UserVoice||[],function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//widget.uservoice.com/he5ETYZF0S28rbrL1qP0Q.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),UserVoice.push(["identify",{}]))},c.reportComments=function(e,o){if(e){if(o||(o=""),e.indexOf("hover")>=0){if(t["reported_comments_"+e])return;t["reported_comments_"+e]=!0}"production"!=serverData.config.environment?console.log("Sending Analytics:","fb-comments",e,o):(analytics.gaEvent("fb-comments",e,o),analytics.gaVirtualPageView("virtualpageview/fb-comments/"+e+"/"+o))}},f.loadLast=function(){"/extension/thank-you"==window.location.pathname&&t.loadGplusScript()},angular.element(document).ready(function(){trackJsInfo(e,"Dom ready"),void 0===serverData.publisherHostCode&&o(function(){trackJsInfo(e,"setting tooltipster to #main_menu .menu-tooltip"),trackJsInfo(e,"jquery element is ",$("#main_menu .menu-tooltip")),$("#main_menu .menu-tooltip").tooltipster({theme:".toolbar-tooltip",arrow:!0,offsetY:10,position:"bottom",trigger:"hover",animation:"fade",speed:100,interactive:!1})},1e3),o(function(){c.precache_from_extension||(c.loadVariousPopups=!0)},3e3),o(function(){c.precache_from_extension||(c.hideToolbar=!1,c.hideTOC=!1,c.hideCoverImageLandscape=!1)},0),$(document).keydown(function(e){if($(".search_btn ").hasClass("focus")&&13===e.keyCode){var t=$("#queryinput").val();0==$(".tt-suggestion").length&&(console.log("no suggestions"),document.location="/"+articleData.langCodeUrl+"/"+t)}}),a.isCanvasSupported()||($(".html5-only").show(),$("#loading").hide()),a.isTouchDevice()&&($("#main_menu").addClass("navbar_opaque"),$("#wikiwand_toc").css("overflow","auto")),$("#splashscreen").hide(),c.rtl=$("body").hasClass("rtl")}),t.$on("articleContentReadyFromShell",function(){c.hideToolbar=!1,c.hideTOC=!1,c.hideCoverImageLandscape=!1,c.cohorts&&"newtab"==c.cohorts.mon_bottom&&($("#footer-banner-wrapper").show(),$(".wikiwand_footer").addClass("no_margin"))}),c.previewSelection="true"==localStorage.previewSelection,c.togglePreviewSelection=function(){void 0===localStorage.previewSelection?c.report("article-promo-SHORT-NOTICE/initial-toggle"):c.report("article-promo-SHORT-NOTICE/additional-toggle"),localStorage.previewSelection=c.previewSelection,toggleFrame(c.previewSelection)},c.togglePreviewSelectionFromSpan=function(){c.previewSelection=!c.previewSelection,c.togglePreviewSelection()}}]),(app=angular.module("wikiwand")).controller("CoverImageController",["$scope","$rootScope","$window",function(e,t,o){var i=this;i.calculateCoverHeight=function(){articleData.mainImage},t.initializeCoverImage=function(){trackJsInfo(o,"initializeCoverImage"),i.calculateCoverHeight(),e.finalImageURL=articleData.mainImage.full.urlDesktop.replace("http://","//").replace("https://","//")},articleData.mainImage&&t.initializeCoverImage()}]),(app=angular.module("wikiwand")).controller("PreferredLanguagesController",["$scope","$log","$timeout","LanguagePreferences",function(e,t,o,i){e.$on("openLanguagesDropdown",function(){e.list=[],o(function(){var t=i.getLangPrefs();if(articleData.availableLanguages){var o=articleData.availableLanguages,n={};_.each(t,function(e,t){1==e.fav?n[e.lang]={NameEnglish:e.NameEnglish,tooltip:"No such article in "+e.NameEnglish,hasArticle:!1,articleLink:"javascript:void(0)",langAbberviation:e.lang.slice(0,2),articleTitle:"",lang:e.lang,count:e.count,fav:e.fav}:delete n[e.lang]}),_.each(o,function(e,t){n[e.langCodeURL]&&(n[e.langCodeURL].hasArticle=!0,n[e.langCodeURL].articleLink=e.articleLink,n[e.langCodeURL].articleTitle=e.articleTitle,n[e.langCodeURL].tooltip="Read article in "+e.langEnglishName)});var a=_.sortBy(n,function(e){return-e.count});if((a=a.slice(0,6)).length>5){var r=a[5].count;Object.keys(t).length>6&&i.removeLangsLowerThanCount(r)}e.list=a}else e.list=[];var s=0;_.each(e.list,function(e,t){e.hasArticle&&s++}),e.numOfAvailablePreferredLanguages=s},0)})}]),(app=angular.module("wikiwand")).controller("AllAvailableLanguagesController",["LanguagePreferences","$scope","$timeout","$log","$rootScope","$http","Utilities",function(e,t,o,i,n,a,r){t.filterByQueryWikipedia=function(e){return!t.filterQueryWikipedia||(!!~e.NameEnglish.toLowerCase().indexOf(t.filterQueryWikipedia.toLowerCase())||(!!~e.NameNative.toLowerCase().indexOf(t.filterQueryWikipedia.toLowerCase())||!!~e.CodeURL.toLowerCase().indexOf(t.filterQueryWikipedia.toLowerCase())))},t.filterByQueryArticle=function(e){return!t.filterQuery||(!!~e.langEnglishName.toLowerCase().indexOf(t.filterQuery.toLowerCase())||(!!~e.langNativeName.toLowerCase().indexOf(t.filterQuery.toLowerCase())||!!~e.langCodeURL.toLowerCase().indexOf(t.filterQuery.toLowerCase())))},t.filterUnrecognizedLangs=function(e){return!!e.langAbberviation},t.refreshFavoritesList=function(){var e=_.filter(t.wikipediaLanguages,function(e,t){return 1==e.fav});t.favoriteLanguages=e},t.$on("showAllArticleLanguagesFunc",function(e){n.langOpenArticle=!0,articleData.availableLanguages?t.articleLanguageLinks=articleData.availableLanguages:t.articleLanguageLinks=[],o(function(){r.isTouchDevice()||$("#lang ul").niceScroll({cursorcolor:"#000",cursoropacitymax:.3,cursorwidth:3,cursorborderradius:4,railpadding:{top:2,right:2,left:2,bottom:2},cursorborder:"none",railalign:"left",zindex:360}),$("#lang_input").focus()},10)}),t.$on("showAllWikipediaLanguagesFunc",function(i){r.isTouchDevice()||o(function(){$("#p-lang_search ul").niceScroll().hide()},0),n.langOpenWikipedia=!0,a.get("/js/wikipedia-lang-infos-client-dictionary.js").success(function(i,n,a,r){t.wikipediaLanguages=_.toArray(i),Object.keys(t.wikipediaLanguages).length>0&&(_.each(t.wikipediaLanguages,function(e,t){e.CodeURL&&(e.langAbberviation=e.CodeURL.slice(0,2))}),_.each(e.getLangPrefs(),function(e){_.each(t.wikipediaLanguages,function(o,i){t.wikipediaLanguages[i].CodeURL==e.lang&&(t.wikipediaLanguages[i].fav=e.fav)})}),t.refreshFavoritesList(),o(function(){$("#lang ul, #p-lang_search ul").getNiceScroll().resize(),$("#lang_input").focus()},500))})}),t.$on("hideAllArticleLanguagesFunc",function(e){t.wikipediaLanguages=[],n.langOpenArticle=!1}),t.$on("hideAllWikipediaLanguagesFunc",function(e){t.wikipediaLanguages=[],n.langOpenWikipedia=!1}),t.toggleFavorite=function(o,i){e.toggleLangFave(o,i);var n=e.getLangPrefs();_.each(t.wikipediaLanguages,function(e,i){e.CodeURL==o&&(t.wikipediaLanguages[i].fav=n[o].fav)}),t.refreshFavoritesList()}}]);var MAX_RESULTS_PER_LANG=8,MAX_PRELOADED_RESULTS=3,SEARCH_RESULTS_LINE_HEIGHT=40,RTL_LANGS=["aeb","ar","arc","arq","ary","arz","az-ara","bqi","ckb","fa","glk","ks-arab","he","lat-hebr","ps","sd","ur","ydd","yi"],preload_dict={};(app=angular.module("wikiwand")).controller("ArticleSearchControllerRev2",["$scope","$rootScope","$log","LanguagePreferences","$timeout","$http","Utilities",function(e,t,o,i,n,a,r){var s=this,l={},c=!1;s.doesConnectionExist=function(){var e=new XMLHttpRequest,t=Math.round(1e4*Math.random());e.open("HEAD","/favicon.ico?rand="+t,!1);try{return e.send(),e.status>=200&&e.status<304}catch(e){return!1}},s.preloadResult=function(){},s.testCtrl=function(){c?(console.log("double click ctrl"),t.showSearch?(t.openSearch("close"),analytics.gaEvent("search","double-ctrl","close")):(t.openSearch("open"),analytics.gaEvent("search","double-ctrl","open"),setTimeout(function(){$("#queryinput").focus()},100))):(c=!0,n(function(){c=!1},300))},$(window).keyup(function(e){if(191!=e.which||t.showSearch||(t.openSearch("open"),analytics.gaEvent("search","slash hit","open"),setTimeout(function(){$("#queryinput").focus()},100)),17!=e.which)return!0;s.testCtrl()}),t.showSearch=!1,e.searchFocus=!1,t.openSearch=function(o){"open"===o?(analytics.gaEvent("search","open","open"),t.showSearch=!0,n(function(){angular.element("#queryinput").focus()},0),e.searchFocus=!0):"close"===o&&(analytics.gaEvent("search","open","close"),e.searchFocus=!1,t.showSearch=!1)};!function(){var e="؀-ۿ";e+="ݐ-ݿ",e+="ﭐ-﷿",e+="ﹰ-\ufeff",e+="֑-״";var t=new RegExp("^[\\.,-\\/#!$%\\^&\\*;:{}=\\-_`~()]*["+e+"]"),o=new RegExp("^[\\.,-\\/#!$%\\^&\\*;:{}=\\-_`~()]*$");var i=function(){var e,i,n=$("#queryinput").val(),a=(e=n,i=$("body").hasClass("rtl"),""===e?i:!!e.match(t)||!!e.match(o)&&i),r=$("#queryinput");a?r.addClass("rtl"):r.removeClass("rtl")};$("#queryinput").keypress(i),$("#queryinput").keyup(i)}(),e.navigateTo=function(e){window.location.search.indexOf("in_iframe")>-1?window.top.location.href=e:window.location.href=e};var u=["en"];e.resultClicked=function(o,i){var n=-2;o.preventDefault(),_.each(e.search.results,function(t,o){t.linkEncoded==i?(e.search.results[o].selected=!0,e.search.results[o].c="loading",e.search.selectedIndex=o,n=o):e.search.results[o].selected=!1}),-2!=n?(t.searchFocus=!0,e.noSelection=!1,e.navigateTo(i)):console.log("id is null")},e.testKeyboard=function(o){o&&17==o.which&&s.testCtrl();var i=!1;if(o&&(o.preventDefault(),o.stopPropagation()),o&&27==o.which&&t.openSearch("close"),!o||33!=o.which&&36!=o.which||(e.search.selectedIndex=0,$(".results-container").scrollTop(0),i=!0),!o||34!=o.which&&35!=o.which||($(".results-container").scrollTop(1e3),e.search.selectedIndex=e.search.results.length-1,i=!0),o&&38==o.which&&(-1!=e.search.selectedIndex&&(e.search.selectedIndex=e.search.selectedIndex-1),i=!0),o&&40==o.which&&(e.search.selectedIndex!=e.search.results.length&&(e.search.selectedIndex=e.search.selectedIndex+1),i=!0),o&&13==o.which){if(1==e.fullSearch){var n="/"+articleData.langCodeUrl+"/"+e.search.query+"?fullSearch=true";return e.navigateTo(n),void(e.waiting=!0)}if(-1==e.search.selectedIndex){n="/"+articleData.langCodeUrl+"/"+e.search.query;return void e.navigateTo(n)}e.search.results[e.search.selectedIndex];var a=e.search.selectedIndex;return t.searchFocus=!0,e.search.results[e.search.selectedIndex].c="loading",void e.navigateTo(e.search.results[a].link)}if(i){_.each(e.search.results,function(t,o){o==e.search.selectedIndex?e.search.results[o].selected=!0:e.search.results[o].selected=!1}),-1==e.search.selectedIndex?e.noSelection=!0:e.noSelection=!1,e.search.selectedIndex==e.search.results.length?e.fullSearch=!0:e.fullSearch=!1;var r=$("#result_"+e.search.selectedIndex);$("#search_description").fadeOut(200),s.setHoverCard(r),r.position()&&console.log("element scrolll top ",r.position().top);var l=$(".results-container");l.scrollTop();if(r.position()){var c=r.position().top;c<SEARCH_RESULTS_LINE_HEIGHT&&(console.log("element over top of container"),l.scrollTop(l.scrollTop()-SEARCH_RESULTS_LINE_HEIGHT)),c>l.height()-2*SEARCH_RESULTS_LINE_HEIGHT&&(console.log("element over bottom of container"),l.scrollTop(l.scrollTop()+2*SEARCH_RESULTS_LINE_HEIGHT))}}},e.initSearch=function(o){e.noResults=!1,o&&(t.searchType=o,serverData.search&&"true"==serverData.search.autoFocus&&$("#queryinput").focus()),u="undefined"!=typeof articleData&&articleData.langCodeUrl?i.getTopNLangs(3,articleData.langCodeUrl):i.getTopNLangs(3,null),e.waiting=!1,e.search={},e.noSelection=!0,e.search.selectedIndex=-1,e.search.results=[],e.testKeyboard();articleData.searchTranslation&&$("#queryinput").attr("placeholder",articleData.searchTranslation),e.$watch("search.query",function(){""==e.search.query&&(e.search.results=[]),n.cancel(e.searchTriggerTimeoutPromise),n.cancel(e.preloadTimeoutPromise),e.search.selectedIndex=-1,e.noSelection=!0,e.fullSearch=!1,$(".results-container").scrollTop(0),e.searchTriggerTimeoutPromise=n(s.triggerSearch,200)},!0)},s.triggerSearch=function(){void 0!==e.search.query&&""!=e.search.query&&_.each(u,function(t,o){e.waiting=!0,s.issueSearchRequest(t,e.search.query,!1),s.issueSearchRequest(t,e.search.query,!0)})},s.issueGoogleRequest=function(t){if(void 0!==t){var o="//suggestqueries.google.com/complete/search?client=chrome&hl=en&q="+t+"&callback=JSON_CALLBACK";a.jsonp(o).success(function(t){if(""!=e.search.query){t&&t[1]&&t[1].length>0&&(t.results=t[1].slice(0,5)),e.noResults=!1,e.search.selectedIndex=-1,e.search.results=_.reject(e.search.results,function(e){return"google-suggest"==e.lang});var o=0;_.each(t.results,function(t){if(0!=t.indexOf("http://")&&0!=t.indexOf("https://")){var i={};0==o&&(i.firstInlang=!0,i.langtag="from google"),i.lang="google-suggest",i.rtl=!1,i.T=t,i.desc=null,"true"==serverData.search.cse?i.link="/google-search?q="+t:i.link="//www.google.com/search?q="+t,i.backgroundImageSring="url(/img/google_search_icon.png)",i.linkEncoded=encodeURI(i.link),e.search.results.push(i),o++}}),e.search.results=_.sortBy(e.search.results,function(e){return _.indexOf(u,e.lang)}),e.noResults=0==e.search.results.length}}).error(function(t,o,i,n){if(console.log("error receiving response from google api ",o),0==s.doesConnectionExist()){var a={lang:"google-suggest",rtl:!1,T:"No internet conenction"};e.search.results=_.reject(e.search.results,function(e){return"google-suggest"==e.lang}),e.search.results.push(a)}})}},s.issueBingRequest=function(t){if(console.log("issue bing request"),void 0!==t){var o="http://api.bing.com/osjson.aspx?query="+t+"&market=en_us&JsonType=callback&JsonCallback=JSON_CALLBACK";a.jsonp(o).success(function(t){if(""!=e.search.query){console.log("data from bing ",t),t&&t[1]&&t[1].length>0&&(t.results=t[1].slice(0,5)),e.noResults=!1,e.search.selectedIndex=-1,e.search.results=_.reject(e.search.results,function(e){return"bing-suggest"==e.lang});var o=0;_.each(t.results,function(t){if(0!=t.indexOf("http://")&&0!=t.indexOf("https://")){var i={};0==o&&(i.firstInlang=!0,i.langtag="from bing"),i.lang="bing-suggest",i.rtl=!1,i.T=t,i.desc=null,i.link="//www.bing.com/search?q="+t,i.backgroundImageSring="url(/img/bing_search_icon.png)",i.langtag="from bing",i.linkEncoded=encodeURI(i.link),e.search.results.push(i),o++}}),e.search.results=_.sortBy(e.search.results,function(e){return _.indexOf(u,e.lang)}),e.noResults=0==e.search.results.length}}).error(function(t,o,i,n){if(console.log("error receiving response from bing api ",o),0==s.doesConnectionExist()){var a={lang:"google-suggest",rtl:!1,T:"No internet conenction"};e.search.results=_.reject(e.search.results,function(e){return"google-suggest"==e.lang}),e.search.results.push(a)}})}},s.issueSearchRequest=function(t,o,i){var n="/api/search/"+t+"/"+o;document.location.href.indexOf("debug_search=1")>-1&&(n+="?debug_search=1"),1==i&&(n="/api/searchwiki/"+t+"/"+o),a({method:"GET",url:n}).success(function(n,a,r,s){if(""!=e.search.query&&(0==i&&(l["/"+t+"/"+o]=!0),1!=i||!l["/"+t+"/"+o])){e.noResults=!1,e.search.selectedIndex=-1,e.testKeyboard(),e.waiting=!1,e.search.results=_.reject(e.search.results,function(e){return e.lang==n.lang});var c=0;_.each(n.results,function(t){c>MAX_RESULTS_PER_LANG-1||(0==c&&(t.firstInlang=!0),t.lang=n.lang,t.rtl=-1!=_.indexOf(RTL_LANGS,n.lang),t.link="/"+n.lang+"/"+t.t.split(" ").join("_"),t.linkEncoded=encodeURI(t.link),null==t.u?t.backgroundImageSring="url(//assets.wikiwand.com/img/search_placeholder.png)":t.backgroundImageSring="url('"+t.u+"')",null==t.u?t.desc="<p>"+t.d+"</p>":null==t.d?t.desc="":t.desc="<img src='"+t.u+"' alt='wikiwand'/><p>"+t.d+"</p>","ww-c-disambig"==t.c&&(t.desc=""),e.search.results.push(t),c++)}),e.search.results=_.sortBy(e.search.results,function(e){return _.indexOf(u,e.lang)}),0==e.search.results.length?e.noResults=!0:e.noResults=!1}}).error(function(e,t,o,i){})},s.setHoverCard=function(e){var t=e,o=t.offset(),i=t.attr("desc-attr");i&&(""!=i&&i.length>20&&$("#search_description").stop().fadeIn(100).html(i).css({top:o.top-$(window).scrollTop(),left:o.left-$("#search_description").width()-32}),t.hasClass("rtl")?$("#search_description").addClass("rtl"):$("#search_description").removeClass("rtl"))},angular.element(document).ready(function(){r.isTouchDevice()||($("body").on("mouseenter",".searchResult",function(){s.setHoverCard($(this))}),$("body").on("mouseleave",".searchResult, .results-container",function(){$("#search_description").fadeOut(200),$(".searchResult").removeClass("selectedResult")}))});navigator.userAgent.toLowerCase()}]),(app=angular.module("wikiwand")).controller("ToolbarController",["$scope","$log","Utilities","ipCookie","$timeout","$rootScope","userPreferences","$route",function(e,t,o,i,n,a,r,s){function l(){try{$("#main_menu .menu-tooltip").tooltipster("disable"),$("#main_menu .menu-tooltip").tooltipster("hide")}catch(e){console.log("tooltipster not ready")}$("#header").addClass("foldfix")}$(document).keydown(function(e){if(191===e.keyCode){var t=$("#queryinput");return!!t.is(":focus")||(t.focus(),!1)}}),i("wikiwand.bookmarks.count")&&(a.bookmarkCount=i("wikiwand.bookmarks.count")),e.langAbbreviation=articleData.langCodeUrl.slice(0,2).toUpperCase(),e.toggleWikiwandMenu=function(t){1!=e.showWikiwandMenu?(e.closeAllMenus(),e.showWikiwandMenu=!0,l()):e.closeAllMenus(),t.stopPropagation()},e.toggleLanguageMenu=function(t){1!=e.showLanguageMenu?(e.closeAllMenus(),e.showLanguageMenu=!0,a.$broadcast("openLanguagesDropdown"),l()):e.closeAllMenus(),t.stopPropagation()},e.togglePerMenu=function(t){1!=e.showPerMenu?(e.closeAllMenus(),e.showPerMenu=!0,l(),analytics.gaEvent("preferences","popup","opened")):(e.closeAllMenus(),r.setPref("prefAttention","true")),t.stopPropagation()},e.hidePerMenu=function(t){$(".menu_per").fadeOut(),setTimeout(function(){e.showPerMenu=!1},1e3),r.setPref("prefAttention","true"),t.stopPropagation()},n(function(){if("true"!=r.getPref("prefAttention")||serverData.callToPersonalize){if(!a.activation)return;a.activation.vetek;(a.inFrame||serverData.callToInstallExtension||serverData.callToPersonalize)&&(!0,serverData.callToPersonalize&&(analytics.gaVirtualPageView("/virtualpageview/article-promo-pers/impression"),a.callToPersonalize=!0)),"homepage"==i("wikiwand.activation.first_impression")&&!0,$("body").hasClass("rtl")&&!1,o.isTouchDevice()&&!1,!1&&(e.showPerMenu=!0,l(),a.prefsTouched="true"==r.getPref("prefsTouched"),"true"!=r.getPref("prefAttention")&&n(function(){$(".per_serif").addClass("new_pref")},0),r.setPref("prefAttention","true"))}},2e3),e.showUserVoice=!1,e.showCoverReport=!1;var c=function(){if(!UserVoice)return a.loadUserVoice(),void setTimeout(c,50);UserVoice.push(["embed","#user_voice_wrapper",{trigger_style:"icon",accent_color:"#3392af",trigger_color:"white",trigger_background_color:"rgba(46, 49, 51, 0.6)",locale:"en",contact_title:"Report a Bug (English please)",smartvote_title:"What should we add next?"}])};e.openUserVoiceDialog=function(){c()},e.toggleFeedbackMenu=function(t){void 0===UserVoice&&a.loadUserVoice(),1!=e.showFeedbackMenu?(e.showUserVoice=!1,e.showCoverReport=!1,a.showReportCoverImageText1=!0,a.showReportCoverImageText2=!1,e.closeAllMenus(),e.showFeedbackMenu=!0,l()):e.closeAllMenus(),t.stopPropagation()},e.toggleBookmarkFeed=function(t){a.loadBookmarkController=!0,1!=a.showBookmarkFeed?(e.closeAllMenus(),a.showBookmarkFeed=!0,l(),analytics.gaEvent("bookmarks","open-pane","toolbar"),analytics.gaVirtualPageView("virtualpageview/bookmarks/open-pane/toolbar")):e.closeAllMenus(),t.stopPropagation()},e.toggleShareMenu=function(t){if(1!=e.showShareMenu){e.closeAllMenus(),e.showShareMenu=!0;var o=encodeURIComponent(window.location.href);$(".share-facebook a").attr("href","https://www.facebook.com/sharer/sharer.php?u="+o),$(".share-twitter a").attr("href","https://twitter.com/home?status="+o),$(".share-gplus a").attr("href","https://plus.google.com/share?url="+o),$(".share-reddit a").attr("href","https://.com/share?url="+o),a.articleData.pageIsArticle&&!a.articleData.pageIsComparison?$(".share-gmail a").attr("href","https://mail.google.com/mail/?view=cm&fs=1&tf=1&to=&su="+encodeURIComponent(a.articleData.title)+" - From Wikipedia&body=Check this out%0A%0A"+o):$(".share-gmail a").attr("href","https://mail.google.com/mail/?view=cm&fs=1&tf=1&to=&su="+encodeURIComponent(document.title)+"&body=Check this out%0A%0A"+o),l()}else e.closeAllMenus();t.stopPropagation()},e.today=(new Date).getDate(),e.closeAllMenus=function(){e.showWikiwandMenu=!1,e.showLanguageMenu=!1,a.callToPersonalize||(e.showPerMenu=!1),e.showFeedbackMenu=!1,a.showBookmarkFeed=!1,e.showShareMenu=!1,$("#header").removeClass("foldfix"),a.shareGist=!1,a.openFact=!1},e.clickedInside=function(e){e.stopPropagation()},e.$on("closePopups",function(t,o){e.closeAllMenus()}),angular.element(document).ready(function(){o.isTouchDevice()||($(window).on("scroll",function(){$(this).scrollTop()>250?($("#header, #gist_wrapper").addClass("fold").removeClass("hovered"),$(".new_visitor").addClass("display_after_scroll"),$('.wikipedia_tooltip:not(".new_visitor")').removeClass("active"),$("#main_menu, #bookmark_wrapper").addClass("navbar_opaque")):(a.articleData.mainImage&&("cover"==a.articleData.mainImage.mode||"new_cover"==a.articleData.mainImage.mode&&$("#cover_image_wrapper").length>0)&&$("#main_menu, #bookmark_wrapper").removeClass("navbar_opaque"),$("#header, #gist_wrapper").removeClass("fold"),$('.wikipedia_tooltip:not(".new_visitor")').addClass("active"))}),$("body").on("mouseenter","#header.fold",function(){$(this).addClass("hovered"),$("#gist_wrapper").removeClass("fold")}))})}]),(app=angular.module("wikiwand")).controller("TableOfContentsController",["$scope","$rootScope","$log","Utilities","$timeout","userPreferences",function(e,t,o,i,n,a){if(1!=precache_from_extension){var r,s,l=this;l.$scrollableElement=$(document),l.$headerElement=$("#header"),e.button={},e.activeButton=null,$(window).resize(function(){n.cancel(s),s=n(function(){(c=$(window).width())>920?(!0===a.getPref("TOC_folded")?t.tocShow=!1:t.tocShow=!0,t.mobileRes=!1):(t.tocShow=!1,t.mobileRes=!0)},100)}),$(document).keydown(function(e){$("#gallery").is(":visible")||1!=t.searchFocus&&(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||(37===e.keyCode&&l.scrollToNextOrPrevSection(-1),39===e.keyCode&&l.scrollToNextOrPrevSection(1)))}),t.tocFold=function(o){console.log("toc fold"),o&&(e.rtl?t.tocShow="swipeRight"===o:t.tocShow="swipeLeft"===o),"mobile"!==o&&(t.tocShow=!t.tocShow,!1===t.tocShow?a.setPref("TOC_folded",!0):!0===t.tocShow&&a.setPref("TOC_folded",!1))},t.tocMobileFold=function(){!0===t.mobileRes&&(t.tocShow=!1)},t.tocGenerate=function(){var t=["SUP"],o=function(e){for(var t=e,o=e.childNodes.length-1;o>=0;o--){var i=e.removeChild(e.childNodes[o]);e.parentNode.insertBefore(i,t),t=i}e.parentNode.removeChild(e)},a=function(e){if(e.text&&e.text.indexOf("<")>-1){var i=document.createElement("div");i.innerHTML=e.text,function(e){for(var i=Array.prototype.slice.apply(e.getElementsByTagName("*"),[0]),n=0;n<i.length;n++)-1==t.indexOf(i[n].nodeName)&&o(i[n])}(i),e.sanitizedText=i.innerHTML}else e.sanitizedText=e.text;if(e.children)for(var n in e.children){var r=e.children[n];r&&a(r)}};n(function(){e.articleTitle=articleData.title,articleData.TOC&&(a(articleData.TOC),e.level2=articleData.TOC.children)},0),n(function(){if(!i.isTouchDevice()){var e=window.location.hash,t="";if(e&&(t="#/"===e.substr(0,2)?e.substr(2):e.substr(1)),""!=t){if("discussions"==t)return void l.scrollToElement($("#discussions"),!0);var o="toc_btn_"+t.split("%20").join("_").split(" ").join("_"),n="#"+l.escapeStringForSelector(o);try{var a=angular.element(n).children("a").eq(0)}catch(e){console.log("problem parsing hashtag")}if(a&&a.length>0){$("nav#header").addClass("fold"),l.clickTocButton(a,!0);var r=0,s=setInterval(function(){l.clickTocButton(a,!0),r=0},1e3),c=function(){s&&(clearInterval(s),s=null)};$(document).scroll(function(){r++>1&&c()}),setTimeout(function(){c()},8e3)}else console.log("error finding selector children: ",n)}else l.updateTocActiveButton()}l.$scrollableElement.scroll(function(){return l.updateTocActiveButton()})},200)},l.updateTocActiveButton=function(){var e=$("#article_content_wrapper"),t=e.find("#overview"),o=this.$scrollableElement.scrollTop(),i=0,a=0;l.$headerElement&&(a=l.$headerElement.height());var s=$(window).height()-a;e.find("h2 .mw-headline, h3 .mw-headline").each(function(e,n){var a=$(this),r=.3*Math.min(s,i),c=l.getElementOffset(a)-r;return i=a.outerHeight(),c<=o&&(t=$(this),!0)}),n.cancel(r),r=n(function(){$(".toc_list > li, .toc_list > li a").removeClass("active"),t&&l.activateTocButtonBySection(t)},100)},this.scrollToNextOrPrevSection=function(t){var o=e.activeButton;if(o){var i=$("#wikiwand_toc").find("li"),n=i.index(o)+t;if(!(n<0||n>=i.length)){var a=i.eq(n).find("a").eq(0);a&&1===a.length&&l.clickTocButton(a)}}},l.activateTocButtonBySection=function(e){var t="#toc_btn_"+l.escapeStringForSelector(e.attr("id")),o=$(t);0!==o.length&&this.activateTocButton(o)},l.activateTocButton=function(t){e.activeButton=t;var o=t;t.parent("ol").length>0&&(o=t.parent().parent()).addClass("active").children("a").addClass("active");var i=o.position().top,n=o.outerHeight(),a=$("#wikiwand_toc").height(),r=Math.round(i-(a-n)/2);r<0&&(r=0),r>a&&(r=a);$("#wikiwand_toc").stop().animate({scrollTop:r},{duration:200}),t.addClass("active").children("a").addClass("active")},l.getElementOffset=function(e){var t=e.offset().top,o=0;return l.$headerElement&&(o=l.$headerElement.height()),Math.floor(t-o-10)},l.scrollToElement=function(e,t){if(0!==e.length)if(e.length>1)console.warn("ScrollToElement(): more than one element found: ",e);else{var o=l.getElementOffset(e),n=Math.abs(l.$scrollableElement.scrollTop()-o)/10;n<200&&(n=200),n>400&&(n=400),t&&(n=0),i.isTouchDevice()||t?$("html,body").scrollTop(o):$("html,body").stop().animate({scrollTop:o},{duration:n})}else console.warn("ScrollToElement(): element not found:",e)},$("body").on("click","#toc_btn > span",function(){$("html,body").animate({scrollTop:0},200),window.location.hash=""}),t.scrollToArticleSection=function(e){var t=angular.element("#"+l.escapeStringForSelector(e));l.scrollToElement(t)},l.escapeStringForSelector=function(e){return e?e.replace(/([ #;?&,.+*~\':"!^$[\]()=>|\/@])/g,"\\$1"):e},l.clickTocButton=function(e,t){if(e&&1==e.length){var o=e.attr("href").substr(1),i="#"+l.escapeStringForSelector(o),n=angular.element(i),a=n.parents("div.collapse_title, div.collapse");if(a.length>0){var r=a.parent();r.children("div.collapse_title").addClass("active"),r.children("div.collapse").show()}l.scrollToElement(n,t),$("#content h2 span, #content h3 span").removeClass("active"),n.addClass("active")}},e.button.doClick=function(e){var t=e.currentTarget,o=angular.element(t);l.clickTocButton(o)};var c=$(window).width();c<920&&(t.tocShow=!1,t.mobileRes=!0),t.tocGenerate()}}]),(app=angular.module("wikiwand")).service("LanguagePreferences",["$rootScope","$http",function(e,t){var o={},i=function(){localStorage.wikiwand_languages_rev2||(localStorage.wikiwand_languages_rev2={}),localStorage.wikiwand_languages_rev2=angular.toJson(o)},n=function(){try{if(serverData&&serverData.agent&&serverData.agent.clientLanguages){var e={en:{count:4}},t=serverData.agent.clientLanguages.split(","),n=!1;console.log("array ",t),_.each(t,function(t,o){var i=t.split(";")[0].split("-")[0];console.log("lang",i),"en"==i||n||(e[i]={count:4},n=!0)}),localStorage.wikiwand_languages=angular.toJson(e)}else o={en:{count:1,fav:!0,lang:"en",NameEnglish:"English"},fr:{count:1,fav:!0,lang:"fr",NameEnglish:"French"}},i()}catch(e){o={en:{count:1,fav:!0,lang:"en",NameEnglish:"English"},fr:{count:1,fav:!0,lang:"fr",NameEnglish:"French"}},i()}},a=function(){localStorage.wikiwand_languages_rev2&&(o=angular.fromJson(localStorage.wikiwand_languages_rev2))};return"undefined"!=typeof precache_from_extension&&precache_from_extension||function(){if(function(){try{if(localStorage.wikiwand_languages||n(),localStorage.wikiwand_languages_rev2)return;var e=angular.fromJson(localStorage.wikiwand_languages);console.log("old language pref ",e),t.get("/js/wikipedia-lang-infos-client-dictionary.js").success(function(t,n,a,r){var s=t;_.each(s,function(t,i){e[s[i].CodeURL]&&(console.log("found match ",s[i].CodeURL),e[s[i].CodeURL].fav=!0,e[s[i].CodeURL].lang=s[i].CodeURL,e[s[i].CodeURL].NameEnglish=t.NameEnglish,e[s[i].CodeURL].fav=!0,e[s[i].CodeURL].count>3&&(o[s[i].CodeURL]=e[s[i].CodeURL]))}),i()})}catch(e){console.log("migration of old languages storage failed",e)}}(),a(),"undefined"!=typeof articleData&&articleData.langCodeUrl){var e=articleData.langCodeUrl;o[e]&&(o[e].count=o[e].count+1,i())}}(),{getTopNLangs:function(e,t){for(var i in a(),o)o[i].lang=i,""===i&&delete o[i];var n=_.toArray(o),r=_.sortBy(n,function(e){var t=e.count;return e.fav&&(t+=50),t}).reverse(),s=[];for(var l in t&&s.push(t),r)r[l].lang!==t&&1==r[l].fav&&s.push(r[l].lang);return s=_.first(s,e)},getLangPrefs:function(){return o},toggleLangFave:function(e,t){o[e]?(1==o[e].fav?o[e].fav=!1:o[e].fav=!0,o[e].NameEnglish=t):o[e]={count:1,fav:!0,lang:e,NameEnglish:t},console.log("toggled fav for ",e,"new value is ",o[e].fav),i(),localStorage.wikiwand_last_save=(new Date).getTime()},removeLangsLowerThanCount:function(e){_.each(o,function(t,i){t.count<e&&delete o[t.lang]}),i()}}}]),(app=angular.module("wikiwand")).service("userPreferences",["$rootScope","Utilities","$window",function(e,t,o){e.prefsTouched=!1;var i={},n=function(){if(localStorage.wikiwand_user_prefs)try{i=angular.fromJson(localStorage.wikiwand_user_prefs)}catch(e){o.trackJs&&(trackJsInfo(o,"preferences json string is "+localStorage.wikiwand_user_prefs),o.trackJs.track("problem parsing user prefs",e.message))}return e.isHttps="https:"==location.http,i},a=function(a){if(e.articleData&&!e.articleData.pageIsArticle){if("/news"!=window.location.pathname.toLowerCase())return void console.log("not article page, not loading styling");console.log("news page")}trackJsInfo(o,"updatePageStyle "+a),1==(i=n()).TOC_folded?e.tocShow=!1:e.tocShow=!0;var r=[];t.isTouchDevice()&&r.push("touch"),t.isItInternetExplorer()&&r.push("ie");var s=!1;if(serverData.agent&&"Chrome"==serverData.agent.family&&e.activation){var l=e.activation.joined,c=new Date("Thu, 11 Jun 2015 13:30:00 GMT"),u=new Date("Sun, 28 Jun 2015 12:00:00 GMT");l>c&&l<u&&(s=!0)}"wikiwand"==serverData.layout?i.fontStyle?e.fontStyle=i.fontStyle:e.fontStyle=s?"sansSerif":"serif":(e.fontStyle="sansSerif",document.querySelector("body").classList.add(serverData.publisherHostCode)),i.themeStyle?e.themeStyle=i.themeStyle:e.themeStyle="light",i.txtSize?e.txtSize=i.txtSize:e.txtSize=s?"smallTxt":"mediumTxt",i.columnWidth?e.columnWidth=i.columnWidth:e.columnWidth=s?"full":"narrow",i.justify?e.justifyTxt="true"==i.justify:e.justifyTxt=!1,i.minimalStyle?e.minimalStyle="true"==i.minimalStyle:e.minimalStyle=!!s,"smallTxt"==e.txtSize&&r.push("small_txt"),"mediumTxt"==e.txtSize&&r.push("medium_txt"),"largeTxt"==e.txtSize&&r.push("large_txt"),"serif"==e.fontStyle&&r.push("serif"),"sansSerif"==e.fontStyle&&r.push("sans_serif"),"light"==e.themeStyle&&r.push("light"),"dark"==e.themeStyle&&r.push("dark"),"narrow"==e.columnWidth&&r.push("narrow_column"),"wide"==e.columnWidth&&r.push("wide_column"),"full"==e.columnWidth&&r.push("full_column"),1==e.justifyTxt&&r.push("justify"),1==e.minimalStyle&&r.push("minimal"),e.userBodyStyle="[ "+r.join(" ")+" ]"};return n(),function(){if("production"==serverData.config.environment){var e=["fontStyle","themeStyle","txtSize","justify","minimalStyle","columnWidth","TOC_folded"],t=Math.floor(Math.random()*e.length);for(var o in e){var n=e[o];if(o==t){var a="virtualpageview/preferences/"+n+"/"+i[n];analytics.gaVirtualPageView(a)}}}}(),{getPref:function(e){return n(),i[e]?i[e]:null},setPref:function(e,t){i[e]=t,localStorage.wikiwand_user_prefs||(localStorage.wikiwand_user_prefs={}),localStorage.wikiwand_user_prefs=angular.toJson(i),localStorage.wikiwand_last_save=(new Date).getTime(),a("update")},updatePageStyle:a}}]),(app=angular.module("wikiwand")).controller("UserPrefsController",["$scope","$rootScope","$window","Utilities","userPreferences","$timeout",function(e,t,o,i,n,a){var r=this;r.initPreferencesSliders=function(){n.updatePageStyle("update"),1===$(".per_btn").length&&($(".toggle_slider").noUiSlider({start:[0],step:1,range:{min:[0],max:[1]}}),$(".step_slider").noUiSlider({start:[0],step:1,range:{min:[0],max:[2]}}),e.Math=window.Math,e.fontStyleSlider=0,"serif"===t.fontStyle?e.fontStyleSlider=0:e.fontStyleSlider=1,$("#font_style_slider").val(e.fontStyleSlider),$("#font_style_slider").on({slide:function(){var e=Math.floor($(this).val());t.fontStyleHandler(e,!1),t.$apply()}}),e.themeSlider=0,"light"===t.themeStyle?e.themeSlider=0:e.themeSlider=1,$("#theme_slider").val(e.themeSlider),$("#theme_slider").on({slide:function(){var e=Math.floor($(this).val());t.themesHandler(e,!1),t.$apply()}}),e.fontSizeSlider=1,"smallTxt"===t.txtSize?e.fontSizeSlider=0:"mediumTxt"===t.txtSize?e.fontSizeSlider=1:"largeTxt"===t.txtSize&&(e.fontSizeSlider=2),$("#font_size_slider").val(e.fontSizeSlider),$("#font_size_slider").on({slide:function(){var e=Math.floor($(this).val());t.txtSizeHandler(e,!1),t.$apply()}}),e.columnWidthSlider=0,"narrow"===t.columnWidth?e.columnWidthSlider=0:"wide"===t.columnWidth?e.columnWidthSlider=1:"full"===t.columnWidth&&(e.columnWidthSlider=2),$("#column_slider").val(e.columnWidthSlider),$("#column_slider").on({slide:function(){var e=Math.floor($(this).val());t.columnWidthHandler(e,!1),t.$apply()}}),t.justifyTxt="true"==n.getPref("justify"))},r.prefsTouchedAnalyticsSent=!1,r.prefsTouchedHandler=function(e){console.log("Preference touched: ",e),n.setPref("prefsTouched","true"),t.prefsTouched="true"==n.getPref("prefsTouched"),r.prefsTouchedAnalyticsSent||(analytics.gaVirtualPageView("/virtualpageview/article-promo-pers/personalized"),r.prefsTouchedAnalyticsSent=!0)},1==articleData.pageIsArticle&&(t.initPrefsController=function(){r.initPreferencesSliders(),e.preMenuReady=!0},t.fontStyleHandler=function(e,o){r.prefsTouchedHandler("fontStyle"),$(".per_serif").removeClass("new_pref"),0===e?(t.fontStyle="serif",n.setPref("fontStyle","serif")):1===e&&(t.fontStyle="sansSerif",n.setPref("fontStyle","sansSerif")),!0===o&&$("#font_style_slider").val(e)},t.themesHandler=function(e,o){r.prefsTouchedHandler("themeStyle"),$(".per_serif").removeClass("new_pref"),0===e?(t.themeStyle="light",n.setPref("themeStyle","light")):1===e&&(t.themeStyle="dark",n.setPref("themeStyle","dark")),!0===o&&$("#theme_slider").val(e)},t.txtSizeHandler=function(e,o){r.prefsTouchedHandler("txtSize"),$(".per_serif").removeClass("new_pref"),0===e?(t.txtSize="smallTxt",n.setPref("txtSize","smallTxt")):1===e?(t.txtSize="mediumTxt",n.setPref("txtSize","mediumTxt")):2===e&&(t.txtSize="largeTxt",n.setPref("txtSize","largeTxt")),!0===o&&$("#font_size_slider").val(e)},t.justifyHandler=function(e){r.prefsTouchedHandler("justify"),$(".per_serif").removeClass("new_pref"),1==e?(t.justifyTxt=!0,n.setPref("justify","true")):(t.justifyTxt=!1,n.setPref("justify","false"))},t.layoutHandler=function(e){r.prefsTouchedHandler("minimalStyle"),$(".per_serif").removeClass("new_pref"),"minimal"===e?(n.setPref("minimalStyle","true"),t.minimalStyle=!0,t.resetMinimal()):"rich"===e&&(n.setPref("minimalStyle","false"),t.minimalStyle=!1,t.resetRich())},e.prefClick=function(){n.setPref("prefAttention","true")},t.columnWidthHandler=function(e,o){r.prefsTouchedHandler("columnWidth"),$(".per_serif").removeClass("new_pref"),0===e?(t.columnWidth="narrow",n.setPref("columnWidth","narrow")):1===e?(t.columnWidth="wide",n.setPref("columnWidth","wide")):2===e&&(t.columnWidth="full",n.setPref("columnWidth","full")),!0===o&&$("#column_slider").val(e),$(".tables_wrapper").length>=1&&a(function(){t.$broadcast("runTablesOverflow",[])},100)},t.resetRich=function(){t.fontStyleHandler(0,!0),t.themesHandler(0,!0),t.txtSizeHandler(1,!0),t.columnWidthHandler(0,!0),t.justifyHandler(!1),analytics.gaEvent("preferences","popup","Rich style reset")},t.resetMinimal=function(){t.fontStyleHandler(1,!0),t.themesHandler(0,!0),t.txtSizeHandler(0,!0),t.columnWidthHandler(2,!0),t.justifyHandler(!1),analytics.gaEvent("preferences","popup","Minimal style reset")})}]);var addHighlightClick=function(e){$("#inline_bookmark_button, #inline_fact_button, #inline_board_button").remove(),$("body").scope().bookmarkAdd("highlight","this")},addFactClick=function(){$("#inline_bookmark_button, #inline_fact_button, #inline_board_button").remove(),$("body").scope().bookmarkAdd("fact","this")};(app=angular.module("wikiwand")).controller("BookmarkController",["$scope","Utilities","$http","ipCookie","$timeout","$rootScope",function(e,t,o,i,n,a){var r=this,s={};$("#fullContent").text();e.alreadyHave=!1,a.bookmarkCount=0,a.fetchedBookmarks=!1,t.isTouchDevice()||$("#bookmarks").niceScroll({touchbehavior:!0}).hide(),e.bookmarks=[],e.facts=[],"undefined"!=typeof factData&&(e.facts=factData),r.openBookmarksPane=function(){a.showBookmarkFeed||($("#header").addClass("foldfix"),a.showBookmarkFeed=!0)},a.getValidParent=function(e){for(var t={P:1,LI:1,TD:1,DD:1,DIV:1,SECTION:1,ARTICLE:1,BODY:1};void 0===t[e.nodeName];)$(e).find(),e=e.parentNode;return e},a.checkSelection=function(){if($(".highlight_paragraph").removeClass("highlight_paragraph"),$(".currenthighlight").contents().unwrap(),window.getSelection){var e=window.getSelection();if(!(e.toString().length<5||e.toString().length>1e3)){var t=a.getValidParent(e.anchorNode),o=a.getValidParent(e.focusNode);if(!t.isEqualNode(o))return console.log("Selection NOT eligible for bookmarking: start and end has different parent"),!1;var i=t,n=i.textContent,r=e.toString();if(n=n.replace(/\[[^\]]+\]/gi,""),r=r.replace(/\[[^\]]+\]/gi,""),!(n.indexOf(r)>-1))return console.log("Selection NOT eligible for bookmarking: selection not found in parent"),!1;var l=function(e){return e.replace(new RegExp("@@@DOT@@@","g"),".")},c=function(e){e=function(e){var t=function(e){return e.replace(/\./g,"@@@DOT@@@")};return e=(e=(e=(e=e.replace(/\b[A-Za-z]\.(?!\S)/g,t)).replace(/\b[A-Z][a-z]\.(?!\S)/g,t)).replace(/\b[A-Z]\.[A-Z]\.?\-?(?!\S)/g,t)).replace(/\b\d+\.\d+/g,t)}(e);var t=new RegExp("[^.!?]*[.!?]","g"),o=(e+".").match(t);if(!o)return[];for(var i=0;i<o.length;i++)o[i]=l(o[i]);return o.length>0&&(o[o.length-1]=o[o.length-1].substr(0,o[o.length-1].length-1)),o},u=n.substr(0,n.indexOf(r)),d=c(u);d.length>0&&(u=d[d.length-1]),'" '!=(u=u.replace(/^\s+/,""))&&"' "!=u||(u="");var p=n.substr(n.indexOf(r)+r.length);(d=c(p)).length>0&&(p=d[0]),p=p.replace(/\s+$/,""),""==u&&(r=r.replace(/^\s+/,"")),""==p&&(r=r.replace(/\s+$/,"")),s={highlight:r,text:u+"<b>"+r+"</b>"+p,prefix:u,postfix:p},$(".inline_bookmark_paragraph").removeClass("inline_bookmark_paragraph"),$("#inline_fact_button").remove(),$("#inline_bookmark_button").remove();var h=null;try{h=e.anchorNode.nextSibling;var f=$(h).offset().top-$("#article_content_wrapper").offset().top+30}catch(e){}if(!h)f=$(i).offset().top-$("#article_content_wrapper").offset().top+$(i).height()/2;$("#article_content_wrapper").prepend('<div id="inline_bookmark_button" onmouseup="event.stopPropagation()" onmousedown="event.stopPropagation()" onclick="addHighlightClick();"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"  width="32px" height="32px" viewBox="0 0 32 32"><polygon fill="#f7f7f7" points="24,11.107 30.375,16.409 24,21.71 "/><path fill="#f7f7f7" d="M25,28c0,1.104-0.896,2-2,2H4c-1.104,0-2-0.896-2-2V4c0-1.104,0.896-2,2-2h19c1.104,0,2,0.896,2,2V28z"/><polygon fill="#1559B5" points="20.821,15.339 18.818,15.339 18.818,13.336 17.831,13.336 17.831,15.339 15.829,15.339 \t\t15.829,16.325 17.831,16.325 17.831,18.327 18.818,18.327 18.818,16.325 20.821,16.325 \t"/><path fill="#1559B5" d="M17.811,20.048c-2.376,0-4.074-1.926-4.074-4.302c0-2.376,1.583-4.303,3.961-4.303\t\tc0.219,0,0.302,0.022,0.302,0.053V9H8v15.896l4.999-2.94L18,24.896v-4.9C18,20.026,18.031,20.048,17.811,20.048z"/></svg><span>Bookmark this quote</span></div>'),a.user.isAdmin&&$("#article_content_wrapper").prepend('<div id="inline_fact_button" onmouseup="event.stopPropagation()" onmousedown="event.stopPropagation()" onclick="addFactClick()"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"  width="32px" height="32px" viewBox="0 0 32 32"><polygon fill="#f7f7f7" points="24,11.107 30.375,16.409 24,21.71 "/><path fill="#f7f7f7" d="M25,28c0,1.104-0.896,2-2,2H4c-1.104,0-2-0.896-2-2V4c0-1.104,0.896-2,2-2h19c1.104,0,2,0.896,2,2V28z"/><polygon fill="#40bbe1" points="20.821,15.339 18.818,15.339 18.818,13.336 17.831,13.336 17.831,15.339 15.829,15.339 \t\t15.829,16.325 17.831,16.325 17.831,18.327 18.818,18.327 18.818,16.325 20.821,16.325 \t"/><path fill="#40bbe1" d="M17.811,20.048c-2.376,0-4.074-1.926-4.074-4.302c0-2.376,1.583-4.303,3.961-4.303\t\tc0.219,0,0.302,0.022,0.302,0.053V9H8v15.896l4.999-2.94L18,24.896v-4.9C18,20.026,18.031,20.048,17.811,20.048z"/></svg><span>Create a Fact</span></div>'),$(i).addClass("inline_bookmark_paragraph"),$("#inline_bookmark_button").css("top",f),$("#inline_fact_button").css("top",f),analytics.gaEvent("bookmarks","selection","icon-view"),analytics.gaVirtualPageView("virtualpageview/bookmarks/selection/icon-view")}}},r.getBookmarks=function(){e.fetchedBookmarks||e.loadingBookmarks||(a.user.logins&&a.user.logins.facebook.isActive?(a.bookmarksProgressIndicator=!0,e.loadingBookmarks=!0,o.get("/api/user/bookmarks/allForUser").success(function(t){e.loadingBookmarks=!1,e.fetchedBookmarks=!0,t.error||!t.bookmarks?console.error("error fetching bookmarks ",t.error):t.bookmarks.forEach(function(t,o){t.createTime=parseInt(t.createTime),t.synchronized="synchronized",e.bookmarks.push(t)}),a.bookmarksProgressIndicator=!1})):n(r.getBookmarks,1e3))},r.factSpacing=function(){n(function(){e.facts.sort(function(e,t){return e.vertPosition-t.vertPosition});for(var t=-2,o=0;o<e.facts.length;o++){var i=Math.round(Math.random());t>97||(e.facts[o].vertPosition-t<3&&(e.facts[o].vertPosition=t+3+i),t=e.facts[o].vertPosition)}if(t>97){t=102;for(o=e.facts.length-1;o>=0;o--){i=Math.round(Math.random());t<4||(t-e.facts[o].vertPosition<3&&(e.facts[o].vertPosition=t-3-i),t=e.facts[o].vertPosition)}}},0)},e.saveBookmark=function(t,i){a.user.logins.facebook.isActive?("fact"==t.type&&(t.articleHasGist=articleData.hasGist),o.post("/api/user/bookmarks/put",t).success(function(e){return i(e.error,e.data)})):n(function(){e.saveBookmark(t,i)},1e3)},e.$watch("$root.user.logins.facebook.isActive",function(e){!0===e&&a.bookmarksConnectClicked&&(a.bookmarksConnectClicked=!1,analytics.gaEvent("bookmarks","connect","connected"),analytics.gaVirtualPageView("virtualpageview/bookmarks/connect/connected"))}),e.$watch("$root.showBookmarkFeed",function(){!e.fetchedBookmarks&&a.showBookmarkFeed&&(r.getBookmarks(),n(function(){a.showBookmarkInstructionsLatch=!0,a.showBookmarkThisLatch=!0},0))}),e.$watch("facts",function(){e.facts.length>0&&(a.gistOn=!0),r.factSpacing()},!0),e.$watch("bookmarks",function(){e.bookmarkDictionary={},e.bookmarks.forEach(function(t,o){"article"==t.type&&(e.bookmarkDictionary[t.articleKey]=!0);var i=t.articleKey.split("/");if(i.length>=2){var n=i[1],a=!!_.contains(["ar","arc","arz","dv","fa","glk","he","lad","mzn","pnb","ps","sd","ug","ur","yi","ckb","mzn"],n);t.textDirection=a?"rtl":"ltr"}else t.textDirection="ltr";"highlight"!=t.type&&t.text.length>200&&(t.text=t.text.slice(0,200).split(" "),t.text.pop(),t.text=t.text.join(" ")+"...")}),e.fetchedBookmarks&&e.bookmarkDictionary[a.articleData.cache.key]?e.showBookmarkThis=!1:e.showBookmarkThis=!0,e.fetchedBookmarks?(a.bookmarkCount=e.bookmarks.length,i("wikiwand.bookmarks.count",e.bookmarks.length,{path:"/",expires:7})):i("wikiwand.bookmarks.count")?a.bookmarkCount=i("wikiwand.bookmarks.count"):a.bookmarkCount=e.bookmarks.length,i("wikiwand.bookmarks.count")||r.getBookmarks()},!0),a.bookmarkAdd=function(t,i){var l;s.highlight&&a.stringSearch(s.highlight,!0);try{l=Math.round($(".currenthighlight:eq(0)").offset().top/$("#article_content_wrapper").height()*1e3)/10}catch(e){l=0}"fact"!=t&&n(function(){$("#bookmarks").animate({scrollTop:0},200),r.openBookmarksPane()},0);var c=i;"this"===i&&(c=a.articleData.cache.key),c=c.split("#")[0];var u=(new Date).getTime(),d={userId:a.user.userId,articleKey:c,articleTitle:"none",type:t,text:"none",section:"none",userText:"none",createTime:u,bookmarkID:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}(),listName:"My Bookmarks",thumbnail:"none",highlight:"none",vertPosition:parseFloat(l),originalVertPosition:parseFloat(l)};if(e.bookmarkDictionary[c]&&"article"==t){e.alreadyHave=!0,n.cancel(p);var p=n(function(){e.alreadyHave=!1},3e3)}else{a.bookmarksProgressIndicator=!0,"fact"===t&&(d.text=s.text||"none",d.highlight=s.highlight||"none",d.userText=d.highlight,d.listName="gist",d.showThisGist=!0,n(function(){console.log("facts ",e.facts),e.facts.push(d),console.log("added fact")},0),analytics.gaEvent("bookmarks","added","fact"),analytics.gaVirtualPageView("virtualpageview/bookmarks/added/fact"));var h="/api/snippet"+c+"?minrev=1&callback=JSON_CALLBACK";o.jsonp(h).success(function(o){a.bookmarksProgressIndicator=!1,d.articleTitle=o.title,d.text=o.text||"none",d.thumbnail=o.thumbnail?o.thumbnail.source:"none","highlight"===t&&(d.text=s.text||"none",d.highlight=s.highlight||"none",analytics.gaEvent("bookmarks","added","selection"),analytics.gaVirtualPageView("virtualpageview/bookmarks/added/selection")),"article"==t&&("this"===i?(analytics.gaEvent("bookmarks","added","article-this"),analytics.gaVirtualPageView("virtualpageview/bookmarks/added/article-this")):(analytics.gaEvent("bookmarks","added","article-ocd"),analytics.gaVirtualPageView("virtualpageview/bookmarks/added/article-ocd"))),d.synchronized="unknown","fact"==t?(d.text=s.text||"none",d.userThumb="none",d.isFact=!0):e.bookmarks.push(d),e.saveBookmark(d,function(e,t){e||!t?(d.synchronized="error",console.error("error in savebookmark ",e,t,d)):d.synchronized="synchronized"})})}},a.gistShareTop=function(e,t,o,i){var r=event.currentTarget.parentNode.parentNode.getBoundingClientRect().top+event.currentTarget.parentNode.parentNode.offsetHeight/2;"mainShare"==i&&(r=event.currentTarget.getBoundingClientRect().top+event.currentTarget.offsetHeight/2),a.shareGist=!0,n(function(){document.querySelector(".share_gist").style.top=r+"px"},0),t.length>65&&(t=t.substring(0,65)+"..."),a.gistShareTxt=t,o&&(a.gistShareId=o.substr(0,5))},a.openFact=function(e){var t=location.search.split("factId=")[1]?location.search.split("factId=")[1]:null;if(e.indexOf(t)>-1)return!0},e.deleteBookmark=function(t){var i;console.log("delete bookmark"),a.bookmarksProgressIndicator=!0,analytics.gaEvent("bookmarks","removed"),analytics.gaVirtualPageView("virtualpageview/bookmarks/removed"),e.bookmarks.forEach(function(o,n){o.bookmarkID==t&&(i=o,o.synchronized="deleting",e.bookmarks.splice(n,1))}),i||e.facts.forEach(function(o,n){o.bookmarkID==t&&(i=o,o.synchronized="deleting",e.facts.splice(n,1))}),o.post("/api/user/bookmarks/delete",i).success(function(e){e.error&&console.error("error deleting bookmark ",e.error),a.bookmarksProgressIndicator=!1})},e.openBookmark=function(e){"article"==e.type&&(window.open(e.articleKey),analytics.gaEvent("bookmarks","jump","article"),analytics.gaVirtualPageView("virtualpageview/bookmarks/jump/article")),"highlight"==e.type&&(analytics.gaEvent("bookmarks","jump","selection"),analytics.gaVirtualPageView("virtualpageview/bookmarks/jump/selection"),e.articleKey==a.articleData.cache.key?a.stringSearch(e.highlight,!0):(i("wikiwand.bookmarks.hightlighttoopen",e.highlight,{path:"/"}),window.open(e.articleKey)))},a.jumpToFact=function(t){e.facts.forEach(function(e,o){e.bookmarkID==t&&a.stringSearch(e.highlight,!0)})}}]),app.controller("FactController",["$scope","$http","$timeout","$rootScope",function(e,t,o,i){i.user.isAdmin&&(e.$watch("fact",function(t,i){if(t!=i){var n=$.extend({},t);delete n.showThisGist;var a=$.extend({},i);delete a.showThisGist,console.log("test old ",a),console.log("test new ",n),JSON.stringify(a)!=JSON.stringify(n)?(o.cancel(e.savePromise),e.savePromise=o(function(){console.log("need to save"),"deleting"!=t.synchronized&&e.$parent.saveBookmark(t,function(e,t){e&&console.log("error updating bookmark")})},2e3)):console.log("not really changed ")}else console.log("no change")},!0),e.selectThumbnail=function(e,t){console.log("selected thumbnail ",t),e.userThumb=t})}]),app.directive("contenteditable",function(){return{restrict:"A",require:"ngModel",link:function(e,t,o,i){function n(){i.$setViewValue(t.text().trim())}i.$render=function(){"none"==i.$viewValue?t.html("Click here to enter fact"):t.html(i.$viewValue||"")},t.bind("keydn focus",function(){"none"==i.$viewValue&&t.html("")}),t.bind("blur keyup change",function(){e.$apply(n)})}}});var backClicked=function(){console.log("back clicked"),$("body").scope().backClicked()},ocdClick=function(e){console.log("ocd bookmark clicked"),$("body").scope().addBookamrkFromHovercard(e)},mousePos={};(app=angular.module("wikiwand")).controller("ArticleContentController",["$rootScope","$scope","Utilities","$timeout","$compile","$window","$http","ipCookie","MonService",function(e,t,o,i,n,a,r,s,l){t.showReadMore=0;var c=this,u=!1,d=!1,p="none";if(serverData.config.features.boards)BoardService.sendBoardAnalytics();var h,f="wikiwand"==serverData.layout||"newTabWiki"==serverData.publisherHostCode;function g(){"dark"==e.themeStyle&&$(".article_content table td[style], .article_content table td[bgcolor], .article_content table tr[style], .article_content table tr[bgcolor], .article_content table th[style], .article_content table th[bgcolor]").each(function(){var e=$(this),t=e.css(["background-color","background"]);if(t){var o,i,n,a=m(t["background-color"]);o=e,i=a.substring(1),.2126*((n=parseInt(i,16))>>16&255)+.7152*(n>>8&255)+.0722*(n>>0&255)>135&&(o.css("color","#333"),o.find("a").css("color","#1559b5"))}})}function m(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}e&&e.cohorts&&e.cohorts.mon_ocd&&(p=e.cohorts.mon_ocd||"none"),t.showDiscoverMore=0,"en"==articleData.langCodeUrl&&(t.showTextEnglish=!0),l.initMonService(),c.tablesOverflow=function(){var e=$("#article_content_wrapper").width();$(".tables_wrapper > table").each(function(){$(this).width()>e+5?$(this).parent().addClass("scroll"):$(this).parent().removeClass("scroll")})},e.addBookamrkFromHovercard=function(o){t.$apply(function(){e.loadBookmarkController=!0,e.showBookmarkFeed=!0}),i(function(){e.bookmarkAdd("article",o)},0)},e.stringSearch=function(e,t){$(".highlight_paragraph").removeClass("highlight_paragraph"),$(".currenthighlight").contents().unwrap(),e=e.replace(/\[[^\]]+\]/gi,"");var i=null;if($("#fullContent section").find("p, li, td, dd, div").each(function(t,o){if(!$(o).hasClass("img_container")&&!$(o).hasClass("image_wrapper")&&!i){var n=$(o).text().replace(/\[[^\]]+\]/gi,"");n.indexOf(e)>-1&&(i={text:n,element:o})}}),i){$(i.element).addClass("highlight_paragraph");var n,a,r,s,l=$(i.element).html(),c=l.split(" "),u=c.length,d=u,p=0;$("body").append('<div id="tempElement"></div>');for(n=u;n>1;n--){var h=c.slice(0,n);if($("#tempElement").html(h.join(" ")),!($("#tempElement").text().replace(/\[[^\]]+\]/gi,"").indexOf(e)>-1))break;l.indexOf($("#tempElement").html())>-1&&(d=n,r=$("#tempElement").html())}for(a=0;a<d;a++){h=c.slice(a,d);if($("#tempElement").html(h.join(" ")),!($("#tempElement").text().replace(/\[[^\]]+\]/gi,"").indexOf(e)>-1))break;l.indexOf($("#tempElement").html())>-1&&(p=a,r=$("#tempElement").html())}if(s=d<u||p>0?$(i.element).html().replace(r,'<span class="currenthighlight">'+r+"</span>"):i.text.replace(e,'<span class="currenthighlight">'+e+"</span>"),$(i.element).html(s),console.log("need to scroll to bookmark?",t),1==t){try{var f=$(".currenthighlight:eq(0)").offset().top-$(window).height()/2}catch(e){f=$(".highlight_paragraph:eq(0)").offset().top-$(window).height()/3}o.isTouchDevice()?$("html,body").scrollTop(f):$("html,body").stop().animate({scrollTop:f},{duration:400})}$("#tempElement").remove()}},o.isTouchDevice()||$("body").on("mousemove",".panoramic",function(e){var t=$(this),o=t.offset().left,i=t.width(),n=t.find("img").width();if(!(n<=i)){var a=(e.pageX-o)/i,r=(a-=.5)<0;a=Math.abs(a),a=Math.pow(a,.7),r&&(a*=-1),(a+=.5)<0&&(a=0),a>1&&(a=1);var s=(n-i)*a;t.find(".img_container").scrollLeft(s)}}),e.$on("Facebook:load",function(){serverData&&serverData.config&&serverData.config.features&&serverData.config.features.comments&&(FB.Event.subscribe("comment.create",function(t){var o=!!t.parentCommentID;e.reportComments("article-comment-posted",o?"child":"parent")}),FB.Event.subscribe("comment.remove",function(t){console.log("comment deleted",t),e.reportComments("article-comment-deleted")}))}),t.scrollToDiscussions=function(){var t=$("#discussions").offset().top;o.isTouchDevice()?$("html,body").scrollTop(t):$("html,body").stop().animate({scrollTop:t},{duration:250}),e.reportComments("article-comments-link-click")},c.readMoreHandler=function(){var e=[];function o(e){for(var t=[],o=0;o<e.length;o++){var i=e.eq(o).attr("href");-1!==i.indexOf(":")||-1!==i.indexOf("#")||$(e.eq(o)).parent("small").length||t.push(i)}return t}t.readMoreArticles=[],i(function(){var i,n,a;(e=e.concat(o($("#overview p.first-paragraph").find(".int-link"))).slice()).length<10&&(e=e.concat(o($("#overview").find(".int-link"))).slice()),e.length<10&&(e=e.concat(o($("#fullContent").find(".int-link"))).slice()),e.length<3?t.showReadMore=0:(t.showReadMore=1,i=e,n=$("#fullContent").text().toLowerCase(),a={},_.each(i,function(e){var t="/"+articleData.langCodeUrl+"/",o=e.split(t).join("").split("_").join(" ");o=decodeURIComponent(o),a[e]={link:e,title:o,value:0};var i=n.split(o.toLowerCase());i.length&&(a[e].value=i.length)}),(e=_.sortBy(a,"value").reverse()).length>10?t.readMoreArticles=e.slice(3,6):t.readMoreArticles=e.slice(0,3))},500)},t.reportReadMore=function(e){analytics.gaEvent("discovery","readmore",e)},c.bottomLinkHandler=function(){t.showBottomLink=!1},c.articleArrowsHandler=function(){},c.galleryCarousel=function(){$(".ww-photo-group ul").slick({dots:!1,infinite:!1,centerMode:!1,variableWidth:!0,swipeToSlide:!0,speed:150})},e.$watch("themeStyle",function(e){"dark"==e&&g()},!0),$("button").click(function(){var e=m($("input").val());$(".result").html(e)}),c.handleTables=function(){g(),function(e){var t,o={};for(e.find("table").each(function(e,t){if($(t).hasClass("collapsible")){if(!t.getElementsByTagName("tr")[0])return;var i=t.getElementsByTagName("th")[0];if(!i)return;o[b]=t,t.setAttribute("id","collapsibleTable"+b);var n=document.createElement("span"),a=document.createElement("a"),r=document.createTextNode(w);n.className="collapseButton",a.style.color=i.style.color,a.setAttribute("id","collapseButton"+b),a.setAttribute("href","#"),$(a).on("click",function(e){return function(t){t.preventDefault(),k(e)}}(b)),a.appendChild(r),n.appendChild(document.createTextNode("[")),n.appendChild(a),n.appendChild(document.createTextNode("]")),i.insertBefore(n,i.firstChild),b++}}),t=0;t<b;t++)if($(o[t]).hasClass("collapsed")||b>=v&&$(o[t]).hasClass("autocollapse"))k(t);else if($(o[t]).hasClass("innercollapse"))for(var i=o[t];i=i.parentNode;)if($(i).hasClass("outercollapse")){k(t);break}}($("#fullContent")),trackJsInfo(a,"handleTables"),$("table td").each(function(){var e=getComputedStyle($(this)[0]);e&&("11px"==e["line-height"]&&$(this).css("line-height","22px"))}),$(".linked_img_wrapper").each(function(){if($(this).parent("div").length>0){var e=$(this).parent("div").attr("style");if(void 0==typeof e)return;$(this).hasClass("duplicateImage")||$(this).css("display","block"),void 0!=typeof e&&$(this).parent("div").find("br").hide()}}),$("table.sortable").tablesorter();var e=$("#article_content_wrapper").width(),t=".infobox, .infobox_v2, .infobox_v3, .sinottico, .toccolours .section_info, .collapse_title, .ambox, .vertical-navbox, .mbox-small";$(".article_content:not(#overview) > table:not("+t+"), .article_content center table:not("+t+")").each(function(){var t=$(this).width();t>e/1.5&&$(this).parent(".article_content").find(".image_wrapper").addClass("narrow_thumb"),t>e&&($(this).wrap('<div class="tables_wrapper"/>'),o.isTouchDevice()||$(".tables_wrapper").niceScroll({touchbehavior:!0,grabcursorenabled:!1,enablemousewheel:!1}).hide())}),c.tablesOverflow(),$("table.standard, .tracklist").addClass("wikitable")},c.initPortraitImage=function(){trackJsInfo(a,"initPortraitImage");var e=$(".portrait_img").first();if(e){var o=angular.element(e);n(o)(t)}},c.articleTop=function(){if(trackJsInfo(a,"articleTop"),t.articleMarginTop="noCover",articleData.mainImage&&("new_cover"===articleData.mainImage.mode||"cover"===articleData.mainImage.mode)){if(!articleData.mainImage.thumb)return;var e=articleData.mainImage.thumb.width,o=articleData.mainImage.thumb.height,i=e/o,n=o/e*100;$("#cover_image_wrapper").length>0&&(document.getElementById("cover_image_wrapper").style.paddingBottom=n+"%"),i<=1.6?t.articleMarginTop="low":i>1.6&&i<1.8?t.articleMarginTop="middle":i>=1.8&&(t.articleMarginTop="high")}},c.bindEvents=function(){trackJsInfo(a,"bindEvents"),$("body").on("mousedown","#body_wrapp",function(){$(".inline_bookmark_paragraph").removeClass("inline_bookmark_paragraph"),$("#inline_bookmark_button, #inline_fact_button, #inline_board_button").remove()}),$("body").on("mouseup","#fullContent",function(){e.loadBookmarkController=!0,i(function(){e.checkSelection()},0)}),$("body").on("click",".NavHead",function(){var e=$(this);e.parent().hasClass("collapsed")?e.parent().removeClass("collapsed"):e.parent().addClass("collapsed")});$("body").on("click","sup > a, sup > i > a",function(e){var t=$(this).attr("href"),o=$(this).children("span").eq(0).data("title"),i="";return $(this).hasClass("anch-link")&&$(t).length>0?i=$(t).html():o&&(i=t?"<a href='"+t+"' target='_blank'>"+o+"</a>":o),i&&($(this).hasClass("active")?($(".sup_pop").remove(),$("sup > a, sup > i > a").removeClass("active")):($(".sup_pop").remove(),$("sup > a, sup > i > a").removeClass("active"),$(this).addClass("active"),$(this).parent().append('<div class="sup_pop">'+i+'<div class="ex"></div></div>'))),!1}),$("body").on("click touchstart",function(){$("sup a.anch-link").removeClass("active"),$(".sup_pop").remove()}),$("body").on("click","sup",function(e){e.stopPropagation()}),$("body").on("click",".sup_pop .ex",function(e){$("sup a.anch-link").removeClass("active"),$(".sup_pop").remove(),e.stopPropagation()}),"wikiwand"!=serverData.layout&&$("body").on("click",".int-link",function(e){if(e.stopPropagation(),e.returnValue=!1,e.preventDefault(),e.target.href){var t=e.target.href.split("#");t.length>1?window.location.href=t[0]+window.location.search+"#"+t[1]:window.location.href=t[0]+window.location.search}}),$("body").on("mouseenter",".int-link",function(e){mousePos.left=e.clientX,mousePos.top=e.clientY;var t=$(this);t.attr("title",""),t.hasClass("no_hovercard")||f&&c.loadHoverCard(t)}),$("body").on("mouseleave",".int-link",function(){var e=$(this);mousePos.left=0,mousePos.top=0,e.data("ocd-mouse-inside",!1)}),$("body").on("click",".collapse_title",function(){trackJsInfo(a,"collapse_title click event");var e=$(this).parent().find("div.collapse");$(this).hasClass("active")?($(this).removeClass("active"),e.hide()):($(this).addClass("active"),e.show())}),$("body").on("click",".wiki_alert",function(){trackJsInfo(a,"wiki_alert click event"),$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")}),$("body").on("click",".img_container",function(t){trackJsInfo(a,"openGallery event"),e.galleryOpen(t)}),$("body").on("error",".img_container img",function(e){trackJsInfo(a,"image load error, reverting to full url");var t=$(e.target).attr("src"),o=new RegExp("(.*)\\/thumb(\\/[a-zA-Z0-9]\\/[a-zA-Z0-9]{2,2}\\/[^\\/]*)","i"),i=t.match(o);if(i&&3==i.length){var n=i[1]+i[2];$(e.target).attr("src",n)}}),!1===o.isItInternetExplorer()&&(o.isTouchDevice()||($("body").on("click",".audio_wrapper",function(){var e=$(this).parent().attr("data-audio");$("#audio_player div").html(e),setTimeout(function(){document.getElementById("audio_player").getElementsByTagName("audio")[0].play()},10),$("#audio_player").addClass("active open").find("div").fadeIn(300),setTimeout(function(){$("#audio_player").removeClass("open")},1500)}),$("body").on("click","#audio_player .listen",function(){$("#audio_player div").html($("#section_SpokenWikipedia").find(".mediaContainer").attr("data-audio")),setTimeout(function(){document.getElementById("audio_player").getElementsByTagName("audio")[0].play()},10)}),$("body").on("click","#audio_player:not(.audio_article) > i",function(){$("#audio_player").removeClass("active").find("div").fadeOut(300,function(){$(this).empty()})}))),$(window).resize(function(){clearTimeout(h),h=setTimeout(function(){c.tablesOverflow()},100)}),angular.element(window).bind("load",function(){c.tablesOverflow()}),$("body").on("click",".drop_down_arrow",function(){$(this).hasClass("active")?$(this).removeClass("active").siblings(".vs_drop_down").slideUp(300):$(this).addClass("active").siblings(".vs_drop_down").slideDown(300)}),o.isTouchDevice()||$(function(){FastClick.attach(document.body)})},c.forceLoadImages=function(e){trackJsInfo(a,"forceLoadImages");var t=0;e.each(function(){t++;var e=$(this);setTimeout(function(){var t=e.attr("data-original");e.attr("src",t),e.loaded=!0},0*t)}),e.removeClass("lazy")},c.removeDuplicatePortrait=function(){if(trackJsInfo(a,"remove duplicate image"),articleData.mainImage&&"none"!=articleData.mainImage.mode&&articleData.mainImage.full){var e=decodeURIComponent(articleData.mainImage.full.originalUrl.split("/").pop());$("#overview .image_wrapper:not(.portrait_img) .img_container  img").each(function(){"final_image"!=$(this).attr("id")&&(decodeURIComponent($(this).attr("data-href").split(":").pop())==e&&$(this).parent().parent().addClass("duplicateImage"))})}},c.initAnchorLinks=function(){trackJsInfo(a,"initAnchorLinks"),$("sup a.anch-link").each(function(){var e=$(this).attr("href");e&&$(this).attr("href","#"+e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-"))}),$(".references li").each(function(){var e=$(this).attr("id");e&&$(this).attr("id",e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-"))})},c.audioScrape=function(){if(!1===o.isItInternetExplorer()&&!o.isTouchDevice()){trackJsInfo(a,"audioScrape");var e="false";$("#section_SpokenWikipedia audio").length>0&&(e="true",$("#audio_player").addClass("open"),$("#gist_wrapper").addClass("spokenArticle"));$(".mediaContainer").each(function(){if(1===$(this).find("audio").length){var e=$(this).find("audio").parent().html();$(this).attr("data-audio",e).html("<div class='audio_wrapper'><p>Play audio file</p></div>")}}),"true"===e&&setTimeout(function(){$("#audio_player div").html($("#section_SpokenWikipedia .mediaContainer").attr("data-audio")).parent().addClass("active audio_article").find(".listen").show()},1e3),$('a[href$=".ogg"]').each(function(){-1==this.href.indexOf("//upload")&&$(this).attr("target","_blank").attr("title","Audio Info").addClass("tooltip_top ").find("img").css("vertical-align","middle")}),$('a[href$=".ogg"]').on("click",function(e){if(-1!=this.href.indexOf("//upload")){var t=$(this).attr("href");$("#audio_player div").html('<audio controls><source src="'+t+'" type="audio/ogg"></audio>'),setTimeout(function(){document.getElementById("audio_player").getElementsByTagName("audio")[0].play()},10),$("#audio_player").addClass("active open").find("div").fadeIn(300),setTimeout(function(){$("#audio_player").removeClass("open")},1500),e.preventDefault()}})}},c.clearBreaks=function(){trackJsInfo(a,"clear breaks"),$($(".article_content > div, .article_content > p > br")).each(function(){var e="clear:both;"===$(this).attr("style")||"clear: both;"===$(this).attr("style");void 0!==e&&!1!==e&&""===$.trim($(this).html())&&$(this).hide()})},c.prepareTooltipster=function(){trackJsInfo(a,"prepareTooltipster"),$(".tooltip_top").tooltipster({minWidth:!0,position:"top",trigger:"hover",animation:"fade",theme:".toolbar-tooltip",speed:100}),$(".tooltip_left").tooltipster({minWidth:!0,position:"left",trigger:"hover",animation:"fade",theme:"left-tooltip",speed:100});var e="hover";o.isTouchDevice()&&(e="click"),$(".disambig-wrapper").length>0&&$(".disambig-wrapper").tooltipster({content:articleData.disambiguations.join("<br/>"),contentAsHTML:!0,minWidth:!0,maxWidth:320,trigger:e,animation:"fade",theme:".disamb-tooltip",delay:100,speed:100,interactive:!0})},c.syntaxHighlighting=function(){trackJsInfo(a,"syntaxHighlighting");var e=$("#article_content_wrapper .mw-code pre, #article_content_wrapper .mw-highlight pre"),t=function(){e.each(function(e,t){hljs.highlightBlock(t)})};e.length>0&&(d?t():$.getScript("//assets.wikiwand.com/s3lib/highlight.pack.gzip.js").done(function(e,o){d=!0,t()}).fail(function(e,t,o){console.error("Request for highlight.pack.js failed")}))},c.initContentsJQueryProcess=function(){loadedContent=!0,console.log("initContentsJQueryProcess"),trackJsInfo(a,"initContentsJQueryProcess"),i(function(){$("table.ambox, table.noprint:not(.navbox), .bandeau-niveau-modere").each(function(){var e=$(this).text();$(this).replaceWith('<div class="wiki_alert">'+e+"</div>")}),c.initAnchorLinks(),c.removeDuplicatePortrait(),setTimeout(function(){c.forceLoadImages($("img.lazy"))},500),c.clearBreaks(),c.handleTables(),c.audioScrape(),c.galleryCarousel(),c.syntaxHighlighting(),c.prepareTooltipster(),o.isTouchDevice()||($("body").hasClass("rtl")?$("#wikiwand_toc").niceScroll({cursoropacitymax:.3,cursorwidth:3,cursorborderradius:4,railpadding:{top:2,right:2,left:2,bottom:2},cursorborder:"none",railalign:"right"}):$("#wikiwand_toc").niceScroll({cursoropacitymax:.3,cursorwidth:3,cursorborderradius:4,railpadding:{top:2,right:2,left:2,bottom:2},cursorborder:"none",railalign:"left"})),c.articleArrowsHandler(),c.readMoreHandler(),c.bottomLinkHandler(),s("wikiwand.bookmarks.hightlighttoopen")&&i(function(){e.stringSearch(s("wikiwand.bookmarks.hightlighttoopen"),!0),s.remove("wikiwand.bookmarks.hightlighttoopen",{path:"/"})},0)},0)},c.loadLocalContent=function(){if(1!=precache_from_extension)return 0==loadedFromCache?(console.log("loaded from cache false"),trackJsInfo(a,"loadedFromCache==false (new rendering"),void angular.element(document).ready(function(){e.$broadcast("articleContentReadyFromShell",[]),e.showArticleContents=!0})):void("undefined"==typeof localContentHtml||u?u||i(c.loadLocalContent,10):(trackJsInfo(a,"loading content into wrapper"),u=!0,console.time("time to load localContentHtml"),$("#fullContent").html(localContentHtml),console.timeEnd("time to load localContentHtml"),articleData.mainImage&&"portrait"==articleData.mainImage.mode&&c.initPortraitImage(),e.showArticleContents=!0,console.timeEnd("time up to showArticleContents"),c.removeDuplicatePortrait(),i(function(){trackJsInfo(a,"broadcast articlecontent ready"),e.$broadcast("articleContentReadyFromShell",[])},0)))},t.disambigHandler=function(t){trackJsInfo(a,"disambigHandler"),e.showDis=!e.showDis,t.stopPropagation()},c.escapeHtml=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},c.getArticleHrefForHovercard=function(e){var t,o;if(!(t=e.attr("href")))return null;if("/"==!t.charAt[0])return null;var i=(t=t.substr(1)).indexOf("/");if(-1==i)return null;var n=t.substr(0,i),a=t.substr(i+1);return n!==articleData.langCodeUrl?null:-1!==(o=(o=decodeURIComponent(a)).split("#")[0]).indexOf(":")?null:"vs"===o?null:o},c.showHoverCard=function(e,t){var o,i,n;trackJsInfo(a,"showHoverCard");if(e.data("ocd-mouse-inside"))return n=e.data("ocd-hover-time"),i=(new Date).getTime()-n,o=Math.max(0,700-i),setTimeout(function(){if(e.data("ocd-mouse-inside")){!1;var o={content:t,contentAsHTML:!0,theme:".tooltipster-ocd",maxWidth:480,interactive:!0,autoClose:!0,interactiveTolerance:500,animation:"fade",delay:100,speed:50,updateAnimation:!1,functionBefore:function(e,t){return t()},functionReady:function(e,t){var o=$(e).offset();console.log("offset for link ",o);var i=$(".tooltipster-arrow-border:eq(0)").offset();console.log("caretOffset",i),console.log("mouse offset ",mousePos),setTimeout(function(){if(Math.abs(o.left-mousePos.left)>200){console.log("moving");var e=$(t).offset();e.left=mousePos.left-$(".tooltipster-base").width()/2,$(".tooltipster-base").offset(e)}})},functionAfter:function(){}};return"none"!=p&&(o.arrowColor=$("body").hasClass("dark")?"#3a3538":"#eeeeee"),e.tooltipster(o),e.tooltipster("show")}},o)},c.loadHoverCard=function(e){var t,o,i,n,a;if(t=e,o=c.getArticleHrefForHovercard(t)){if(t.data("ocd-mouse-inside",!0),t.data("ocd-hover-time",(new Date).getTime()),n=function(){t.tooltipster("hide")},i=t.data("ocd-cache"))return c.showHoverCard(t,i);var r=articleData.langCodeUrl;return"zh-"===r.substr(0,3)&&$.inArray(r,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])>=0&&(r="zh"),a="https://"+r+".wikipedia.org/w/api.php",$.ajax({dataType:"jsonp",url:a,data:{action:"query",format:"json",prop:"extracts|pageimages|revisions|info",redirects:!0,exintro:!0,exsentences:2,explaintext:!0,piprop:"thumbnail",pithumbsize:300,rvprop:"timestamp",inprop:"watched",indexpageids:!0,titles:o},success:function(e){var o,i;if(i='<div class="ocd-content"></div>',null!=e.error)return console.log("OCD: got error",e),n();var a=e.query.pageids[0],r=e.query.pages[a];o=t.attr("href"),i="",i+='<div class="ocd-content">',null!=r.thumbnail&&(i+="<div class='image'><img src='"+c.escapeHtml(r.thumbnail.source)+"' onerror='this.style.display=\"none\"' /></div>"),null!=r.title&&(i+="<div class='title'>"+c.escapeHtml(r.title)+"</div>"),null!=r.extract&&(i+="<div class='text'>"+c.escapeHtml(r.extract)+"</div>"),"en"!=articleData.langCodeUrl&&"simple"!=articleData.langCodeUrl||"true"!=localStorage.ww_hovercards_anywhere||(i+="<span class='ctrl-ocd'>Pro tip: Ctrl+Click any word on any website for quick definition</span>"),i+="<div class='inline_block_mid read-full-article'><a href='"+o+"' target='_blank'></a></div>",i+="</div>",t.data("ocd-cache",i),c.showHoverCard(t,i)},error:function(e,t,o){return n()}})}},t.$on("articleContentReadyFromShell",function(){if(angular.element(document).ready(c.initContentsJQueryProcess),serverData.config.features&&serverData.config.features.classification&&articleData.classification&&articleData.classification.topics){var o=articleData.classification.topics,i=[];t.tags=[],t.concatenatedTags=[];var n=articleData.classification.topics.length;_.each(o,function(e){if(e.reliable="weak",n<5?(e.prob>10&&(e.reliable="med"),e.prob>30&&(e.reliable="strong")):(e.prob>2&&(e.reliable="med"),e.prob>10&&(e.reliable="strong")),"weak"==e.reliable);else{var o=e;"strong"==e.reliable?o.class="predicted":o.class="predicted med",i.push(o),"strong"==e.reliable&&t.concatenatedTags.push(o.name)}}),t.tags=_.sortBy(i,function(e){}),e.showInterestTags=!0,t.concatenatedTags=t.concatenatedTags.join(",")}}),t.$on("runTablesOverflow",function(){angular.element(document).ready(c.tablesOverflow)}),e.showArticleContents=!1,c.articleTop(),c.loadLocalContent(),c.bindEvents();var v=2,w="hide",y="show",b=0;function k(e){var t=document.getElementById("collapseButton"+e),o=document.getElementById("collapsibleTable"+e);if(!o||!t)return!1;var i,n=o.rows;if(t.firstChild.data===w){for(i=1;i<n.length;i++)n[i].style.display="none";t.firstChild.data=y}else{for(i=1;i<n.length;i++)n[i].style.display=n[0].style.display;t.firstChild.data=w}}}]);var DISABLE_GOOGLE_MAPS=!0;(app=angular.module("wikiwand")).service("MapHelper",["$http","$log","$rootScope","$window","$timeout",function(e,t,o,i,n){var a={getMapImage:function(){if(!DISABLE_GOOGLE_MAPS&&(console.log("get map image"),trackJsInfo(i,"getMapImage"),articleData&&articleData.wikidataInfo&&articleData.wikidataInfo.geo&&articleData.wikidataInfo.geo.lat&&articleData.wikidataInfo.geo)){var e=a.getMapZoom();o.mapImageUrl="https://maps.googleapis.com/maps/api/staticmap?center="+articleData.wikidataInfo.geo.lat+","+articleData.wikidataInfo.geo.lon+"&zoom="+(e+3)+"&size=800x400";var t="<div id='miniMap' onClick='loadGoogleMaps();'><img class='map' src='"+o.mapImageUrl+"'/><img class='center'  src='/img/location.png'/><img style='margin-top:"+a.pseudoRand(articleData.wikidataInfo.geo.lat,173)+"px; margin-left:-"+a.pseudoRand(articleData.wikidataInfo.geo.lat,9)+"px;' src='/img/sub_location.png'/><img style='margin-top:-"+a.pseudoRand(articleData.wikidataInfo.geo.lat,3)+"px; margin-left:"+a.pseudoRand(articleData.wikidataInfo.geo.lat,829)+"px;' src='/img/sub_location.png'/><img style='margin-top:"+a.pseudoRand(articleData.wikidataInfo.geo.lat,631)+"px; margin-left:-"+a.pseudoRand(articleData.wikidataInfo.geo.lat,313)+"px;' src='/img/sub_location.png'/><img style='margin-top:-"+a.pseudoRand(articleData.wikidataInfo.geo.lat,11)+"px; margin-left:"+a.pseudoRand(articleData.wikidataInfo.geo.lat,2)+"px;' src='/img/sub_location.png'/></div>";0==$("#fullContent").html().length?o.$on("articleContentReadyFromShell",function(){a.displayMiniMap(t)}):a.displayMiniMap(t)}},displayMiniMap:function(e){console.log("display mini map"),n(function(){$(".ww_ib_1").length>0?$(".ww_ib_1").prepend('<tr><td colspan="12">'+e+"</td></tr>"):0==$(".ww_ib_1").length&&$("#fullContent .portrait_img").length>0?($("#fullContent .portrait_img").after(e),$("#miniMap").addClass("float")):($(".title_wrapper").after(e),$("#miniMap").addClass("float"))},10)},getMapZoom:function(){var e=1;if(articleData.wikidataInfo.geo.dimension){var t=articleData.wikidataInfo.geo.dimension;t>0&&(e=13),t>5&&(e=10),t>10&&(e=9),t>50&&(e=6),t>100&&(e=4),t>500&&(e=3),t>2e3&&(e=0)}return e},pseudoRand:function(e,t){return Math.round(3466732*e/t)%71/71*70}};return a}]);var maps_script,infoWindowLatch2=!1;if("undefined"!=typeof serverData)var DEBUG_GEO=serverData&&serverData.config&&"development"===serverData.config.environment;var fetchResultsDelay=500;function initializeGoogleMaps(){"function"==typeof $("body").scope().initMap?$("body").scope().initMap():setTimeout(initializeGoogleMaps,300)}function infoWindowMouseIn(){var e=$("#map_wrapper").scope();infoWindowLatch2=!0,e.testCloseInfoWindow()}function infoWindowMouseOut(){var e=$("#map_wrapper").scope();infoWindowLatch2=!1,e.testCloseInfoWindow()}function loadGoogleMaps(){maps_script?$("body").scope().map?$("body").scope().map.showMap=!0:setTimeout(loadGoogleMaps,300):((maps_script=document.createElement("script")).type="text/javascript",maps_script.src="https://maps.googleapis.com/maps/api/js?v=3.exp&callback=initializeGoogleMaps",document.body&&document.body.appendChild(maps_script))}function getObjectKeys(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&t.push(o);return t}(app=angular.module("wikiwand")).controller("MapController",["$rootScope","$scope","Utilities","WikipediaApi","$timeout","$http","$window","MapHelper",function(e,t,o,i,n,a,r,s){var l,c,u=this;o.isTouchDevice()?(l="click",c=""):(l="mouseover",c="mouseout"),e.mapOut=function(){angular.element("#miniMap").removeClass("loading"),trackJsInfo(r,"mapOut")},t.testCloseInfoWindow=function(){n(function(){!1===t.infowindowLatch1&&!1===infoWindowLatch2&&t.infowindow.close()},500)},t.initializeMapController=function(){trackJsInfo(r,"initializeMapController"),n(function(){e.map={},e.map.exists=!!articleData.geo,e.map.exists,e.map.showMap=!1,t.infowindowLatch1=!1,infoWindowLatch2=!1,e.initMap=function(){n(function(){if(trackJsInfo(r,"initMap"),articleData&&articleData.wikidataInfo&&articleData.wikidataInfo.geo){e.map={},analytics.gaEvent("rich-map","opened"),angular.element("#miniMap").addClass("loading"),t.entries={};var o=new google.maps.LatLng(articleData.wikidataInfo.geo.lat,articleData.wikidataInfo.geo.lon),i=google.maps.MapTypeId.ROADMAP,n={zoom:s.getMapZoom()+2,center:o,mapTypeId:i,scrollwheel:!0},a=document.getElementById("map_canvas");a||(console.log("no map canvas"),trackJsInfo(r,"could not find map canvas")),t.map=new google.maps.Map(a,n),t.mainInfoWindow=new google.maps.InfoWindow({content:'<div class="main-map-infobox">'+articleData.title+"</div>",disableAutoPan:!0,zIndex:1e4});var d=new google.maps.Marker({position:o,map:t.map,title:"",name:articleData.title,icon:"//assets.wikiwand.com/img/location.png",zIndex:1e3,url:articleData.cache.key,draggable:!1});t.infowindow=new google.maps.InfoWindow({content:"infobox",disableAutoPan:!0,maxWidth:300,zIndex:10001}),google.maps.event.addListener(d,"click",function(){t.map.panTo(d.getPosition())}),google.maps.event.addListener(d,l,function(){infoWindowMouseOut(),t.mainInfoWindow.open(t.map,d)}),google.maps.event.addListener(d,c,function(){t.mainInfoWindow.close()}),google.maps.event.addListener(t.map,"center_changed",function(){u.mapChangeEvent()}),google.maps.event.addListener(t.map,"zoom_changed",function(){u.mapChangeEvent()}),e.map.showMap=!0,u.loadMarkersIntoMap()}},200)}},0)},u.escapeHtml=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},u.showMapInfobox=function(e,t){var o=articleData.langCodeUrl;"zh-"===o.substr(0,3)&&$.inArray(o,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])>=0&&(o="zh");var i="https://"+o+".wikipedia.org/w/api.php";$.ajax({dataType:"jsonp",url:i,data:{action:"query",format:"json",prop:"extracts|pageimages|revisions|info",redirects:!0,exintro:!0,exsentences:2,explaintext:!0,piprop:"thumbnail",pithumbsize:320,rvprop:"timestamp",inprop:"watched",indexpageids:!0,titles:e.name},success:function(o){var i;if(null!=o.error)return t(null);var n=o.query.pageids[0],a=o.query.pages[n];return e.url,i="",i+='<div onMouseOver="infoWindowMouseIn();"  onMouseOut="infoWindowMouseOut();"   class="map-ocd unselectable"><div class="tooltipster-content"><div class="ocd-content">',null!=a.thumbnail&&(i+="<div class='image'><img src='"+u.escapeHtml(a.thumbnail.source)+"' onerror='this.style.display=\"none\"' /></div>"),null!=a.title&&(i+="<div class='title'>"+u.escapeHtml(a.title)+"</div>"),null!=a.extract?a.length>500?i+="<div class='text'>"+u.escapeHtml(a.extract)+"</div>":i+="<div class='text'>There are multiple articles with this name. Click to see disambiguation.</div>":i+="<div class='text'>There isn't an article for this place. Click to search Wikiwand.</div>",i+="<div class='read-full-article'><a href='"+e.url+"'  target='_blank'></a></div>",t(i+="</div></div></div>")},error:function(e,o,i){return t(null)}})},u.mapChangeEvent=function(){var e=(new Date).getTime();t.lastEventTime=e,n(u.testLastEvent,fetchResultsDelay+50)},u.testLastEvent=function(){t.lastEventTime&&((new Date).getTime()-t.lastEventTime>fetchResultsDelay?(t.infowindow.close(),u.loadMarkersIntoMap(),t.lastEventTime=null):n(u.testLastEvent,fetchResultsDelay+50))},u.loadMarkersIntoMap=function(){var e=t.map.getCenter(),o=e.lat(),i=e.lng();if(!o||!i)return r.trackJs&&r.trackJs.track("Cannot find longitude/latitude from Google Maps data"),void console.error("Cannot find longitude/latitude from Google Maps data"+JSON.stringify(e));var n=o.toString(),a=i.toString(),s=t.map.getZoom(),d=Math.round(Math.max(Math.pow(16-s,3),1)),p=t.map.getBounds();try{var h=Math.abs(p.Da.j-p.Da.k);d=Math.round(60*h)}catch(e){}var f=articleData.langCodeUrl;"zh-"===f.substr(0,3)&&$.inArray(f,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])>=0&&(f="zh");var g="https://"+f+".wikipedia.org/w/api.php";if(console.log("Shown map radius: ",m+"km"),!(d>200)){var m=Math.min(1e3*d,1e4);$.ajax({dataType:"jsonp",url:g,data:{action:"query",format:"json",prop:"info|coordinates",inprop:"watchers",coprop:"type|name|dim|country|region",colimit:500,generator:"geosearch",ggsradius:m,ggscoord:n+"|"+a,ggslimit:500,ggsmaxdim:1e3,ggsprop:"type|name|country|region"},success:function(e){if(null!=e.error)return console.error("geolocation call: got error",e);if(!e.query)return console.info("geolocation call: no query",e);if(!e.query.pages)return console.info("geolocation call: no query.geosearch",e);var o=[];$.each(e.query.pages,function(e,t){if(!t.coordinates||0==t.coordinates.length)return!0;var i=t.coordinates[0],n="/"+articleData.langCodeUrl+"/"+t.title.replace(/ /g,"_"),a=t.title,r=t.watchers||0;if(null==n)return!0;if(n==articleData.rawArticlePath)return!0;if(!i.lat||!i.lon)return!0;var s={key:n,name:a,lat:i.lat,lon:i.lon,watchers:r};o.push(s)}),o.sort(function(e,t){return e.watchers-t.watchers}),o=o.slice(0,50),console.log("Received "+o.length+" entries");var i=[];$.each(o,function(e,o){if(t.entries[o.key])return!0;t.entries[o.key]=!0,i[e]=new google.maps.Marker({position:new google.maps.LatLng(o.lat,o.lon),map:t.map,title:"",name:o.name,icon:"//assets.wikiwand.com/img/sub_location.png",url:o.key,draggable:!1}),function(e){google.maps.event.addListener(i[e],l,function(){u.showMapInfobox(i[e],function(o){o?(t.infowindow.setContent(o),t.infowindow.open(t.map,i[e]),t.infowindowLatch1=!0):console.log("no html")})}),google.maps.event.addListener(i[e],c,function(){t.infowindowLatch1=!1,t.testCloseInfoWindow()})}(e)})},error:function(e,t,o){console.error("geolocation call: got error",t)}})}}}]),(app=angular.module("wikiwand")).service("ActivationServiceRev2",["$http","$rootScope","$timeout","$injector","ipCookie","Utilities",function(e,t,o,i,n,a){var r;!function(){if("/extension/thank-you"==location.pathname)return analytics.gaVirtualPageView("/virtualpageview/landing/referrer/installed/"+n("wikiwand_first_landing_referrer")),void analytics.gaVirtualPageView("/virtualpageview/landing/page/installed/"+n("wikiwand_first_landing_page"));if(!n("wikiwand_first_landing_referrer")){var e=document.referrer.toLowerCase(),t="referral";-1==e.indexOf("google")&&-1==e.indexOf("yahoo")&&-1==e.indexOf("yandex")||(t="search"),""==e&&(t="direct"),serverData&&serverData.agent.extensionInstalled&&(t="extension");var o="article_page";"/"==location.pathname&&(o="home_page"),n("wikiwand_first_landing_referrer",t,{path:"/",expires:30}),analytics.gaVirtualPageView("/virtualpageview/landing/referrer/impression/"+t),analytics.gaVirtualPageView("/virtualpageview/landing/page/impression/"+o),n("wikiwand_first_landing_page",o,{path:"/",expires:30})}}(),t.reportCopy=function(e,o,i){var n=!!o;e.keyCode&&67==e.keyCode&&e.ctrlKey&&(console.log("detected CTRL+C"),n=!0),"mouseup"==e.type&&2==e.button&&(console.log("detected right mouse click"),n=!0),n&&(console.log("reporting"),s.reportUserActivity({action:"sent",refID:t.activation.userID,type:i},function(e,o){e?console.log("failed to credit landing",e):(console.log("written user activity",o),analytics.gaVirtualPageViewIf(!0,"virtualpageview/payment/referal_sent_"+i),analytics.gaVirtualPageViewIf(!0,"virtualpageview/pay-"+t.cohort+"/referal_sent_"+i))}))};var s={reportUserActivity:function(t,o){var i=JSON.stringify(t);console.log("report user activity",i);var n=e({method:"post",url:"/api/reportUserActivity",data:i});n.success(function(e){return e.err?o(err,null):(console.log("success reporting user activity",e.data),o(null,null))}),n.error(function(){return o("error reporting user activity",null)})},getMyCredits:function(o){console.log("get my credits");var i=e({method:"post",url:"/api/user/getMyCredits",data:{userID:t.activation.userID}});i.success(function(e){return o(e.err,e.data)}),i.error(function(){return o("error in get my credits api call",null)})},loadState:function(){if(console.log("in load state"),t.walkthrough={},t.activation={},localStorage.wikiwand_activation)try{t.activation=angular.fromJson(localStorage.wikiwand_activation)}catch(e){$window.trackJs&&(trackJsInfo($window,"activation json string is "+localStorage.wikiwand_activation),$window.trackJs.track("problem parsing activation",exception.message))}if(localStorage.wikiwand_walkthrough)try{t.walkthrough=angular.fromJson(localStorage.wikiwand_walkthrough)}catch(e){$window.trackJs&&(trackJsInfo($window,"wikiwand_walkthrough json string is "+localStorage.wikiwand_walkthrough),$window.trackJs.track("problem parsing wikiwand_walkthrough",exception.message))}t.activation.showShare=!1,t.activation.instructions=!1,t.lightboxOpened=!1,t.extPopShow=!1,t.extPopAnim=!1,0!=t.walkthrough.new_visitor&&(t.walkthrough.new_visitor=1!=t.activation.extensionInstalled),t.activation.extensionInstalled&&"Chrome"==serverData.agent.family&&-1==document.location.search.indexOf("in_iframe")?t.activation.showSwitchToWikipedia=!0:t.activation.showSwitchToWikipedia=!1;var e=document.location.search.indexOf("debug_fast=1")>-1?3:15;serverData.callToInstallExtension&&$(document).one("mousemove",function(){o(function(){var e=serverData&&serverData.agent.extensionInstalled,o=-1!==document.cookie.indexOf("wikiwand.extension.popupAlreadyShown");e||o||(console.log("showing popup"),n("wikiwand.extension.popupAlreadyShown","true",{path:"/",expires:5}),t.extPopShow||t.lightboxOpened||(serverData&&serverData.settings&&serverData.settings.monPlus&&(t.extPopShow=!0),t.lightboxOpened=!0,t.extPopAnim=!0))},1e3*e)}),serverData.callToPersonalize;var a=function(e){n("wikiwand.activation.first_impression")||(n("wikiwand.activation.first_impression",e,{path:"/",expires:1}),analytics.gaVirtualPageView("/virtualpageview/article-promo/impression/"+e))};if("/extension/thank-you"==location.pathname)analytics.gaVirtualPageView("/virtualpageview/article-promo/install-complete/"+(n("wikiwand.activation.first_impression")||"external-source"));else if("/"==location.pathname)a("homepage");else if(articleData&&articleData.rawArticlePath){a("promo_"+(n("wikiwand.activation.article_promo_name")||"unknown"))}else a("other-page");s.normalizeData();try{i.get("userPreferences").updatePageStyle("update")}catch(e){}},normalizeData:function(){if(t.activation||(t.activation={}),serverData&&serverData.agent.extensionInstalled?(t.activation.extensionInstalled||(t.activation.installTime=(new Date).getTime()),t.activation.extensionInstalled=!0):t.activation.extensionInstalled=!1,!t.activation.userID){console.log("creating new user ID");var e=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o=0;o<8;o++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}();t.activation.userID=e,0==t.activation.extensionInstalled&&("/"==window.location.pathname?(console.log("new user homepage"),analytics.gaVirtualPageView("virtualpageview/landing/homepage")):(console.log("new user article page"),analytics.gaVirtualPageView("virtualpageview/landing/article-page")))}n("wikiwand.userID",t.activation.userID,{path:"/",expires:1e5}),t.refString="%3Fref%3D"+t.activation.userID,n("reset-referal")&&(console.log("resetting referal"),t.activation.userRefererNew=null,t.activation.userReferralCredited=!1,t.activation.userFollowCredited=!1,t.activation.achievedReferralCredits=!1,n.remove("wikiwand.userRefererNew",{path:"/"}),n.remove("reset-referal",{path:"/"})),console.log("activation state",t.activation),n("wikiwand.userRefererNew")&&!t.activation.userRefererNew&&(console.log("setting user referer"),t.activation.userRefererNew=n("wikiwand.userRefererNew"),t.activation.userReferralCredited=!1,t.activation.userFollowCredited=!1,n.remove("wikiwand.userRefererNew",{path:"/"}),console.log("saved referer")),t.activation.userRefererNew&&1!=t.activation.userReferralCredited&&t.activation.userRefererNew!=t.activation.userID&&(1==t.activation.extensionInstalled?(t.activation.userReferralCredited=!0,s.reportUserActivity({action:"install",refID:t.activation.userRefererNew,"http-ref":n("wikiwand.userHTTP_Referer")},function(e,o){e?console.log("failed to credit referral",e):(console.log("marking as credited"),analytics.gaVirtualPageViewIf(!0,"virtualpageview/payment/referal_install"),analytics.gaVirtualPageViewIf(!0,"virtualpageview/pay-"+t.cohort+"/referal_install"),s.saveState())})):1!=t.activation.userFollowCredited&&(t.activation.userFollowCredited=!0,s.reportUserActivity({action:"landing",refID:t.activation.userRefererNew,"http-ref":n("wikiwand.userHTTP_Referer")},function(e,o){e?console.log("failed to credit landing",e):(analytics.gaVirtualPageViewIf(!0,"virtualpageview/payment/referal_landing"),analytics.gaVirtualPageViewIf(!0,"virtualpageview/pay-"+t.cohort+"/referal_landing"),s.saveState())}))),t.activation.browser=serverData.agent.family?serverData.agent.family:"Other",serverData.agent.string.indexOf("OPR")>-1&&(t.activation.browser="Opera"),t.activation.windows=serverData.agent.os.family.indexOf("Windows")>-1,t.activation.touch=!!a.isTouchDevice(),t.activation.viewedPages?-1==document.location.search.indexOf("in_iframe")&&t.activation.viewedPages++:t.activation.viewedPages=1,null==t.activation.joined&&(t.activation.joined=(new Date).getTime());var o=(new Date).getTime();if(t.activation.vetek=Math.round((o-t.activation.joined)/864e5,1),t.activation.vetek>=1&&(localStorage.wikiwand_last_save=(new Date).getTime()),null==t.activation.installextension&&(t.activation.installextension={},t.activation.installextension.random=Math.round(10*Math.random(),1),t.activation.installextension.randomText=Math.round(100*Math.random(),1),t.activation.installextension.finished=!1),t.activation.ABRateShare||(t.activation.ABRateShare=Math.round(10*Math.random(),1)),null==t.activation.rateextension&&(t.activation.rateextension={},t.activation.rateextension.finished=!1),t.activation.nextAction||(t.activation.nextAction="activation_install"),1==t.activation.extensionInstalled&&(t.activation.ABRateShare>0&&t.activation.vetek<10&&t.activation.nextAction,t.activation.nextAction="activation_share"),0==t.activation.extensionInstalled&&(t.activation.nextAction="activation_install"),"Other"==t.activation.browser&&(t.activation.nextAction="activation_share"),1==t.activation.touch&&(t.activation.nextAction="activation_share"),t.inFrame=document.location.search.indexOf("in_iframe")>-1,t.inFrame&&(t.activation.nextAction=""),t.activation.ratedText="","Chrome"==t.activation.browser&&(t.activation.ratedText="Rated <span>&#9733;&#9733;&#9733;&#9733;&#9733;</span> on the Chrome Web Store"),"Firefox"==t.activation.browser&&(t.activation.ratedText="Rated <span>&#9733;&#9733;&#9733;&#9733;&#9733;</span> on Mozilla Add-ons"),"Safari"==t.activation.browser&&(t.activation.ratedText="Featured on the Safari extensions gallery"),"activation_install"==t.activation.nextAction){switch(t.activation.installextension.randomText%3+1){case 1:t.activation.text="Upgrade Wikipedia";break;case 2:t.activation.text="Install Wikiwand";break;case 3:t.activation.text="Get Wikiwand";break;default:t.activation.text="Upgrade Wikipedia"}t.activation.tooltip="Click to install Wikiwand",t.activation.installextension.popupHeadline="Install our extension to set Wikiwand as your default Wikipedia interface",articleData.title&&analytics.gaVirtualPageView("virtualpageview/install-impression/"+t.activation.text.split(" ").join("-"))}"activation_rate"==t.activation.nextAction&&(t.activation.tooltip="Click to rate",t.activation.text="Rate us",t.activation.nextAction="activation_share"),"activation_share"===t.activation.nextAction&&(t.activation.tooltip="Tell a friend",t.activation.text="Tell a friend",t.activation.toolbarText=""),s.saveState()},saveState:function(){localStorage.wikiwand_activation=angular.toJson(t.activation),localStorage.wikiwand_walkthrough=angular.toJson(t.walkthrough)},extensionPopup:function(e){"activation_install"===t.activation.nextAction&&("enter"===e&&(r=o(function(){t.extPopShow=!0,t.lightboxOpened=!0,o(function(){t.extPopAnim=!0},10),analytics.gaVirtualPageView("virtualpageview/install-popup/"+t.activation.text.split(" ").join("-"))},500)),"leave"===e&&o.cancel(r),"click"===e&&(serverData.callToInstallExtension?analytics.gaVirtualPageView("/virtualpageview/article-promo-lightbox/install-click"):serverData.callToPersonalize&&analytics.gaVirtualPageView("/virtualpageview/article-promo-pers/install-click"),1==t.activation.instructions&&(t.extPopShow=!0,t.lightboxOpened=!0,r=o(function(){t.extPopAnim=!0},10)))),"clickClose"===e&&(o.cancel(r),t.extPopAnim=!1,o(function(){t.extPopShow=!1,t.activation.instructions=!1},500))},activationButtonClicked:function(e){var i,n;if(console.log(e),e&&""!==e&&e,"activation_share"===t.activation.nextAction&&(analytics.gaEvent("activation","share-click",t.activation.browser),analytics.gaVirtualPageView("virtualpageview/share-click"),analytics.gaVirtualPageView("virtualpageview/invites/clicked"),t.activation.showShare=!0,o(function(){t.activation.animShare=!0},100)),"activation_rate"===t.activation.nextAction&&("Chrome"===t.activation.browser&&(i="https://chrome.google.com/webstore/detail/wikiwand-wikipedia-modern/emffkefkbkpkgpdeeooapgaicgmcbolj/reviews"),"Firefox"===t.activation.browser&&(i="https://addons.mozilla.org/en-US/firefox/addon/wikiwand-wikipedia-modernized/reviews/add"),analytics.gaEvent("activation","rate-click",serverData.agent.family),analytics.gaVirtualPageView("virtualpageview/rate-click"),n&&n.close(),n=window.open(i,"_blank"),t.activation.rateextension.finished=!0,t.activation.nextAction="activation_share"),"activation_install"===t.activation.nextAction)switch(analytics.gaEvent("activation","install-click",t.activation.vetek),analytics.gaVirtualPageView("virtualpageview/install-click/"+t.activation.text.split(" ").join("-")),n&&n.close(),t.activation.browser){case"Opera":i="/extension/install-wikiwand-on-opera",n=window.open(i,"_blank"),analytics.gaVirtualPageView("virtualpageview/install-chrome-opera");break;case"Chrome":i="https://chrome.google.com/webstore/detail/wikiwand-wikipedia-modern/emffkefkbkpkgpdeeooapgaicgmcbolj",t.activation.nextAction="activation_share",analytics.gaVirtualPageView("virtualpageview/install-chrome-store"),t.activation.installextension.finished=!0,o(function(){window.location=i},500);break;case"Firefox":i="https://addons.mozilla.org/en-US/firefox/addon/wikiwand-wikipedia-modernized/",n=window.open(i,"_blank"),t.activation.nextAction="activation_share",t.activation.installextension.finished=!0,analytics.gaVirtualPageView("virtualpageview/install-firefox-store");break;case"Safari":t.activation.instructions=!0,t.extensionPopup("click"),analytics.gaVirtualPageView("virtualpageview/install-safari-inline"),i="//assets.wikiwand.com/extension/safari/wikiwand.safariextz",setTimeout(function(){n=window.open(i,"_self")},2e3),t.activation.installextension.finished=!0,t.activation.nextAction="activation_share"}else t.extPopShow=!1;s.normalizeData()},new_visitor_fold_clicked:function(){t.walkthrough.new_visitor=!1,s.normalizeData()}};return s}]),(app=angular.module("wikiwand")).service("TestingService",["$http","$rootScope","$timeout","ipCookie","Utilities",function(e,t,o,i,n){return{initializeTests:function(){var e=window.location.search.indexOf("debug_tests=1")>-1,o={};if(t.cohorts={mon_footer:"none",mon_footer_b:"none",mon_bottom:"none",mon_ocd:"none",mon_p:"none"},serverData.settings&&serverData.settings.tests){for(var i in e&&jQuery.isEmptyObject(serverData.settings.tests)&&console.warn("Tests settings not loaded from database yet, please retry in a few seconds"),serverData.settings.tests){var n=serverData.settings.tests[i],a=0,r={name:i,options:[]};for(var s in n){var l=n[s],c=a,u=Math.min(c+l,100);a=u,r.options.push({min:c,max:u,val:s})}a<100&&r.options.push({min:a,max:100,val:"none"}),o[r.name]=r}for(var d in e&&console.info("Tests:",o),o){var p="wikiwand_test_"+(r=o[d]).name;localStorage[p]||(localStorage[p]=Math.floor(100*Math.random()));var h=localStorage[p];for(var d in r.options){var f=r.options[d];if(f.min!=f.max&&(h>=f.min&&h<f.max)){t.cohorts[r.name]=f.val;break}}}e&&console.info("User Cohorts:",t.cohorts)}}}}]);var adsenseInstallClick=function(){console.log("adsense install clicked");var e=$("body").scope();e.activation.nextAction,e.reportClick("below-adsense"),e.activationButtonClicked(""),analytics.gaVirtualPageView("virtualpageview/install-below-adsense-clicked")};function getWatchers(e){function t(e){return e&&e.$$watchers||[]}return function e(o){var i=t(o.data().$isolateScope),n=t(o.data().$scope).concat(i);return angular.forEach(o.children(),function(t){n=n.concat(e(angular.element(t)))}),n}(e=angular.element(e||document.documentElement))}function sw(){return getWatchers().length}(app=angular.module("wikiwand")).service("MonService",["$http","$rootScope","$timeout","ipCookie","Utilities",function(e,t,o,i,n){var a=window.location.search.indexOf("debug_from_search=1")>-1;return{initMonService:function(){if(!precache_from_extension&&serverData.settings&&serverData.settings.monPlus){a&&console.log("MonService: started");var e="none";if(serverData.settings&&serverData.settings.monPlus&&(e="adsense"),"adsense"==e){articleData.taboo?(e="none",a&&console.log("MonService: Will not use AdSense due to taboo content"),analytics.gaVirtualPageView("virtualpageview/monetization/strategy/none-taboo")):-1==$.inArray(articleData.langCodeUrl,["ar","arz","el","ro","bg","he","ru","zh","zh-hans","zh-hant","zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","hi","sr","hu","sk","hr","id","sl","cs","it","es","da","ja","sv","nl","ko","th","en","simple","lv","tr","et","lt","uk","fi","no","nn","vi","fr","pl","de","pt"])?(e="none",a&&console.log("MonService: Will not use AdSense due to unsupported language"),analytics.gaVirtualPageView("virtualpageview/monetization/strategy/none-lang")):analytics.gaVirtualPageView("virtualpageview/monetization/strategy/adsense")}a&&console.info("Selected footer monetization:",e),"adsense"==e&&t.$on("articleContentReadyFromShell",function(){a&&console.info("Loading AdSense");var e=function(e,o,i){var n='<div class="install"><a href="javascript:void(0);" onclick="adsenseInstallClick();">Install Wikiwand to remove all ads</a></div>';1==t.activation.touch&&(n="");var a='<script>(adsbygoogle = window.adsbygoogle || []).push({});<\/script><div class="bnr-adsense '+e+'"><div class="wrappers">'+i+"</div>";return o&&(a+=n),a+="</div>"};o(function(){var t=e("sky",!1,'<ins class="adsbygoogle" style="display:inline-block;width:300px;height:600px" data-ad-client="ca-pub-9383599848936891" data-ad-slot="2726044164"></ins>');$("#fullContent").eq(0).prepend(t);var o=e("top",!0,'<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9383599848936891" data-ad-slot="5958712165" data-ad-format="auto"></ins>');$("#fullContent").eq(0).prepend(o);var i=e("after2",!0,'<ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9383599848936891" data-ad-slot="4143901763"></ins>');$("#fullContent section").eq(1).append(i);var n=e("after3",!0,'<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9383599848936891" data-ad-slot="6877042168" data-ad-format="auto"></ins>');$("#fullContent section").eq(2).append(n);var a=e("tocbnr",!1,'<ins class="adsbygoogle" style="display:inline-block;width:180px;height:150px" data-ad-client="ca-pub-9383599848936891" data-ad-slot="6534658165"></ins>');$("#toc_wrapper").append(a),$("#wikiwand_toc").addClass("with_bnr"),$(document).ready(function(){var e=$(".bnr-adsense.sky").offset().top+400;$(window).on("scroll",function(){$(this).scrollTop()>e?$("#fixed_bnr").addClass("open"):$("#fixed_bnr").removeClass("open")})});var r=e("fixedbottom",!0,'<ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-9383599848936891" data-ad-slot="8650519762"></ins>');$("#content").append('<div id="fixed_bnr">'+r+"</div>")}),jQuery.getScript("//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",function(e,t,o){200==o.status?a&&console.log("MonService: AdSense loaded successfully"):console.log("MonService: AdSense load failed: ",o.status,"/",e,"/",t)})}),"none"!=e?$(window).load(function(){var t=!0;"adsense"==e&&(t=$(".adsbygoogle iframe").length>0),a&&console.log("MonService: Ads are "+(t?"VISIBLE":"BLOCKED")),analytics.gaVirtualPageView("virtualpageview/monetization/visibility/adsense/"+(t?"visible":"blocked")),t||$(".bnr-adsense").hide()}):a&&console.log("MonService: not loading any ads")}}}}]),(app=angular.module("wikiwand")).service("Utilities",function(){var e=navigator.userAgent.toLowerCase(),t=e.match(/(iphone|ipod|ipad)/)||e.match(/(android)/)||e.match(/(iemobile)/)||e.match(/iphone/i)||e.match(/ipad/i)||e.match(/ipod/i)||e.match(/blackberry/i)||e.match(/bada/i),o=!1;return document.documentMode&&(o=!0),{isItInternetExplorer:function(){return o},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isTouchDevice:function(){return t},agent:serverData.agent}});var getFacebookSdkLocale=function(){var e={en:"en_US",de:"de_DE",fr:"fr_FR",ja:"ja_JP",es:"es_LA",ru:"ru_RU",zh:"zh_CN","zh-tw":"zh_TW","zh-hk":"zh_HK","zh-mo":"zh_CN","zh-sg":"zh_CN","zh-cn":"zh_CN","zh-hant":"zh_TW","zh-hans":"zh_CN",it:"it_IT",th:"th_TH",pt:"pt_BR",ar:"ar_AR",pl:"pl_PL",nl:"nl_NL",id:"id_ID",sv:"sv_SE",fa:"fa_IR",uk:"uk_UA",hu:"hu_HU",vi:"vi_VN",da:"da_DK",he:"he_IL"},t="en_US",o="undefined"!=typeof articleData?articleData.langCodeUrl:"en";return e[o]&&(t=e[o]),t};app.config(["FacebookProvider",function(e){var t=getFacebookSdkLocale();e.setLocale(t),console.log("init facebook provider with app id","823404911083396"),e.init("823404911083396")}]),app.service("userService",["$timeout","$http","Facebook","$rootScope","ipCookie",function(e,t,o,i,n){i.facebookInitialized=!1;var a="object"==typeof userData,r=!1,s=!1;i.initializedUser=!1,i.user={};i.$on("Facebook:load",function(){i.facebookInitialized=!0});var l=function(e){a&&(r=!0,localStorage.removeItem("wikiwand.user.authenticated"),t.get("/api/nouser/logout",{dataType:"json",cache:!1}).then(function(t){userData=t.data,"function"==typeof e&&e(null,userData)}))},c=function(e){a&&o.getLoginStatus(function(o){if("not_authorized"==o.status)userData&&userData.logins&&userData.logins&&userData.logins.facebook.isActive?l(e):e(null,userData);else if("connected"==o.status){var i=function(){if(a){var e={stats:{topLangsUsed:{},pagesViewed:null,dateJoined:null},settings:{favoriteLangs:[],clientPrefs:null}};try{var t=JSON.parse(localStorage.wikiwand_languages_rev2);Object.keys(t).forEach(function(o){var i=t[o];i.fav&&e.settings.favoriteLangs.push(i.lang),e.stats.topLangsUsed[i.lang]=i.count})}catch(e){console.log("Error while parsing wikiwand_languages_rev2",e)}try{e.settings.clientPrefs=JSON.parse(localStorage.wikiwand_user_prefs)}catch(e){console.log("Error while parsing wikiwand_user_prefs",e)}try{var o=JSON.parse(localStorage.wikiwand_activation);e.stats.dateJoined=o.joined?new Date(o.joined).toISOString():null,e.stats.pagesViewed=o.viewedPages}catch(e){console.log("Error while parsing wikiwand_activation",e)}return e}}(),n={authResponse:o.authResponse,userInfo:i};t.get("/api/user/facebook-authenticated",{dataType:"json",params:{data:JSON.stringify(n)},cache:!1}).then(function(t){r?l(function(t,o){e(null,o)}):(userData=t.data,localStorage.setItem("wikiwand.user.authenticated",t.data.userId+"/"+(new Date).getTime().toString()),"function"==typeof e&&e(null,t.data))})}else e(null,userData)})},u=function(){a&&(i.user=userData,2==userData.permissions.role&&(i.user.isAdmin=!0),i.$broadcast("userStatusUpdated",{user:i.user}))},d=null;return a&&(u(),function(e){if(a){var t=!1,o=localStorage.getItem("wikiwand.user.authenticated");if(o){var i=o.split("/");if(2==i.length){i[0];var n=parseInt(i[1]);(new Date).getTime()-n>36e5&&(t=!0)}userData.logins.facebook&&userData.logins.facebook.isActive||(t=!0)}t?c(e):e(null,userData)}}(function(e,t){u(),e||(i.initializedUser=!0)})),{onUserInitialized:function(e){a&&i.$watch("initializedUser",function(){i.initializedUser&&e(null,null)})},getUserCohort:function(e){if(!d){var t="";if(userData)t=userData.userId;else{var o=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage;t=navigator.userAgent.slice(-40)+"|"+o.slice(-40)+"|"+window.screen.width+"|"+window.screen.height}var i=(n="j9Qt"+e+"8jW"+t+"mYo4Ua",Math.abs(function(e){var t,o,i=0;if(0===e.length)return i;for(t=0,o=e.length;t<o;t++)i=(i<<5)-i+e.charCodeAt(t),i|=0;return i}(n)));d=i%100}var n;return d},loginToFacebook:function(e,t){if(a){if(r=!1,!a||!s&&!(s=o&&o.isReady()))return t("Facebook is not loaded yet, please try again shortly");o.login(function(o){"connected"==o.status&&("function"==typeof e&&e(),c(function(e,o){userData=o,u(),"function"==typeof t&&t(e,o)}))},{scope:["public_profile","email","user_friends"]})}},logoutFromFacebook:l,isLoggedIn:function(){return!!a&&!!(i.user&&i.user.logins&&i.user.logins.facebook&&1==i.user.logins.facebook.isActive)},saveUserKVP:function(e,o,n){var a={category:e,key:o,val:n};t.post("/api/user/set-kvp",a).success(function(t){console.log("setUserKVP successfully: ",e+"."+o+" = "+n+" / setting KVP to: ",t.kvp),i.user.kvp=t.kvp}).error(function(t){console.log("setUserKVP error for ",e+"."+o+" = "+n+": ",t)})}}}]),app.controller("UserController",["$scope","$timeout","$http","Facebook","$rootScope","ipCookie","userService",function(e,t,o,i,n,a,r){n.editMode=!0;var s=function(){e.userManagementEnabled&&(e.userOperationInProgress=!1,e.userConnected=userData&&userData.logins&&userData.logins.facebook&&userData.logins.facebook.isActive?"facebook":null)};e.bookmarksFacebookLoginButtonClick=function(){console.log("facebook connect"),n.bookmarksProgressIndicator=!0,n.bookmarksConnectClicked=!0,analytics.gaEvent("bookmarks","connect","click"),analytics.gaVirtualPageView("virtualpageview/bookmarks/connect/click"),e.userManagementEnabled&&r.loginToFacebook(function(){e.userOperationInProgress=!0},function(e,t){if(e)return console.error(e);s()})},n.facebookLoginButtonClick=function(t){e.userManagementEnabled&&(t=t||function(){},r.loginToFacebook(function(){e.userOperationInProgress=!0},function(e,o){return e?console.error(e):(s(),t(e,o))}))},e.logoutButtonClick=function(){e.userManagementEnabled&&(e.userOperationInProgress=!0,r.logoutFromFacebook(function(e,t){if(e)return console.error(e);s()}))},console.log("UserController: initializing"),e.userManagementEnabled="object"==typeof userData,e.userManagementEnabled&&(s(),r.onUserInitialized(function(e,t){if(e)return console.error(e);s()}))}]);
//# sourceMappingURL=wikiwand.early.min.c114815a.js.map